{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_print.js","../../src/_/_order_tables.js","../../src/_/_order_preview.js","../../src/_/_cnt_orders.js","../../src/orders/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n\n    // cache CDN link\n    if(response.cdn) localStorage.setItem('cdn', response.cdn);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __init = (locale) => {\n\n    if(typeof locale !== 'object' || locale === null) return;\n\n    if(typeof window.i18n === 'undefined') window.i18n = {};\n\n    if(typeof window.i18n.state === 'undefined') window.i18n.state = { locale: {} };\n   \n    window.i18n.state.locale = locale;\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n\n\n    return match(window.i18n.state.locale.values[text], p);\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param cb {Function} callback function to escape text variable\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nconst __esc = (text, cb, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(cb(window.i18n.state.locale.values[text]), p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const attr = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __attr = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Removes special characters `<`, `>`, `\"`, `'` from the link.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const src = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n    \n}\n\n/*\n * Converts special characters `<`, `>`, `\"`, `'` from the link and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __src = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const html = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translations\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __html = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[&<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries.\n * @param {object} headers\n */\n export const H = () => {\n\n    return {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n        'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n        'Kenzap-Header': checkHeader(),\n        'Kenzap-Token': getCookie('kenzap_token'),\n        'Kenzap-Sid': spaceID()\n    }\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n * @deprecated\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+encodeURIComponent(window.location.href); break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name CDN\n * @description Returns CDN URL of Kenzap Cloud file storage\n * @param {String} region - Default location Singapore. TODO, override by region variable\n */\nexport const CDN = (region = '') => {\n\n    if(localStorage.getItem('cdn')) return localStorage.getItem('cdn');\n\n    return 'https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com';\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" style=\"z-index:10000;\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { getCookie, H, getSiteId, simulateClick, link, parseApiError, __html } from '@kenzap/k-cloud';\n\n/* \ntexts to localize\n__('required')\n__('Size')\n__('Small')\n__('Regular')\n__('Large')\n__('Subtotal')\n__('Discount by %')\n__('Discount by value')\n__('Grand Total')\n*/\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const isValidDomain = (str) => {\n \n    if (typeof value !== 'string') return false\n    if (!(opts instanceof Object)) opts = {}\n    value = value.toLowerCase()\n  \n    if (value.endsWith('.')) {\n      value = value.slice(0, value.length - 1)\n    }\n  \n    if (opts.allowUnicode) {\n      value = punycode.toASCII(value)\n    }\n  \n    if (value.length > 253) {\n      return false\n    }\n  \n    const validChars = /^([\\u0E00-\\u0E7Fa-z0-9-._*]+)$/g\n    if (!validChars.test(value)) {\n      return false\n    }\n  \n    if (opts.topLevel) {\n      if (ccTldMap[value.replace(/\\.$/, '')]) {\n        return true\n      }\n    }\n  \n    const sldRegex = /(.*)\\.(([\\u0E00-\\u0E7Fa-z0-9]+)(\\.[a-z0-9]+))/\n    const matches = value.match(sldRegex)\n    let tld = null\n    let labels = null\n    if (matches && matches.length > 2) {\n      if (sldMap[matches[2]]) {\n        tld = matches[2]\n        labels = matches[1].split('.')\n      }\n    }\n  \n    if (!labels) {\n      labels = value.split('.')\n      if (labels.length <= 1) return false\n  \n      tld = labels.pop()\n      const tldRegex = /^(?:xn--)?(?!^\\d+$)[\\u0E00-\\u0E7Fa-z0-9]+$/gi\n  \n      if (!tldRegex.test(tld)) return false\n    }\n  \n    if (opts.subdomain === false && labels.length > 1) return false\n  \n    const isValid = labels.every(function (label, index) {\n      if (opts.wildcard && index === 0 && label === '*' && labels.length > 1) {\n        return true\n      }\n  \n      let validLabelChars = /^([\\u0E00-\\u0E7Fa-zA-Z0-9-_]+)$/g\n      if (index === labels.length - 1) {\n        validLabelChars = /^([\\u0E00-\\u0E7Fa-zA-Z0-9-]+)$/g\n      }\n  \n      // https://github.com/miguelmota/is-valid-domain/issues/22\n      const doubleDashCount = (label.match(/--(--)?/g) || []).length\n      const xnDashCount = (label.match(/xn--/g) || []).length\n      if (index === labels.length - 1 && doubleDashCount !== xnDashCount) {\n        return false\n      }\n  \n      const isValid = (\n        validLabelChars.test(label) &&\n        label.length < 64 &&\n        !label.startsWith('-') &&\n        !label.endsWith('-')\n      )\n  \n      return isValid\n    })\n  \n    return isValid\n}\n\nexport const getParam = (param) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get(param) ? urlParams.get(param) : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const replaceQueryParam = (param, newval, search) => {\n\n    let regex = new RegExp(\"([?;&])\" + param + \"[^&;]*[;&]?\");\n    let query = search.replace(regex, \"$1\").replace(/&$/, '');\n\n    return (query.length > 2 ? query + \"&\" : \"?\") + (newval ? param + \"=\" + newval : '');\n}\n\nexport const getPageNumberOld = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPageNumber = () => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n    let page = urlParams.get('page') ? urlParams.get('page') : 1;\n\n    return parseInt(page);\n}\n\nexport const getPagination = (__, meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = __('no records to display'); return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = __(\"Showing %1$ to %2$ of %3$ entries\", (1+meta.offset), (offset), meta.total_records);\n    //  \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat mb-0\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?i:i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        \n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                // let url = window.location.href.split('/page');\n                // let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                let str = window.location.search;\n                str = replaceQueryParam('page', p, str);\n                // window.location = window.location.pathname + str\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, window.location.pathname + str);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const stockBadge = (_this, inventory) => {\n\n    // console.log(inventory.stock_warning + \" \" + inventory.stock_amount);\n\n    if(inventory.stock_amount <= 0){\n\n        return '<div data-stock=\"out\" class=\"badge bg-danger text-light fw-light\">' + __html('Out of stock') + '</div>';\n    }else if(inventory.stock_warning >= inventory.stock_amount){\n\n        return '<div data-stock=\"low\" class=\"badge bg-warning text-dark fw-light\">' + __html('Low stock') + '</div>';\n    }else{\n\n        return '<div data-stock=\"in\" class=\"badge bg-success text-light fw-light\">' + __html('In stock') + '</div>';\n    }\n}\n\nexport const formatStatus = (__, st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">' + __('Draft') + '</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">' + __('Published') + '</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">' + __('Unpublished') + '</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">' + __('Drafts') + '</div>';\n    }\n}\n\n/**\n    * Render price\n    * @public\n    */\n export const priceFormat = function(_this, price) {\n\n    price = makeNumber(price);\n\n    price = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    switch(_this.state.settings.currency_symb_loc){\n        case 'left': price = _this.state.settings.currency_symb + ' ' + price; break;\n        case 'right': price = price + _this.state.settings.currency_symb; break;\n    }\n\n    return price;\n}\n\nexport const makeNumber = function(price) {\n\n    price = price ? price : 0;\n    price = parseFloat(price);\n    price = Math.round(price * 100) / 100;\n    return price;\n}\n\nexport const formatTime = (__, timestamp) => {\n\t\n    const d = new Date(parseInt(timestamp) * 1000);\n    return d.toLocaleDateString();\n\n    let a = new Date(timestamp * 1000);\n    let months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const formatTimeDetailed = (__, timestamp) => {\n\t\n    // let a = new Date(timestamp * 1000);\n    // let hour = a.getHours();\n    // let min = a.getMinutes();\n\n    // console.log(hour+\":\"+min);\n\n    // server stores in UTC\n    // let offset = new Date().getTimezoneOffset();\n\n    const d = new Date(parseInt(timestamp) * 1000); //  + offset*60\n    \n    let t = d.toLocaleTimeString().split(':');\n\n    return d.toLocaleDateString() + \" \" + t[0] + \":\" + t[1];\n}\n\n// numbers only with allowed exceptions\n// export const onlyNumbers = (sel, chars) => {\n\n//     if(!document.querySelector(sel)) return;\n    \n//     document.querySelector(sel).addEventListener('keypress', (e) => {\n\n//         // console.log(e.which);\n\n//         if((!chars.includes(e.which) && isNaN(String.fromCharCode(e.which))) || e.which == 32 || (document.querySelector(sel).value.includes(String.fromCharCode(e.which)) && chars.includes(e.which))){\n\n//             // stop character from entering input\n//             e.preventDefault(); \n//             return false;\n//         }\n//     });\n// }\n\n// numbers only with allowed exceptions\nexport const onlyNumbers = (sel, chars) => {\n\n    if(!document.querySelector(sel)) return;\n\n    // arrow navigation\n    chars.push(...[9, 37, 38, 39, 40, 98, 100, 102, 104]);\n    \n    [...document.querySelectorAll(sel)].forEach(el => {\n\n        el.addEventListener('keydown', (e) => {\n\n            const key = e.key.toLowerCase();\n\n            // track potential paste event\n            if(key == 'control' || key == 'meta'){\n\n                window[key] = true;\n            }\n        \n            console.log(key.length + \" / \" + isNumber + \" / \" + e.which);\n\n            // not alphanumeric\n            // if (key.length != 1) {\n\n            //     e.preventDefault(); \n            //     return false;\n            // }\n        \n            // const isLetter = (key >= 'a' && key <= 'z');\n            const isNumber = (key >= '0' && key <= '9');\n\n            // add exception when Control or Meta (MAC) keys pressed\n            // console.log(window['meta'] + \" \" + window['control']);\n\n            // allow x c v a characters when meta ot control is pressed\n            if((window['control'] || window['meta']) && [86, 88, 65, 67, 90].includes(e.which)){ console.log(\"pushing\"); return true; }\n\n            // actual check\n            if (!isNumber && !chars.includes(e.which)) {\n\n                e.preventDefault(); \n                return false;\n            }\n        });\n\n        el.addEventListener('keyup', (e) => {\n\n            const key = e.key.toLowerCase();\n\n            // potential paste event\n            if(key == 'control' || key == 'meta'){\n\n                window[key] = false;\n            }\n        });\n    });\n}\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (__, now, time) => {\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return __('moments ago');\n    if(past < 3600) return parseInt(past / 60) + ' ' + __('minutes ago');\n    if(past < 86400) return parseInt(past / 60 / 60) + ' ' + __('hours ago');\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [ __('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec') ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const parseVariations = (_this, product) => {\n\n    let html_vars = '';\n    if(typeof(product.variations !== 'undefined'))\n    for(let v in product.variations){\n\n        // variation type\n        let type = '';\t\n        if(product.variations[v].type=='checkbox') type = 'check';\n        if(product.variations[v].type=='radio')    type = 'radio';\n\n        // struct variation\n        html_vars += '\\\n        <b>' + __html(product.variations[v].title) + (product.variations[v].required == '1' ? ' <span class=\"tag\">'+__html('required')+'</span>':'')+'</b>\\\n        <div class=\"kp-'+type+'\" >';\n\n        // variation labels\n        for(let d in product.variations[v].data){\n\n            let checked = false;\n            // for public qr feed\n            // if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){ checked = true; }\n            \n            // verify variation price validity\n            product.variations[v].data[d]['price'] = makeNumber(product.variations[v].data[d]['price']);\n\n            switch(type){\n                case 'check':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"checkbox\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+'>\\\n                        <div class=\"checkbox\">\\\n                            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\\\n                                <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\\\n                                <polyline points=\"4 11 8 15 16 6\"></polyline>\\\n                            </svg>\\\n                        </div>\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n                case 'radio':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"radio\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" name=\"radio'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+' />\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n            }\n        }\n\n        html_vars += '</div>';\n    }\n\n    return html_vars;\n}\n\nexport const escape = (htmlStr) => {\n\n    return htmlStr.replace(/&/g, \"&amp;\")\n          .replace(/</g, \"&lt;\")\n          .replace(/>/g, \"&gt;\")\n          .replace(/\"/g, \"&quot;\")\n          .replace(/'/g, \"&#39;\");        \n \n}\n\nexport const unescape = (htmlStr) => {\n\n    htmlStr = htmlStr.replace(/&lt;/g , \"<\");\t \n    htmlStr = htmlStr.replace(/&gt;/g , \">\");     \n    htmlStr = htmlStr.replace(/&quot;/g , \"\\\"\");  \n    htmlStr = htmlStr.replace(/&#39;/g , \"\\'\");   \n    htmlStr = htmlStr.replace(/&amp;/g , \"&\");\n    return htmlStr;\n}\n\nexport const ecommerceUpdates = (_this, source, cb) => {\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: H(),\n        body: JSON.stringify({\n            query: {\n                updates: {\n                    type:       'updates',\n                    source:     source,\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if(response.success){\n\n            // do callback\n            cb(response);\n            \n            // parse notifications\n            renderNotifications(_this, response.messages);\n            \n        }else{\n\n\n        }\n    })\n    .catch(error => { // parseApiError(error); \n    });\n}\n\nexport const isMobile = () => {\n\n    const nav = navigator.userAgent.toLowerCase();\n    return (\n        nav.match(/iphone/i) || nav.match(/ipod/i) || nav.match(/ipad/i) || nav.match(/android/i)\n    );\n}\n\n// play notification sound. Ex.: when new order received\nexport const playSound = (_this, max) => {\n \n    // if(!max) max = _this.state.playSound.max_times;\n\n    _this.state.playSound.n = 0;\n\n    if(_this.state.playSound.timer) clearInterval(_this.state.playSound.timer);\n\n    if(_this.state.playSound.allowed) _this.state.playSound.audio.play();\n\n    // console.log(\"playing \" + _this.state.playSound.allowed);\n\n    try{\n        if(_this.state.playSound.allowed && isMobile()) window.navigator.vibrate(200);\n    }catch{\n\n    }\n\n    if(max==1) return;\n\n    _this.state.playSound.timer = setInterval(() => {\n\n        if(!_this.state.playSound.allowed) return;\n         \n        _this.state.playSound.audio.play();\n\n        if(_this.state.playSound.n > max){ clearInterval(_this.state.playSound.timer) }\n\n        _this.state.playSound.n += 1;\n\n    }, 5000);\n\n    // console.log('playSound');\n}\n\nexport const renderNotifications = (_this, messages) => {\n\n    let html = '';\n\n    let play = false;\n\n    // html\n    messages.forEach(msg => {\n\n        if(!_this.state.playSound.nids.includes(msg._id)){ _this.state.playSound.nids.push(msg._id); play = true; }\n\n        if(!document.querySelector('#contents .container [data-id=\"'+msg._id+'\"]')){\n        \n            html += `\n\n            <div class=\"alert alert-${ msg.color } alert-dismissible fade show\" role=\"alert\" data-id=\"${ msg._id }\">\n                <div class=\"d-flex align-items-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-square flex-shrink-0 me-2\" viewBox=\"0 0 16 16\">\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\n                        <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                    </svg>\n                    <div>\n                    ${ msg.msg }\n                    </div>\n                </div>\n                <button type=\"button\" class=\"btn-close btn-dismiss-notify\" data-bs-dismiss=\"alert\" aria-label=\"Close\" data-id=\"${ msg._id }\"></button>\n            </div>`;\n        }\n    });\n\n    // play sound\n    if(play){ \n        // console.log('notify play sound'); \n        playSound(_this, 1); _this.getData(); \n    }\n\n    if(document.querySelector('#contents .container')) document.querySelector('#contents .container').insertAdjacentHTML(\"afterbegin\", html);\n\n    // listeners\n    onClick('.btn-dismiss-notify', (e) => {\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    updates: {\n                        type:       'dismiss',\n                        id:         e.currentTarget.dataset.id,\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n\n\n            }else{\n\n\n            }\n        })\n        .catch(error => { // parseApiError(error); \n        });\n    });\n\n    // order open listener\n    if(document.querySelector('.order-details')) for( let el of document.querySelectorAll('.order-details') ){\n\n        if(el.dataset.assigned == \"1\") return;\n\n        el.dataset.assigned = 1;\n\n        el.addEventListener('click', (e) => {\n\n            let el = document.querySelector(\".view-order[data-id='\"+e.currentTarget.dataset.id+\"']\");\n\n            simulateClick(el);\n\n        }, true);\n    }\n}\n\n/*\n* Load additional JS or CSS depencies\n*\n* @param    dep       dependecy. Ex.: hiebee.min.js \n* @param    cb        function to call after script is loaded (optional)       \n* @return \t{Boolen} \tresult status \n* \n*/\nexport const loadAddon = (dep, version, cb) => {\n\n    \n    const url = new URL(dep);\n\n    if(getCookie('debug')) dep = 'http://localhost:3000' + url.pathname;\n    \n    console.log(dep);\n\n    // dependency already loaded, skip\n    if(document.getElementById(dep)){ if(typeof cb === 'function') cb.call(); return; }\n\n    // detect dependency type\n    let t = dep.split('.').slice(-1)[0];\n    // console.log(dep+'loadAddon'+t);\n    switch(t){\n      case 'js':\n        \n        let js = document.createElement(\"script\");\n        js.setAttribute(\"src\", dep);\n        js.id = dep;\n        js.onload = js.onreadystatechange = function() {\n \n          if(!this.readyState || this.readyState == 'complete')\n            if(typeof cb === 'function') cb.call();\n        };\n        document.body.appendChild(js);\n        \n      break;\n      case 'css':\n\n        var head  = document.getElementsByTagName('head')[0];\n        var css  = document.createElement('link');\n        css.id   = dep;\n        css.rel  = 'stylesheet';\n        css.type = 'text/css';\n        css.href = dep;\n        head.appendChild(css);\n\n      break;\n    }\n}\n\nexport const getProductsById = (_this, products, cb) => {\n\n    // do API query\n    const response_raw = fetch('https://api-v1.kenzap.cloud/', {\n        method: 'post',\n        headers: H(),\n        body: JSON.stringify({\n            query: {\n                products: {\n                    type:       'find',\n                    fields:     '*',\n                    key:        'ecommerce-product',\n                    id:         products,\n                    sortby:     {\n                        field: 'created',\n                        order: 'DESC'\n                    }\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success) {\n\n            response.products.forEach((product, i) => {\n\n                _this.state.orderSingle.items.push({\n                    cats: [],\n                    id: product._id,\n                    index: i,\n                    note: \"\",\n                    price: product.price,\n                    qty: 1,\n                    sdesc: __html(product.sdesc),\n                    title: __html(product.title),\n                    total: product.price,\n                    type: \"new\",\n                    variations: []\n                });\n            });\n\n            cb(_this);\n        }\n    })\n    .catch(error => { console.log(error); parseApiError(error); });\n}\n\nexport let Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\\r\\n/g,\"\\n\");var t=\"\";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}\n\nexport const makeid = (length) => {\n\n    let result = '';\n    const characters = 'abcdefghijklmnopqrstuvwxyz';\n    const charactersLength = characters.length;\n    let counter = 0;\n    while (counter < length) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      counter += 1;\n    }\n    return result;\n}\n\n// categories input tags\nexport const simpleTags = (element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', __html('new tag'));\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}\n\nexport const initFooter = (_this) => {\n        \n    // Created by %1$Kenzap%2$. ❤️ \n    let left = __html('Pages 1.0.5 by %1$Kenzap%2$. ❤️ Licensed %3$GPLv3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/pages\" target=\"_blank\">', '</a>')  \n    let right = __html('%1$Developer mode%2$', `<a class=\"text-muted\" href=\"${ link('/develop/') }\" target=\"_self\">`, `</a>`)  ;\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name getAPI\n * @description Returns API link\n * @param {object} headers\n */\nexport const getSiteAPI = () => {\n\n    return window.location.host.indexOf(\"localhost\") == 0 ? \"https://siteapi-dev.kenzap.cloud/\" : \"https://siteapi.kenzap.cloud/\";\n}\n\nexport const getCurrencies = () => {\n\n    // length 164\n    return [\n        {\"name\":\"Afghan Afghani\",\"code\":\"AFA\",\"symbol\":\"؋\"},\n        {\"name\":\"Albanian Lek\",\"code\":\"ALL\",\"symbol\":\"Lek\"},\n        {\"name\":\"Algerian Dinar\",\"code\":\"DZD\",\"symbol\":\"دج\"},\n        {\"name\":\"Angolan Kwanza\",\"code\":\"AOA\",\"symbol\":\"Kz\"},\n        {\"name\":\"Argentine Peso\",\"code\":\"ARS\",\"symbol\":\"$\"},\n        {\"name\":\"Armenian Dram\",\"code\":\"AMD\",\"symbol\":\"֏\"},\n        {\"name\":\"Aruban Florin\",\"code\":\"AWG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"Australian Dollar\",\"code\":\"AUD\",\"symbol\":\"$\"},\n        {\"name\":\"Azerbaijani Manat\",\"code\":\"AZN\",\"symbol\":\"m\"},\n        {\"name\":\"Bahamian Dollar\",\"code\":\"BSD\",\"symbol\":\"B$\"},\n        {\"name\":\"Bahraini Dinar\",\"code\":\"BHD\",\"symbol\":\".د.ب\"},\n        {\"name\":\"Bangladeshi Taka\",\"code\":\"BDT\",\"symbol\":\"৳\"},\n        {\"name\":\"Barbadian Dollar\",\"code\":\"BBD\",\"symbol\":\"Bds$\"},\n        {\"name\":\"Belarusian Ruble\",\"code\":\"BYR\",\"symbol\":\"Br\"},\n        {\"name\":\"Belgian Franc\",\"code\":\"BEF\",\"symbol\":\"fr\"},\n        {\"name\":\"Belize Dollar\",\"code\":\"BZD\",\"symbol\":\"$\"},\n        {\"name\":\"Bermudan Dollar\",\"code\":\"BMD\",\"symbol\":\"$\"},\n        {\"name\":\"Bhutanese Ngultrum\",\"code\":\"BTN\",\"symbol\":\"Nu.\"},\n        {\"name\":\"Bitcoin\",\"code\":\"BTC\",\"symbol\":\"฿\"},\n        {\"name\":\"Bolivian Boliviano\",\"code\":\"BOB\",\"symbol\":\"Bs.\"},\n        {\"name\":\"Bosnia-Herzegovina Convertible Mark\",\"code\":\"BAM\",\"symbol\":\"KM\"},\n        {\"name\":\"Botswanan Pula\",\"code\":\"BWP\",\"symbol\":\"P\"},\n        {\"name\":\"Brazilian Real\",\"code\":\"BRL\",\"symbol\":\"R$\"},\n        {\"name\":\"British Pound Sterling\",\"code\":\"GBP\",\"symbol\":\"£\"},\n        {\"name\":\"Brunei Dollar\",\"code\":\"BND\",\"symbol\":\"B$\"},\n        {\"name\":\"Bulgarian Lev\",\"code\":\"BGN\",\"symbol\":\"Лв.\"},\n        {\"name\":\"Burundian Franc\",\"code\":\"BIF\",\"symbol\":\"FBu\"},\n        {\"name\":\"Cambodian Riel\",\"code\":\"KHR\",\"symbol\":\"KHR\"},\n        {\"name\":\"Canadian Dollar\",\"code\":\"CAD\",\"symbol\":\"$\"},\n        {\"name\":\"Cape Verdean Escudo\",\"code\":\"CVE\",\"symbol\":\"$\"},\n        {\"name\":\"Cayman Islands Dollar\",\"code\":\"KYD\",\"symbol\":\"$\"},\n        {\"name\":\"CFA Franc BCEAO\",\"code\":\"XOF\",\"symbol\":\"CFA\"},\n        {\"name\":\"CFA Franc BEAC\",\"code\":\"XAF\",\"symbol\":\"FCFA\"},\n        {\"name\":\"CFP Franc\",\"code\":\"XPF\",\"symbol\":\"₣\"},\n        {\"name\":\"Chilean Peso\",\"code\":\"CLP\",\"symbol\":\"$\"},\n        {\"name\":\"Chinese Yuan\",\"code\":\"CNY\",\"symbol\":\"¥\"},\n        {\"name\":\"Colombian Peso\",\"code\":\"COP\",\"symbol\":\"$\"},\n        {\"name\":\"Comorian Franc\",\"code\":\"KMF\",\"symbol\":\"CF\"},\n        {\"name\":\"Congolese Franc\",\"code\":\"CDF\",\"symbol\":\"FC\"},\n        {\"name\":\"Costa Rican Colón\",\"code\":\"CRC\",\"symbol\":\"₡\"},\n        {\"name\":\"Croatian Kuna\",\"code\":\"HRK\",\"symbol\":\"kn\"},\n        {\"name\":\"Cuban Convertible Peso\",\"code\":\"CUC\",\"symbol\":\"$, CUC\"},\n        {\"name\":\"Czech Republic Koruna\",\"code\":\"CZK\",\"symbol\":\"Kč\"},\n        {\"name\":\"Danish Krone\",\"code\":\"DKK\",\"symbol\":\"Kr.\"},\n        {\"name\":\"Djiboutian Franc\",\"code\":\"DJF\",\"symbol\":\"Fdj\"},\n        {\"name\":\"Dominican Peso\",\"code\":\"DOP\",\"symbol\":\"$\"},\n        {\"name\":\"East Caribbean Dollar\",\"code\":\"XCD\",\"symbol\":\"$\"},\n        {\"name\":\"Egyptian Pound\",\"code\":\"EGP\",\"symbol\":\"ج.م\"},\n        {\"name\":\"Eritrean Nakfa\",\"code\":\"ERN\",\"symbol\":\"Nfk\"},\n        {\"name\":\"Estonian Kroon\",\"code\":\"EEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Ethiopian Birr\",\"code\":\"ETB\",\"symbol\":\"Nkf\"},\n        {\"name\":\"Euro\",\"code\":\"EUR\",\"symbol\":\"€\"},\n        {\"name\":\"Falkland Islands Pound\",\"code\":\"FKP\",\"symbol\":\"£\"},\n        {\"name\":\"Fijian Dollar\",\"code\":\"FJD\",\"symbol\":\"FJ$\"},\n        {\"name\":\"Gambian Dalasi\",\"code\":\"GMD\",\"symbol\":\"D\"},\n        {\"name\":\"Georgian Lari\",\"code\":\"GEL\",\"symbol\":\"ლ\"},\n        {\"name\":\"German Mark\",\"code\":\"DEM\",\"symbol\":\"DM\"},\n        {\"name\":\"Ghanaian Cedi\",\"code\":\"GHS\",\"symbol\":\"GH₵\"},\n        {\"name\":\"Gibraltar Pound\",\"code\":\"GIP\",\"symbol\":\"£\"},\n        {\"name\":\"Greek Drachma\",\"code\":\"GRD\",\"symbol\":\"₯, Δρχ, Δρ\"},\n        {\"name\":\"Guatemalan Quetzal\",\"code\":\"GTQ\",\"symbol\":\"Q\"},\n        {\"name\":\"Guinean Franc\",\"code\":\"GNF\",\"symbol\":\"FG\"},\n        {\"name\":\"Guyanaese Dollar\",\"code\":\"GYD\",\"symbol\":\"$\"},\n        {\"name\":\"Haitian Gourde\",\"code\":\"HTG\",\"symbol\":\"G\"},\n        {\"name\":\"Honduran Lempira\",\"code\":\"HNL\",\"symbol\":\"L\"},\n        {\"name\":\"Hong Kong Dollar\",\"code\":\"HKD\",\"symbol\":\"$\"},\n        {\"name\":\"Hungarian Forint\",\"code\":\"HUF\",\"symbol\":\"Ft\"},\n        {\"name\":\"Icelandic króna\",\"code\":\"ISK\",\"symbol\":\"kr\"},\n        {\"name\":\"Indian Rupee\",\"code\":\"INR\",\"symbol\":\"₹\"},\n        {\"name\":\"Indonesian Rupiah\",\"code\":\"IDR\",\"symbol\":\"Rp\"},\n        {\"name\":\"Iranian Rial\",\"code\":\"IRR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Iraqi Dinar\",\"code\":\"IQD\",\"symbol\":\"د.ع\"},\n        {\"name\":\"Israeli New Sheqel\",\"code\":\"ILS\",\"symbol\":\"₪\"},\n        {\"name\":\"Italian Lira\",\"code\":\"ITL\",\"symbol\":\"L,£\"},\n        {\"name\":\"Jamaican Dollar\",\"code\":\"JMD\",\"symbol\":\"J$\"},\n        {\"name\":\"Japanese Yen\",\"code\":\"JPY\",\"symbol\":\"¥\"},\n        {\"name\":\"Jordanian Dinar\",\"code\":\"JOD\",\"symbol\":\"ا.د\"},\n        {\"name\":\"Kazakhstani Tenge\",\"code\":\"KZT\",\"symbol\":\"лв\"},\n        {\"name\":\"Kenyan Shilling\",\"code\":\"KES\",\"symbol\":\"KSh\"},\n        {\"name\":\"Kuwaiti Dinar\",\"code\":\"KWD\",\"symbol\":\"ك.د\"},\n        {\"name\":\"Kyrgystani Som\",\"code\":\"KGS\",\"symbol\":\"лв\"},\n        {\"name\":\"Laotian Kip\",\"code\":\"LAK\",\"symbol\":\"₭\"},\n        {\"name\":\"Latvian Lats\",\"code\":\"LVL\",\"symbol\":\"Ls\"},\n        {\"name\":\"Lebanese Pound\",\"code\":\"LBP\",\"symbol\":\"£\"},\n        {\"name\":\"Lesotho Loti\",\"code\":\"LSL\",\"symbol\":\"L\"},\n        {\"name\":\"Liberian Dollar\",\"code\":\"LRD\",\"symbol\":\"$\"},\n        {\"name\":\"Libyan Dinar\",\"code\":\"LYD\",\"symbol\":\"د.ل\"},\n        {\"name\":\"Lithuanian Litas\",\"code\":\"LTL\",\"symbol\":\"Lt\"},\n        {\"name\":\"Macanese Pataca\",\"code\":\"MOP\",\"symbol\":\"$\"},\n        {\"name\":\"Macedonian Denar\",\"code\":\"MKD\",\"symbol\":\"ден\"},\n        {\"name\":\"Malagasy Ariary\",\"code\":\"MGA\",\"symbol\":\"Ar\"},\n        {\"name\":\"Malawian Kwacha\",\"code\":\"MWK\",\"symbol\":\"MK\"},\n        {\"name\":\"Malaysian Ringgit\",\"code\":\"MYR\",\"symbol\":\"RM\"},\n        {\"name\":\"Maldivian Rufiyaa\",\"code\":\"MVR\",\"symbol\":\"Rf\"},\n        {\"name\":\"Mauritanian Ouguiya\",\"code\":\"MRO\",\"symbol\":\"MRU\"},\n        {\"name\":\"Mauritian Rupee\",\"code\":\"MUR\",\"symbol\":\"₨\"},\n        {\"name\":\"Mexican Peso\",\"code\":\"MXN\",\"symbol\":\"$\"},\n        {\"name\":\"Moldovan Leu\",\"code\":\"MDL\",\"symbol\":\"L\"},\n        {\"name\":\"Mongolian Tugrik\",\"code\":\"MNT\",\"symbol\":\"₮\"},\n        {\"name\":\"Moroccan Dirham\",\"code\":\"MAD\",\"symbol\":\"MAD\"},\n        {\"name\":\"Mozambican Metical\",\"code\":\"MZM\",\"symbol\":\"MT\"},\n        {\"name\":\"Myanmar Kyat\",\"code\":\"MMK\",\"symbol\":\"K\"},\n        {\"name\":\"Namibian Dollar\",\"code\":\"NAD\",\"symbol\":\"$\"},\n        {\"name\":\"Nepalese Rupee\",\"code\":\"NPR\",\"symbol\":\"₨\"},\n        {\"name\":\"Netherlands Antillean Guilder\",\"code\":\"ANG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"New Taiwan Dollar\",\"code\":\"TWD\",\"symbol\":\"$\"},\n        {\"name\":\"New Zealand Dollar\",\"code\":\"NZD\",\"symbol\":\"$\"},\n        {\"name\":\"Nicaraguan Córdoba\",\"code\":\"NIO\",\"symbol\":\"C$\"},\n        {\"name\":\"Nigerian Naira\",\"code\":\"NGN\",\"symbol\":\"₦\"},\n        {\"name\":\"North Korean Won\",\"code\":\"KPW\",\"symbol\":\"₩\"},\n        {\"name\":\"Norwegian Krone\",\"code\":\"NOK\",\"symbol\":\"kr\"},\n        {\"name\":\"Omani Rial\",\"code\":\"OMR\",\"symbol\":\".ع.ر\"},\n        {\"name\":\"Pakistani Rupee\",\"code\":\"PKR\",\"symbol\":\"₨\"},\n        {\"name\":\"Panamanian Balboa\",\"code\":\"PAB\",\"symbol\":\"B/.\"},\n        {\"name\":\"Papua New Guinean Kina\",\"code\":\"PGK\",\"symbol\":\"K\"},\n        {\"name\":\"Paraguayan Guarani\",\"code\":\"PYG\",\"symbol\":\"₲\"},\n        {\"name\":\"Peruvian Nuevo Sol\",\"code\":\"PEN\",\"symbol\":\"S/.\"},\n        {\"name\":\"Philippine Peso\",\"code\":\"PHP\",\"symbol\":\"₱\"},\n        {\"name\":\"Polish Zloty\",\"code\":\"PLN\",\"symbol\":\"zł\"},\n        {\"name\":\"Qatari Rial\",\"code\":\"QAR\",\"symbol\":\"ق.ر\"},\n        {\"name\":\"Romanian Leu\",\"code\":\"RON\",\"symbol\":\"lei\"},\n        {\"name\":\"Russian Ruble\",\"code\":\"RUB\",\"symbol\":\"₽\"},\n        {\"name\":\"Rwandan Franc\",\"code\":\"RWF\",\"symbol\":\"FRw\"},\n        {\"name\":\"Salvadoran Colón\",\"code\":\"SVC\",\"symbol\":\"₡\"},\n        {\"name\":\"Samoan Tala\",\"code\":\"WST\",\"symbol\":\"SAT\"},\n        {\"name\":\"Saudi Riyal\",\"code\":\"SAR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Serbian Dinar\",\"code\":\"RSD\",\"symbol\":\"din\"},\n        {\"name\":\"Seychellois Rupee\",\"code\":\"SCR\",\"symbol\":\"SRe\"},\n        {\"name\":\"Sierra Leonean Leone\",\"code\":\"SLL\",\"symbol\":\"Le\"},\n        {\"name\":\"Singapore Dollar\",\"code\":\"SGD\",\"symbol\":\"$\"},\n        {\"name\":\"Slovak Koruna\",\"code\":\"SKK\",\"symbol\":\"Sk\"},\n        {\"name\":\"Solomon Islands Dollar\",\"code\":\"SBD\",\"symbol\":\"Si$\"},\n        {\"name\":\"Somali Shilling\",\"code\":\"SOS\",\"symbol\":\"Sh.so.\"},\n        {\"name\":\"South African Rand\",\"code\":\"ZAR\",\"symbol\":\"R\"},\n        {\"name\":\"South Korean Won\",\"code\":\"KRW\",\"symbol\":\"₩\"},\n        {\"name\":\"Special Drawing Rights\",\"code\":\"XDR\",\"symbol\":\"SDR\"},\n        {\"name\":\"Sri Lankan Rupee\",\"code\":\"LKR\",\"symbol\":\"Rs\"},\n        {\"name\":\"St. Helena Pound\",\"code\":\"SHP\",\"symbol\":\"£\"},\n        {\"name\":\"Sudanese Pound\",\"code\":\"SDG\",\"symbol\":\".س.ج\"},\n        {\"name\":\"Surinamese Dollar\",\"code\":\"SRD\",\"symbol\":\"$\"},\n        {\"name\":\"Swazi Lilangeni\",\"code\":\"SZL\",\"symbol\":\"E\"},\n        {\"name\":\"Swedish Krona\",\"code\":\"SEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Swiss Franc\",\"code\":\"CHF\",\"symbol\":\"CHf\"},\n        {\"name\":\"Syrian Pound\",\"code\":\"SYP\",\"symbol\":\"LS\"},\n        {\"name\":\"São Tomé and Príncipe Dobra\",\"code\":\"STD\",\"symbol\":\"Db\"},\n        {\"name\":\"Tajikistani Somoni\",\"code\":\"TJS\",\"symbol\":\"SM\"},\n        {\"name\":\"Tanzanian Shilling\",\"code\":\"TZS\",\"symbol\":\"TSh\"},\n        {\"name\":\"Thai Baht\",\"code\":\"THB\",\"symbol\":\"฿\"},\n        {\"name\":\"Tongan Pa'anga\",\"code\":\"TOP\",\"symbol\":\"$\"},\n        {\"name\":\"Trinidad & Tobago Dollar\",\"code\":\"TTD\",\"symbol\":\"$\"},\n        {\"name\":\"Tunisian Dinar\",\"code\":\"TND\",\"symbol\":\"ت.د\"},\n        {\"name\":\"Turkish Lira\",\"code\":\"TRY\",\"symbol\":\"₺\"},\n        {\"name\":\"Turkmenistani Manat\",\"code\":\"TMT\",\"symbol\":\"T\"},\n        {\"name\":\"Ugandan Shilling\",\"code\":\"UGX\",\"symbol\":\"USh\"},\n        {\"name\":\"Ukrainian Hryvnia\",\"code\":\"UAH\",\"symbol\":\"₴\"},\n        {\"name\":\"United Arab Emirates Dirham\",\"code\":\"AED\",\"symbol\":\"إ.د\"},\n        {\"name\":\"Uruguayan Peso\",\"code\":\"UYU\",\"symbol\":\"$\"},\n        {\"name\":\"US Dollar\",\"code\":\"USD\",\"symbol\":\"$\"},\n        {\"name\":\"Uzbekistan Som\",\"code\":\"UZS\",\"symbol\":\"лв\"},\n        {\"name\":\"Vanuatu Vatu\",\"code\":\"VUV\",\"symbol\":\"VT\"},\n        {\"name\":\"Venezuelan  Bolívar\",\"code\":\"VEF\",\"symbol\":\"Bs\"},\n        {\"name\":\"Vietnamese Dong\",\"code\":\"VND\",\"symbol\":\"₫\"},\n        {\"name\":\"Yemeni Rial\",\"code\":\"YER\",\"symbol\":\"﷼\"},\n        {\"name\":\"Zambian Kwacha\",\"code\":\"ZMK\",\"symbol\":\"ZK\"}\n    ];\n}","import { headers, __html, parseApiError, spaceID, toast, __ } from '@kenzap/k-cloud';\nimport { priceFormat, renderNotifications } from \"../_/_helpers.js\"\n\nexport const printReceipt = (_this, _id, type, template, debug = false) => {\n\n    let o = {}, data = {}, date = new Date();\n    if(_id==\"test\"){\n\n        o = {\n            _id: \"test\",\n            id: \"test\",\n            created: 1649831099,\n            from: \"dine-in\",\n            idd: \"\",\n            items: [\n                {\n                    cats: [],\n                    id: \"02de5fc62938ba0b031b4e80e962bac15a7285d8\",\n                    index: \"0\",\n                    note: \"\",\n                    price: 45,\n                    qty: 2,\n                    sdesc: \"Salted Egg Crab\",\n                    title: \"咸蛋螃蟹\",\n                    total: 45,\n                    type: \"new\",\n                    variations: [],\n                },\n                {\n                    cats: [],\n                    id: \"69ae96cfb7b25c358dd07560fc55e7d83cae2eb7\",\n                    index: \"0\",\n                    note: \"\",\n                    price: 45,\n                    qty: 1,\n                    sdesc: \"Kam Heong Crab\",\n                    title: \"金香螃蟹\",\n                    total: 45,\n                    type: \"new\",\n                    variations: [],\n                },\n                {\n                    cats: ['Other'],\n                    id: \"a678f2b21a3a3f7e97b6707d8223f32d17ecbefa\",\n                    index: \"0\",\n                    note: \"\",\n                    price: 10,\n                    qty: 12,\n                    sdesc: \"\",\n                    title: \"鱼鳔羮\",\n                    total: 10,\n                    type: \"new\",\n                    variations: [],\n                },\n                {\n                    cats: ['Other'],\n                    id: \"a678f2b21a3a3f7e97b6707d8223f32d17ecbefa\",\n                    index: \"0\",\n                    note: \"\",\n                    price: 25,\n                    qty: 1,\n                    sdesc: \"\",\n                    title: \"螃蟹米粉汤 (粗/幼米粉）\",\n                    total: 25,\n                    type: \"new\",\n                    variations: [],\n                },\n                {\n                    cats: ['Other'],\n                    id: \"a678f2b21a3a3f7e97b6707d8223f32d17ecbefa\",\n                    index: \"0\",\n                    note: \"\",\n                    price: 4,\n                    qty: 1,\n                    sdesc: \"\",\n                    title: \"Fied Chicken Noodles\",\n                    total: 4,\n                    type: \"new\",\n                    variations: [],\n                }\n            ],\n            kid: \"0\",\n            name: \"dine-in\",\n            note: \"\",\n            sid: spaceID,\n            status: \"new\",\n            price: { \n                discount_percent: 10,\n                discount_total: 11.105,\n                discount_value: 0,\n                fee_total: 0,\n                grand_total: 99.95,\n                payment_method: \"Cash\",\n                tax_percent: 0,\n                tax_total: 0,\n                total: 111.05 \n            },\n            step: 1,\n            table: \"table test\",\n            total: 111.05,\n            total_all: 99.95,\n            updated: 1649833845\n        }\n\n    }else{\n        o = _this.state.orders.filter(order => { return order._id == _id; })[0], data = {}, date = new Date();\n    }\n \n    console.log(o);\n\n    // debug vs actual print\n    data.debug = debug;\n\n    // find receipt template if none is provided\n    if(!template){\n\n        // any user designated templates?\n        let templates = _this.state.settings['templates'].filter(template => { return template.type == \"receipt\" && (template.user == _this.state.user.id); });\n        \n        // get default template\n        if(templates.length == 0) templates = _this.state.settings['templates'].filter(template => { return template.type == \"receipt\" && (template.user == \"\"); });\n\n        // assign template\n        data.print = templates.length > 0 ? templates[0].template : \"Kenzap Cloud: no receipt template found\";\n\n        // default\n        template = templates.length > 0 ? templates[0] : {};\n    }else{\n\n        data.print = template.template;\n    }\n\n    // find max char per line parameter\n    let cols_p = data.print.indexOf('[W:'); let cols = 20;\n    if(cols_p!=-1){ cols = parseInt(data.print.substr(cols_p+3, 2)); data.print = data.print.substr(0, cols_p) + data.print.substr(cols_p+6, data.print.length); }\n\n    // order id\n    data.print = data.print.replace(/{{order_id}}/g, o.id ? o.id : \"-\");\n\n    // order from\n    data.print = data.print.replace(/{{order_from}}/g, o.from);\n\n    // take away\n    data.print = data.print.replace(/{{order_takeaway}}/g, o.takeaway ? (o.takeaway == \"dine-in\" ? __html(\"dine-in\") : __html(\"take away\")) : __html(\"dine-in\"));\n\n    // order note\n    data.print = data.print.replace(/{{order_note}}/g, o.note ? o.note : \"\");\n\n    // phone\n    data.print = data.print.replace(/{{order_phone}}/g, o.phone ? o.phone : \"\");\n    \n    // phone\n    data.print = data.print.replace(/{{order_addr1}}/g, o.addr1 ? o.addr1 : \"\");\n    \n    // table no\n    data.print = data.print.replace(/{{order_table}}/g, o.table ? __html(\"Table #%1$\", o.table) : \"\");\n\n    // current time\n    data.print = data.print.replace(/{{date_time}}/g, date.toLocaleString([], { dateStyle: 'medium', timeStyle: 'short', }));\n\n    // order items\n    data.print = data.print.replace(/{{order_items}}/g, getPrintItems(_this, o, '', cols));\n\n    // order items restricted by category\n    const matches = data.print.matchAll(/{{order_items:(.*?):start}}/g);\n    Array.from(matches, x => x[1]).forEach(cat => {\n\n        // console.log(cat);\n\n        // const items_match = data.print.matchAll(/{{order_items:Frog:start}}([\\s\\S]*?){{order_items:Frog:end}}/g);\n\n        let items_restricted = getPrintItems(_this, o, cat, cols);\n\n        // order items cat\n        let replace = \"{{order_items:\"+cat+\"}}\";\n        let re = new RegExp(replace,\"g\");\n        data.print = data.print.replace(re, items_restricted);\n\n        // remove entire block if no items for requested category are present \n        if(items_restricted.length<2){\n\n            let start = data.print.indexOf(\"{{order_items:\"+cat+\":start}}\");\n            let end = data.print.indexOf(\"{{order_items:\"+cat+\":end}}\") + (\"{{order_items:\"+cat+\":end}}\").length;\n\n            data.print = data.print.slice(0, start) + data.print.slice(end);\n\n        // get rid of start/end row indicators\n        }else{\n\n            replace = \"\\n{{order_items:\"+cat+\":start}}\";\n            re = new RegExp(replace,\"g\");\n            data.print = data.print.replace(re, '');\n\n            replace = \"\\n{{order_items:\"+cat+\":end}}\";\n            re = new RegExp(replace,\"g\");\n            data.print = data.print.replace(re, '');\n        }\n    });\n\n    // order note\n    // let note = !o.note || o.note == '<br>' ? '' : o.note;\n    // if(note.length>0){\n    //     //  data.print += '[C]================================';\n    //     data.print = data.print.replace(/{{order_note}}/g, '[C]================================\\n' + note + '\\n[C]================================\\n');\n    // }\n\n    // order totals\n    data.print = data.print.replace(/{{total}}/g, priceFormat(_this, o.price.total));\n    data.print = data.print.replace(/{{tax_total}}/g, priceFormat(_this, o.price.tax_total));\n    data.print = data.print.replace(/{{discount_total}}/g, priceFormat(_this, o.price.discount_total));\n    data.print = data.print.replace(/{{grand_total}}/g, priceFormat(_this, o.price.grand_total));\n\n    let order_totals  = '';\n    order_totals += '[L]' + __('Subtotal')+'[R]' + priceFormat(_this, o.price.total) + '\\n';\n    if(o.price.discount_total > 0) order_totals += '[L]'+__('Discount')+'[R]-' + priceFormat(_this, o.price.discount_total) + '\\n';\n    if(o.price.fee_total > 0) order_totals += '[L]'+_this.state.settings.fee_display+'[R]' + priceFormat(_this, o.price.fee_total) + '\\n';\n    if(o.price.tax_total > 0) order_totals += '[L]'+_this.state.settings.tax_display+'[R]' + priceFormat(_this, o.price.tax_total) + '\\n';\n    if(o.price.grand_total > 0) order_totals += '[L]'+__('Grand Total')+'[R]' + priceFormat(_this, o.price.grand_total);\n\n    data.print = data.print.replace(/{{order_totals}}/g, order_totals);\n\n    // qr link\n    // data.print = data.print.replace(/{{qr_link}}/g, 'http://'+_this.state.qr_settings.slug + '.kenzap.site');\n    if(document.querySelector('#qr-number')) data.print = data.print.replace(/{{qr_number}}/g, document.querySelector('#qr-number').value);\n\n    let printers = type == \"user\" ? template[\"user_print\"] : template[\"auto_print\"];\n\n    // console.log(printers);\n\n    data[\"user\"] = _this.state.user.id;\n    data[\"printers\"] = []; data[\"printers\"].push(printers[0]); // one by one\n    data[\"type\"] = \"receipt\";\n\n    // process styling\n    data.print = processStyling(data.print, cols);\n\n    // console.log(data.print); \n    // return;\n\n    // send data\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: headers,\n        body: JSON.stringify({\n            query: {\n                print: {\n                    type:       'print',\n                    data:       data,\n                    sid:        spaceID(),\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success){\n\n            toast( __('Printing order #'+o.id) );\n\n        }else{\n\n            parsePrintError(_this, response);\n\n            // parseApiError(response);\n        }\n    })\n    .catch(error => {\n\n        parseApiError(error);\n    });\n\n    _this.state.printRequest = null;\n\n    return true;\n}\n\nexport const processStyling = (print, cols) => {\n\n    // preprocess lines\n    let rows = print.split('\\n');\n    let output = \"\";\n    for(let row of rows){\n\n        let max_char = cols;\n\n        let s = row.indexOf('[S]');\n        let r = row.indexOf('[R]');\n        let l = row.indexOf('[L]');\n        let c = row.indexOf('[C]');\n        \n        // chinese, japanese.. chars are twice the size of latin chars, deduct it\n        max_char -= countDoubledChars(row) ? countDoubledChars(row) : 1;\n\n        // [S] stretch to fit row width\n        if(s!=-1){\n\n            row = row.substr(0, s) + row.substr(s+3, row.length);\n        }\n\n        // [R] right aign text\n        if(r!=-1){ \n\n            let spaceN = max_char - (row.substr(0, r) + row.substr(r+3, row.length)).length;\n\n            // other tags offset\n            if(l!=-1) spaceN += 3; if(c!=-1) spaceN += 3;\n\n            row = row.substr(0, r) + addSpaces(spaceN) + row.substr(r+3, row.length)\n        }\n\n        // [L] left align text\n        if(l!=-1){\n\n            let spaceN = max_char - (row.substr(0, l) + row.substr(l+3, row.length)).length;\n            row = row.substr(0, l) + row.substr(l+3, row.length) + addSpaces(spaceN); \n        }\n\n        // [C] center align text\n        if(c!=-1){ \n            \n            let spaceN = max_char - (row.substr(0, r) + row.substr(r+3, row.length)).length;\n\n            row = addSpaces(Math.floor(spaceN/2)) + row.substr(0, c) + row.substr(c+3, row.length) + addSpaces(Math.ceil(spaceN/2));\n        }\n\n        // clean empty row\n        let empty = 0; [...row].forEach(char => { if (char==\" \") empty +=1 ; }); if(empty>=max_char) row = \"\"; // console.log(empty + \" \" + max_char);\n\n        // split very long rows to fit max col size\n        if(row.length > cols){\n\n            let rowNew = \"\", last_row_length = 0;\n            for (let i = 0; i < row.length; i++){\n\n                last_row_length += 1;\n                rowNew += row[i];\n                if(i % cols == 0 && i>0){ rowNew += \"\\n\"; last_row_length = 0; } \n            }\n\n            // add remaining trailing spaces\n            for (let i = last_row_length; i < cols; i++){\n                \n                rowNew += \" \";\n            }\n\n            console.log(rowNew)\n            // rowNew += \"\\n\";\n\n            row = rowNew;\n        }\n\n        output += row+\"\\n\";\n    }\n\n    return output;\n}\n\nexport const addSpaces = (l) => {\n\n    let s = \"\";\n    for(let i=0;i<=l;i++){s+=\" \";}\n    return s;\n}\n\nexport const printReceiptLegacy = (_this, _id, type, template) => {\n\n    let o = _this.state.orders.filter(order => { return order._id == _id; })[0], data = {}, date = new Date();\n\n    // debug vs actual print\n    data.debug = false;\n\n    // find receipt template if none is provided\n    if(!template){\n\n        // any user designated templates?\n        let templates = _this.state.settings['templates'].filter(template => { return template.type == \"receipt\" && (template.user == _this.state.user.id); });\n        \n        // get default templagte\n        if(templates.length == 0) templates = _this.state.settings['templates'].filter(template => { return template.type == \"receipt\" && (template.user == \"\"); });\n\n        // assign template\n        data.print = templates.length > 0 ? templates[0].template : \"Kenzap Cloud: no receipt template found\";\n\n        // default\n        template = templates.length > 0 ? templates[0] : {};\n    }else{\n\n        data.print = template.template;\n    }\n\n    // order id\n    data.print = data.print.replace(/{{order_id}}/g, o.id);\n\n    // table no\n    data.print = data.print.replace(/{{order_table}}/g, o.table ? __html(\"Table #%1$\", o.table) : \"\");\n\n    // current time\n    data.print = data.print.replace(/{{date_time}}/g, date.toLocaleString([], { dateStyle: 'medium', timeStyle: 'short', }));\n\n    // order items\n    data.print = data.print.replace(/{{order_items}}/g, getPrintItems(_this, o, ''));\n\n    // order items restricted by category\n    const matches = data.print.matchAll(/{{order_items:(.*?):start}}/g);\n    Array.from(matches, x => x[1]).forEach(cat => {\n\n        // const items_match = data.print.matchAll(/{{order_items:Frog:start}}([\\s\\S]*?){{order_items:Frog:end}}/g);\n\n        let items_restricted = getPrintItems(_this, o, cat);\n\n        // order items cat\n        let replace = \"{{order_items:\"+cat+\"}}\";\n        let re = new RegExp(replace,\"g\");\n        data.print = data.print.replace(re, items_restricted);\n\n        // remove entire block if no items for requested category are present \n        if(items_restricted.length<2){\n\n            console.log(\"removing entire block\");\n\n            let start = data.print.indexOf(\"{{order_items:\"+cat+\":start}}\");\n            let end = data.print.indexOf(\"{{order_items:\"+cat+\":end}}\") + (\"{{order_items:\"+cat+\":end}}\").length;\n\n            data.print = data.print.slice(0, start) + data.print.slice(end);\n\n            // replace = \"\\n{{order_items:\"+cat+\":start}}([\\s\\S]){{order_items:\"+cat+\":end}}\";\n            // re = new RegExp(replace,\"g\");\n            // data.print = data.print.replace(re, \"\");\n\n        // get rid of start/end row indicators\n        }else{\n\n            replace = \"\\n{{order_items:\"+cat+\":start}}\";\n            re = new RegExp(replace,\"g\");\n            data.print = data.print.replace(re, '');\n\n            replace = \"\\n{{order_items:\"+cat+\":end}}\";\n            re = new RegExp(replace,\"g\");\n            data.print = data.print.replace(re, '');\n        }\n    });\n\n    // order note\n    // let note = !o.note || o.note == '<br>' ? '' : o.note;\n    // if(note.length>0){\n    //     //  data.print += '[C]================================';\n    //     data.print = data.print.replace(/{{order_note}}/g, '[C]================================\\n' + note + '\\n[C]================================\\n');\n    // }\n\n    // order totals\n    data.print = data.print.replace(/{{total}}/g, priceFormat(_this, o.price.total));\n    data.print = data.print.replace(/{{tax_total}}/g, priceFormat(_this, o.price.tax_total));\n    data.print = data.print.replace(/{{discount_total}}/g, priceFormat(_this, o.price.discount_total));\n    data.print = data.print.replace(/{{grand_total}}/g, priceFormat(_this, o.price.grand_total));\n\n    let order_totals  = '';\n    order_totals += '[L]'+__('Subtotal')+'[R]' + priceFormat(_this, o.price.total) + '\\n';\n    if(o.price.discount_total > 0) order_totals += '[L]'+__('Discount')+'[R]-' + priceFormat(_this, o.price.discount_total) + '\\n';\n    if(o.price.fee_total > 0) order_totals += '[L]'+_this.state.settings.fee_display+'[R]' + priceFormat(_this, o.price.fee_total) + '\\n';\n    if(o.price.tax_total > 0) order_totals += '[L]'+_this.state.settings.tax_display+'[R]' + priceFormat(_this, o.price.tax_total) + '\\n';\n    if(o.price.grand_total > 0) order_totals += '[L]'+__('Grand Total')+'[R]' + priceFormat(_this, o.price.grand_total);\n\n    data.print = data.print.replace(/{{order_totals}}/g, order_totals);\n\n    // qr link\n    data.print = data.print.replace(/{{qr_link}}/g, 'http://'+_this.state.qr_settings.slug + '.kenzap.site');\n    data.print = data.print.replace(/{{qr_number}}/g, document.querySelector('#qr-number').value);\n\n    // let str = 'kenzapprint://kenzapprint.app?data='+encodeURIComponent(JSON.stringify(data));\n    \n    console.log(data.print);\n\n    if(data.debug){ console.log(data.print); console.log(str); }\n\n    let printers = type == \"user\" ? template[\"user_print\"] : template[\"auto_print\"];\n\n    data[\"user\"] = _this.state.user.id;\n    data[\"printers\"] = printers;\n    data[\"type\"] = \"receipt\";\n\n    // send data\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: headers,\n        body: JSON.stringify({\n            query: {\n                print: {\n                    type:       'print',\n                    data:       data,\n                    sid:        spaceID(),\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success){\n\n            toast( __('Printing order #'+o.id) );\n\n        }else{\n\n            parsePrintError(_this, response);\n            \n            // parseApiError(response);\n        }\n    })\n    .catch(error => {\n\n        parseApiError(error);\n    });\n\n    _this.state.printRequest = null;\n\n    return true;\n}\n\n/*\n* 58mm wide thermal printers are best to display 20-32 chars per line\n*\n* @param    txt         text with long product item titles to process\n* @param    end_ofst    previous iteation offset     \n* @param    cols        max chars per line \n* @return \t{String} \ttxt\n* \n*/\nexport const row_latin = (txt, end_ofst) => {\n\n    let output = '', max_char = 32 - end_ofst, max_ofst = 4, ofst_prev = 0, ofst = 0, ci = 0;\n    // console.log(max_char);\n    for(let i = 0; i < Math.ceil(txt.length / max_char); i++){\n\n        // add new line print from second loop only\n        if(i>0) output += '\\n[L]';\n\n        // ofst store first available whitespace break in words\n        ofst = ci = 0;\n        for(let e = max_ofst; e > -1 * max_ofst; e--){\n\n            ci = ((max_char + ofst_prev) * i) + max_char + e; if(txt[ci] == ' ' || ci == txt.length){ ofst += e; break; }\n        }\n\n        // add line row\n        output += txt.substr((max_char + ofst_prev) * i, max_char + ofst);\n\n        // line ends earlier than expected, skip loop\n        if(ci == txt.length) break;\n\n        ofst_prev = ofst;\n    }\n\n    return output;\n};\n\nexport const row = (txt, start_ofst, end_ofst, cols) => {\n\n    cols-=1;\n\n    let output = '', max_ofst = 6, ofst_prev = 0, ofst = 0, ci = 0;\n\n    let first_row = true;\n\n    for(let i = 0; i < txt.length; i++){\n        \n        output += txt[i];\n\n        ofst += (1 + countDoubledChars(txt[i]));\n\n        // first loop\n        if(first_row && ofst >= cols - (start_ofst + end_ofst)){ output += '\\n[L]'; ofst = 0; first_row = false;}\n\n        // other loops\n        if(ofst >= cols - end_ofst){ output += '\\n[L]'; ofst = 0; }\n    }\n\n    return output;\n}\n\nexport const countDoubledChars = (text) => {\n\n    // This matches all CJK ideographs.\n    var cjkRegEx = /[\\u3400-\\u4db5\\u4e00-\\u9fa5\\uf900-\\ufa2d]/;\n  \n    var wordCount = 0;\n    var inWord = false;\n    var length = text.length;\n    for (var i = 0; i < length; i++) {\n\n      var curChar = text.charAt(i);\n      if (cjkRegEx.test(curChar)) {\n\n        // Character is a CJK ideograph.\n        // Count it as a word.\n        wordCount += inWord ? 2 : 1;\n        inWord = false;\n      }\n    }\n\n    return wordCount;\n}\n\nexport const getPrintItems = (_this, o, cat, cols) => {\n\n    let items = '';\n\n    // console.log(o.items);\n  \n    for(let i in o.items){\n\n        if(o.items[i].cats == undefined) o.items[i].cats = [];\n\n        if(!o.items[i].cats.includes(cat) && cat.length > 0) continue;\n\n        let total = priceFormat(_this, o.items[i].total);\n        // let end_ofst = ((o.items[i].qty+\"\") + \" X \" + (total+\"\")).length;\n        // items += `[L]<b>${ o.items[i].qty } X ${ row(__(o.items[i].title), end_ofst) }</b>[R]${ total }\\n`;\n        items += `[L]${ o.items[i].qty } X ${ row( __(o.items[i].title), (o.items[i].qty+\"\").length + 3, (total+\"\").length, cols) }[R]${ total }\\n`;\n        for(let v in o.items[i].variations){\n\n            items += `[L] ${ row( __(o.items[i].variations[v].title), 1, 0, cols) }:`;\n            for(let l in  o.items[i].variations[v].list) items += ` ${ __(o.items[i].variations[v].list[l].title) },`;\n\n            if(items.endsWith(',')) items = items.substring(0, items.length - 1) + '\\n';\n            if(!items.endsWith('\\n')) items = items + '\\n';\n        }\n    }\n\n    if(items.endsWith('\\n')) items = items.substring(0, items.length - 1);\n \n    return items;\n}\n\nexport const printQRNative = (_this, order) => {\n\n    // vars\n    let o = order, data = {}, date = new Date();\n\n    // debug vs actual print\n    data.debug = false;\n\n    // get qr template\n    data.print = _this.state.settings.qr_template;\n\n    // qr link\n    data.print = data.print.replace(/{{qr_link}}/g, 'http://'+_this.state.qr_settings.slug + '.kenzap.site');\n    data.print = data.print.replace(/{{qr_number}}/g, document.querySelector('#qr-number').value);\n\n    if(data.debug) { console.log(data.print); console.log(str); }\n\n    let str = 'kenzapprint://kenzapprint.app?data='+encodeURIComponent(JSON.stringify(data));\n\n    return str;\n}\n\nexport const printQR = (_this, qrnum) => {\n\n    // vars\n    let data = {}, date = new Date();\n\n    // debug vs actual print\n    data.debug = false;\n\n    // find QR template\n    let templates = _this.state.settings['templates'].filter(template => { return template.type == \"qr\" && (template.user == \"\" || template.user == _this.state.user.id); });\n\n    // get qr template\n    data.print = templates.length > 0 ? templates[0].template : \"Kenzap Cloud: no qr template found\";\n\n    // qr link\n    data.print = data.print.replace(/{{qr_link}}/g, 'http://'+_this.state.qr_settings.slug + '.kenzap.site');\n\n    // qr number\n    qrnum = qrnum ? qrnum : document.querySelector('#qr-number').value;\n\n    // qr number replace\n    data.print = data.print.replace(/{{qr_number}}/g, qrnum);\n\n    // find max char per line parameter\n    let cols_p = data.print.indexOf('[W:'); let cols = 20;\n    if(cols_p!=-1){ cols = parseInt(data.print.substr(cols_p+3, 2)); data.print = data.print.substr(0, cols_p) + data.print.substr(cols_p+6, data.print.length); }\n    \n    // process styling\n    data.print = processStyling(data.print, cols);\n  \n    // if(data.debug) { console.log(data.print); }\n    console.log(data.print);\n\n    let printers = templates[0][\"user_print\"];\n\n    data[\"user\"] = _this.state.user.id;\n    data[\"printers\"] = printers;\n    data[\"type\"] = \"qr\";\n\n    // return;\n\n    // send data\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: headers,\n        body: JSON.stringify({\n            query: {\n                print: {\n                    type:       'print',\n                    data:       data,\n                    sid:        spaceID(),\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success){\n\n            toast( __('Printing') );\n\n        }else{\n\n            parsePrintError(_this, response);\n\n            // parseApiError(response);\n        }\n    })\n    .catch(error => {\n\n        parseApiError(error);\n    });\n}\n\nexport const autoPrint = (_this) => {\n    \n    if(!_this.state.lastPrintTime) _this.state.lastPrintTime = Math.floor(Date.now() / 1000);\n\n    // process printing pending tasks\n    setInterval((_this) => { \n\n        if((Math.floor(Date.now() / 1000) - _this.state.lastPrintTime) > 7 && _this.state.printQueue.length > 0){\n\n            // console.log(\"pending printing\");\n            // console.log(_this.state.printQueue);\n\n            let _obj = _this.state.printQueue.shift();\n\n            printReceipt(_this, _obj._id, _obj.type, _obj.template);\n\n            _this.state.lastPrintTime = Math.floor(Date.now() / 1000);\n        }\n\n    }, 50, _this);\n\n    // find auto printing receipt\n    let templates = _this.state.settings['templates'].filter(template => { return template.auto_print_action == \"new\" && template.type == \"receipt\" && (template.user == \"\" || template.user == _this.state.user.id); });\n\n    // if no templates stop here\n    if(templates.length == 0) return false;\n\n    // iterate orders and match with templates\n    setInterval((_this) => {\n        \n        // get last order id\n        let last_print_id = localStorage.hasOwnProperty(\"last_print_id\") ? localStorage.getItem(\"last_print_id\") : 0;\n\n        // get orders pending printing \n        let orders = _this.state.orders.filter((o, i) => { return o.status == \"new\" && parseInt(_this.state.orders[i].id) > last_print_id });\n\n        // iterate through all templates\n        orders.reverse();\n        templates.forEach((template, t) => {\n\n            orders.forEach((o, i) => {\n\n                // console.log(template);\n\n                template.auto_print.forEach((p, a) => {\n\n                    let template_temp = {\n                        auto_print: [],\n                        auto_print_action: template.auto_print_action,\n                        template: template.template,\n                        type: template.type,\n                        user: template.user\n                    };\n\n                    template_temp.auto_print.push(p);\n\n                    _this.state.printQueue.push({id: o.id, _id: o._id, type: \"auto\", template: template_temp});\n                });\n                \n                if(o.id > last_print_id) last_print_id = o.id;\n            });\n        });\n\n        // mark all orders as printed\n        localStorage.setItem(\"last_print_id\", last_print_id);\n\n    }, 5000, _this);\n}\n\nexport const isPrintQREnabled = (_this) => {\n\n    // find QR template\n    let templates = _this.state.settings['templates'].filter(template => { return template.type == \"qr\" && (template.user == \"\" || template.user == _this.state.user.id); });\n\n    return templates.length > 0 ? true : false;\n}\n\nconst parsePrintError = (_this, response) => {\n\n    toast( __(response.reason) );\n\n    if(document.querySelector('.alert[data-id=\"print-api\"')){ document.querySelector('.alert[data-id=\"print-api\"').remove(); }\n\n    let messages = [{ _id: \"print-api\", color: \"danger\", msg: __html(response.reason) }];\n\n    renderNotifications(_this, messages);\n\n    try{\n        if(isMobile()) window.navigator.vibrate(200);\n    }catch{\n\n    }\n}","import { headers, showLoader, hideLoader, onClick, onKeyUp, simulateClick, parseApiError, spaceID, __html } from '@kenzap/k-cloud';\nimport { priceFormat, getPageNumber, makeNumber, parseVariations, timeConverterAgo, escape, onlyNumbers, unescape } from \"../_/_helpers.js\"\nimport { printQR } from \"../_/_print.js\"\n\nexport const tables = {\n\n    _this: null,\n    firstLoad: true,\n    state: { orderSingle: null },\n    render: (_this, e) => {\n\n        if(_this.state.settings.tables != \"1\") return;\n\n        // permanent table list defined under ecommerce settings\n        let s = '', table_list = _this.state.settings.table_list.trim().split('\\n');\n        let html = `<div id=\"table_list\" class=\"row row-cols-1 row-cols-lg-5 row-cols-md-3 row-cols-sm-2 g-3 mb-3\">`;\n\n        // temporary user defined tables \n        _this.state.orders.forEach(o => {\n\n            if(o.table) if(o.table.length>0) if(!table_list.includes(o.table) && o.table != \"0\") table_list.push(o.table);\n\n            if(o.takeaway && (o.status == \"new\" || o.status == \"processing\")){ if(!table_list.includes(__(\"Take away\") + \" #\" + o.id) && o.takeaway != \"dine-in\") table_list.push(__(\"Take away\") + \" #\" + o.id); }\n        });\n\n        // generate table list\n        table_list.forEach((el, i) => {\n\n            html += tables.structTableCard(_this, i, el, { orders: _this.state.orders, meta: _this.state.meta }); \n        });\n\n        html += '</div>';\n\n        if(document.querySelector('#table_list')) document.querySelector('#table_list').remove();\n        \n        document.querySelector('#orders-after-header').insertAdjacentHTML(\"beforeend\", html);\n\n        // print custom QR code\n        if(tables.firstLoad){\n         \n            tables.firstLoad = false; onClick('.print-qr', (e) => {\n        \n                e.preventDefault();\n\n                printQR(_this, e.currentTarget.dataset.qrnum);\n            });\n        }\n    },\n    renderField: (_this, a, item, x) => {\n\n        let html = '';\n        switch(a.e){\n            \n            case 'price': \n\n                html = `<div data-id=\"${x}\" data-type=\"key-number\" class=\"${ a.classList ? a.classList : \"\" } ms-2 d-inline-block\" ${ a.editable ? 'contenteditable=\"true\"':'' } data-id=\"${x}\" data-value=\"${ item }\">${ priceFormat(_this, item) }</div>`;\n                return html;\n            case 'text': \n\n                html = `<div data-id=\"${x}\" data-type=\"text\" class=\"${ a.classList ? a.classList : \"\" } ms-2 d-inline-block\" ${ a.editable ? 'contenteditable=\"true\"':'' } data-id=\"${x}\">${ item }</div>`;\n                return html;\n            case 'textarea': return '<textarea type=\"text\" rows=\"4\" class=\"form-control order-form pv \" data-type=\"textarea\" id=\"'+x+'\" value=\"'+item+'\">'+item+'</textarea>';\n            case 'items': \n\n                // parse product items\n                html = `<table class=\"items order-form\" data-type=\"items\"><tr><th><div class=\"me-1 me-sm-3\">${ __('Product') }</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${ __('Qty') }</div></th><th class=\"tp\"><div class=\"me-1 me-sm-3\">${ __('Total') }</div></th><th></th></tr>`;\n                for(let x in item){ html += preview.structOrderItemTable(_this, x, item, false); }\n\n                // add row for manual product entry\n                html += `<tr class=\"new-item-row\">\n                            <td>\n                                <div class=\"me-1 me-sm-3 mt-2\">\n                                    <input type=\"text\" value=\"\" autocomplete=\"off\" placeholder=\"${ __('Search..') }\" class=\"form-control edit-item\" data-id=\"\" data-index=\"\" list=\"item-suggestions\">\n                                    <span class=\"select-list-group__toggle\"> </span>\n                                    <ul class=\"s-list my-1 shadow-sm\" data-toggle=\"false\"></ul>\n                                    <datalist id=\"item-suggestions\" class=\"fs-12 d-none\"></datalist>\n                                </div>\n                            </td>\n                            <td class=\"qty\">\n                                <div class=\"me-1 me-sm-3 mt-2\">\n                                    <input type=\"text\" value=\"\" autocomplete=\"off\" class=\"form-control text-right edit-qty\">\n                                </div>\n                            </td>\n                            <td class=\"tp\">\n                                <div class=\"me-1 me-sm-3 mt-2\">\n                                    <input type=\"text\" value=\"\" autocomplete=\"off\" class=\"form-control edit-tp\">\n                                </div>\n                            </td>\n                            <td class=\"align-middle text-center pt-2\"> \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 16 16\" width=\"24\" height=\"24\" class=\"bi bi-plus-circle text-success align-middle add-item\"><path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path><path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"></path></svg>\n                            </td>\n                        </tr>`;\n\n                html += `</table><div class=\"item-vars-input mt-3\"> </div>`;\n\n                return html;\n            default: \n            \n                if(x == '_id') item = item.substr(0, 6);\n\n                html = `<div data-id=\"${x}\" data-type=\"text\" class=\"${ a.classList ? a.classList : \"\" } ms-2 d-inline-block\" ${ a.editable ? 'contenteditable=\"true\"':'' } data-id=\"${x}\">${ item }</div>`;\n                return html;\n        }\n  },\n \n  structTableCard: (_this, i, el, response) => {\n\n    let ii = 0;\n    let order = {};\n    let id_last = 0;\n    let title = __(\"Table %1$\", el);\n    \n    response.orders.forEach((o, index) => { \n\n        // take away\n        if(el.includes(\"#\")){\n            if(o.id == el.split(\"#\")[1]){ ii = index; order = o; id_last = o.id; title = __(\"Take away %1$\", o.id); }\n        }\n\n        // dine in table\n        if(o.table == el+'' && o.id > id_last){ ii = index; order = o; id_last = o.id; title = __(\"Table %1$\", el); }\n    });\n\n    order = order ? order : {};\n    order['id'] = order.id ? order.id : \"\";\n    order['_id'] = order._id ? order._id : \"\";\n    order['created'] = order.created ? order.created : \"\";\n\n    let classes = \"\";\n    let _id_header = order._id ? order._id : \"\", _id_body = _id_header;\n\n    switch(order['status']){\n\n        case 'new': classes = \"text-dark bg-warning\";  break;\n        case 'paid': classes = \"text-white bg-primary\"; break;\n        case 'processing': classes = \"text-white bg-primary\"; break;\n        case 'completed': classes = \"text-white bg-secondary\"; _id_body = \"\"; break;\n        case 'failed': classes = \"text-white bg-danger\"; _id_body = \"\"; break;\n        case 'refunded': classes = \"text-white bg-danger\"; _id_body = \"\"; break;\n        default: classes = \"text-white bg-secondary\"; _id_body = \"\"; break;\n    }\n\n    return `\n    <div class=\"col\">\n        <div class=\"card ${ classes } mb-2 \" style=\"max-width: 18rem;\">\n            <div class=\"card-header view-order po ${ _id_header && order['status'] == 'completed' ? \"bg-success\" : \"\" }\" data-id=\"${ _id_header }\" data-table=\"${ el }\" ${ _id_header ? 'data-index=\"' + ii + '\"' : '' }\">${ order.id ? __html(\"last order #%1$\", order.id) : \"&nbsp;\" }</div>\n            <div class=\"card-body d-flex align-items-center justify-content-center view-order po\" style=\"min-height:140px;\" data-id=\"${ _id_body }\" data-table=\"${ el }\" ${ _id_body ? 'data-index=\"' + ii + '\"' : '' }\">\n                <h5 class=\"card-title\">${ __html(title) }</h5>\n            </div>\n            <div class=\"card-footer d-flex justify-content-between\">\n                ${ order['created'] ? timeConverterAgo(__, response.meta.time, order['created']) : '&nbsp;' }\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-qr-code-scan print-qr po ${ _this.state.settings.qr_print ? \"\" : \"d-none\" } \" viewBox=\"0 0 16 16\" data-qrnum=\"${ el }\">\n                    <path d=\"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z\"></path>\n                    <path d=\"M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z\"></path>\n                    <path d=\"M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z\"></path>\n                    <path d=\"M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z\"></path>\n                    <path d=\"M12 9h2V8h-2v1Z\"></path>\n                </svg>\n            </div>\n        </div>\n    </div>`;\n  }\n}","import { headers, showLoader, hideLoader, onClick, onKeyUp, simulateClick, parseApiError, spaceID, __html, onChange } from '@kenzap/k-cloud';\nimport { priceFormat, getPageNumber, makeNumber, parseVariations, escape, onlyNumbers, getProductsById, unescape } from \"../_/_helpers.js\"\n\nexport const preview = {\n\n    _this: null,\n    state: { orderSingle: null },\n    renderOrder: (_this, e) => {\n\n        _this.state.changes = false;\n        _this.modal = document.querySelector(\".order-modal\");\n        _this.modalCont = new bootstrap.Modal(_this.modal);\n        _this.modalOpen = true;\n        _this.rowMark = -1;\n        let i = e.currentTarget.dataset.index;\n\n        // to properly handle back button on mobiles\n        history.pushState({ pageID: 'orders' }, 'Orders', window.location.pathname + window.location.search + \"#editing\");\n\n        _this.modal.addEventListener('hide.bs.modal', function (e) {\n\n            if (window.location.href.indexOf(\"#editing\") == -1) return;\n\n            history.pushState({ pageID: 'orders' }, 'Orders', window.location.pathname + window.location.search);\n        });\n\n        // is new order ?\n        if (typeof (i) === 'undefined') {\n\n            _this.state.orderSingle = {\n                _id: \"new\",\n                created: 1649831099,\n                from: \"dine-in\",\n                id: \"\",\n                idd: \"\",\n                items: [],\n                kid: \"0\",\n                name: \"dine-in\",\n                note: \"\",\n                sid: spaceID,\n                status: \"new\",\n                price: { 'discount_percent': 0 },\n                step: 1,\n                table: e.currentTarget.dataset.table ? e.currentTarget.dataset.table : \"-\",\n                total: 0,\n                updated: 1649833845\n            }\n\n            // auto add product\n            if(_this.state.orderSingle._id == 'new' && _this.state.settings.add_products == \"1\"){\n\n                let products = _this.state.settings.add_products_list.trim().split('\\n');\n\n                getProductsById(_this, products, preview.renderOrderUI);\n\n            }else{\n\n                preview.renderOrderUI(_this);\n            }\n\n        } else {\n\n            _this.state.orderSingle = _this.state.orders[i];\n\n            preview.renderOrderUI(_this);\n        }\n        \n        console.log(_this.state.orderSingle);\n\n        // prevent modal closure if user clicks on white space areas\n        // if(modal) modal.addEventListener('click', (e)=>{ e.preventDefault(); return false; });\n\n        // print listener\n        onClick('.print-order', (e) => {\n\n            e.preventDefault();\n\n            _this.state.printRequest = e.currentTarget.dataset.id;\n\n            simulateClick(_this.modal.querySelector(\".btn-confirm\"));\n        });\n\n        // save changes to orders\n        _this.listeners.modalSuccessBtnFunc = (e) => {\n\n            e.preventDefault();\n\n            _this.updateOrder(i, _this.state.orderSingle._id);\n        }\n\n        onClick('.st-modal li a', (e) => {\n\n            e.preventDefault();\n\n            preview._this.state.changes = true;\n\n            let osm = document.querySelector('#order-status-modal');\n            osm.innerHTML = _this.state.statuses[e.currentTarget.dataset.key].text;\n            osm.dataset.value = e.currentTarget.dataset.key;\n            let list = [];\n\n            // clear previous classes\n            Object.keys(_this.state.statuses).forEach((key) => {\n                list = _this.state.statuses[key].class.split(' ');\n                list.forEach((key) => {\n                    osm.classList.remove(key);\n                });\n            });\n\n            // add new classes\n            list = _this.state.statuses[e.currentTarget.dataset.key].class.split(' ');\n            list.forEach((key) => {\n\n                osm.classList.add(key);\n            });\n        });\n    },\n    renderOrderUI: (_this) => {\n\n        preview.state.orderSingle = _this.state.orderSingle;\n\n        // console.log(preview.state.orderSingle);\n        let items = '';\n\n        // get order status\n        Object.keys(_this.state.statuses).forEach((key, index) => { items += `<li><a class=\"dppi dropdown-item\" data-key=\"${key}\" href=\"#\">${_this.state.statuses[key].text}</a></li>` })\n        let statusSelect = `\n        <div class=\"d-flex justify-content-between\">\n            <div class=\"st-modal st-opts mb-3 me-1 me-sm-3 dropdown\">\n                <a class=\"btn btn-sm ${_this.state.statuses[_this.state.orderSingle['status']].class} dropdown-toggle order-form\" data-id=\"status\" data-type=\"key\" data-value=\"${_this.state.orderSingle['status']}\" href=\"#\" role=\"button\" id=\"order-status-modal\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" >\n                    ${_this.state.statuses[_this.state.orderSingle['status']].text}\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"order-status-modal\">\n                    ${items}\n                </ul>\n            </div>\n            <a href=\"#\" data-index=\"0\" class=\"print-order text-success\" data-id=${preview.state.orderSingle._id}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"currentColor\" class=\"bi bi-printer\" viewBox=\"0 0 16 16\">\n                    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"></path>\n                    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"></path>\n                </svg>\n            </a>\n        </div>\n        `;\n\n  \n        // kenzapprint://kenzapprint.app?data=%7B%22print%22%3A%22%5BC%5D%3Cu%3E%3Cfont%20size%3D%5C%22big%5C%22%3EORDER%7B%7Border_id_short%7D%7D%3C%2Ffont%3E%3C%2Fu%3E%5Cn%5BC%5DFu%20Zhen%20Seafood%5Cn%5BC%5D%3Cu%20type%3Ddouble%3E%7B%7Bdate_time%7D%7D%3C%2Fu%3E%5Cn%5BC%5D%5Cn%5BC%5D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%5C%22%20%5Cn%5BL%5D%5Cn%5BL%5D%3Cb%3EBEAUTIFUL%20SHIRT%3C%2Fb%3E%5BR%5D9.99%E2%82%AC%5Cn%5BL%5D%20%20%2B%20Size%20%3A%20S%5Cn%5BL%5D%5Cn%5BL%5D%3Cb%3EAWESOME%20HAT%3C%2Fb%3E%5BR%5D24.99%E2%82%AC%5Cn%5BL%5D%20%20%2B%20Size%20%3A%2057%2F58%5Cn%5BL%5D%5Cn%5BC%5D--------------------------------%5Cn%5BR%5DTOTAL%20PRICE%20%3A%5BR%5D34.98%E2%82%AC%5Cn%5BR%5DTAX%20%3A%5BR%5D4.23%E2%82%AC%22%7D\" data-id=\"72b42ad9111e7767aa68174227ba20b5e11d26e4\n\n        // structure modal\n        _this.modal.querySelector(\".modal-dialog\").classList.add('modal-fullscreen');\n        _this.modal.querySelector(\".modal-header .modal-title\").innerHTML = isNaN(_this.state.orderSingle['from']) ? _this.state.orderSingle['from'] : '#' + _this.state.orderSingle['from'];\n        _this.modal.querySelector(\".modal-footer .btn-confirm\").innerHTML = _this.state.orderSingle._id == \"new\" ? __('Create') : __('Update');\n        _this.modal.querySelector(\".btn-confirm\").dataset.loading = false;\n        _this.modal.querySelector(\".modal-footer .btn-secondary\").innerHTML = __('Close');\n\n        let html = statusSelect;\n\n        let fields = { id: { l: __(\"ID\"), classList: \"order-form\" }, from: { l: __(\"From\"), e: \"text\", editable: true, classList: \"order-form\" }, table: { l: __(\"Table\"), e: \"text\", editable: true, classList: \"order-form\" }, items: { l: \"\", e: \"items\" }, fname: { l: __(\"Name\"), e: \"text\" }, lname: { l: __(\"Surname\"), e: \"text\" }, bios: { l: __(\"Bios\"), e: \"textarea\" }, avatar: { l: __(\"Avatar\"), e: \"text\" }, email: { l: __(\"Email\"), e: \"text\" }, countryr: { l: __(\"Country\"), e: \"text\" }, cityr: { l: __(\"City\"), e: \"text\" }, phone: { l: __(\"Phone\"), e: \"text\" }, addr1: { l: __(\"Address 1\"), e: \"textarea\" }, addr2: { l: __(\"Address 2\"), e: \"textarea\" }, post: { l: __(\"Post\"), e: \"text\" }, state: { l: __(\"State\"), e: \"text\" }, c1: { l: __(\"Whatsapp\"), e: \"text\" }, c2: { l: __(\"Messenger\"), e: \"text\" }, c3: { l: __(\"Line\"), e: \"text\" }, c4: { l: __(\"Email\"), e: \"text\" }, c5: { l: __(\"Telegram\"), e: \"text\" }, email: { l: __(\"Email\"), e: \"text\" }, bio: { l: __(\"Bio\"), e: \"text\" }, y1: { l: __(\"Name\"), e: \"text\" }, y2: { l: __(\"IBAN\"), e: \"text\" }, y3: { l: __(\"SWIFT\"), e: \"text\" }, y4: { l: __(\"Bank\"), e: \"text\" }, y5: { l: __(\"Bank city\"), e: \"text\" }, y6: { l: __(\"Bank country\"), e: \"text\" }, note: { l: __(\"Note\"), e: \"textarea\" }, s3: { l: __(\"Link 3\"), e: \"text\" }, company: { l: __(\"Company\"), e: \"text\" }, vat: { l: __(\"Tax ID\"), e: \"text\" }, grade: { l: __(\"Grade\"), e: \"text\" }, kenzap_ida: { l: __(\"Kenzap IDA\"), e: \"text\" } };\n\n        // console.log(Object.keys(fields));\n\n        // order table details\n        for (let x in fields) {\n\n            if (_this.state.orderSingle[x] === undefined) continue;\n\n            let val = _this.state.orderSingle[x];\n            let field = fields[x].l;\n\n            html += `\n            <div class=\"mb-3 mt-3 order-row keyx-${x} ${x == '_id' || x == 'from' ? \"elipsized\" : \"\"}\"  >\n                <b>${field}</b>${preview.renderField(_this, fields[x], val, x)}\n            </div>`;\n        }\n       \n        // totals\n        setTimeout(() => { preview.refreshTotals(); }, 100);\n\n        html += '';\n\n        // add live delivery if present\n        console.log(_this.state.orderSingle.delivery);\n        if(_this.state.orderSingle.delivery) if(_this.state.orderSingle.delivery.shareLink){\n\n            html += `\n            <div class=\"mb-3 mt-3 order-row keyx-delivery-map\"  >                \n                <iframe src=\"${_this.state.orderSingle.delivery.shareLink}\" style=\"width: 100%;min-height: 500px;\"></iframe>\n            </div>`;\n        }\n        \n        _this.modal.querySelector(\".modal-body\").innerHTML = '<div class=\"modal-body-cont\">' + html + '</div>';\n        \n        _this.modalCont.show();\n\n        // table order item listners (remove, add note, adjust variations, etc)\n        preview.tableOrderItemListeners();\n\n        // order item product edit listener\n        preview.suggestOrderItem(_this);\n\n        // hide suggestion list if still present\n        _this.modal.querySelector(\".edit-item\").addEventListener('blur', (e) => { setTimeout(() => { document.querySelector('.s-list').dataset.toggle = false; }, 500); });\n\n        // add product item to order table\n        preview.addOrderItem(_this);\n\n        // calculate totals for new orders only\n        if (_this.state.orderSingle._id == 'new') preview.refreshTotals();\n\n        // focus on item input fields\n        if (_this.state.orderSingle._id == 'new') setTimeout(() => { document.querySelector('.edit-item').focus(); }, 300);\n    },\n    newOrder: (_this) => {\n\n        preview._this = _this;\n        onClick('.add-order', (e) => { preview.renderOrder(_this, e); });\n    },\n    viewOrder: (_this) => {\n\n        preview._this = _this;\n        onClick('.view-order', (e) => { preview.renderOrder(_this, e); });\n    },\n    renderField: (_this, a, item, x) => {\n\n        let html = '';\n        switch (a.e) {\n\n            // case 'text': return '<input type=\"text\" class=\"form-control pv\" id=\"'+x+'\" value=\"'+b+'\">';\n\n            case 'price':\n\n                html = `<div data-id=\"${x}\" data-type=\"key-number\" class=\"${a.classList ? a.classList : \"\"} ms-2 d-inline-block\" ${a.editable ? 'contenteditable=\"true\"' : ''} data-id=\"${x}\" data-value=\"${item}\">${priceFormat(_this, item)}</div>`;\n                return html;\n            case 'text':\n\n                html = `<div data-id=\"${x}\" data-type=\"text\" class=\"${a.classList ? a.classList : \"\"} ms-2 d-inline-block p-1\" ${a.editable ? 'contenteditable=\"true\"' : ''} data-id=\"${x}\" style=\"min-width:50px;\">${item}</div>`;\n                return html;\n            case 'textarea': return '<textarea type=\"text\" rows=\"4\" class=\"form-control order-form pv \" data-type=\"textarea\" id=\"' + x + '\" value=\"' + item + '\">' + item + '</textarea>';\n            case 'items':\n\n                // parse product items\n                html = `<table class=\"items order-form\" data-type=\"items\"><tr><th><div class=\"me-1 me-sm-3\">${__('Product')}</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${__('Qty')}</div></th><th class=\"tp\"><div class=\"me-1 me-sm-3\">${__('Total')}</div></th><th></th></tr>`;\n                for (let x in item) { html += preview.structOrderItemTable(_this, x, item, false); }\n\n                // add row for manual product entry\n                html += `<tr class=\"new-item-row\">\n                            <td>\n                                <div class=\"me-1 me-sm-3 mt-2\">\n                                    <input type=\"text\" value=\"\" autocomplete=\"off\" placeholder=\"${__('Search..')}\" class=\"form-control edit-item\" data-id=\"\" data-cats=\"\" data-index=\"\" list=\"item-suggestions\">\n                                    <span class=\"select-list-group__toggle\"> </span>\n                                    <ul class=\"s-list my-1 shadow-sm\" data-toggle=\"false\"></ul>\n                                    <datalist id=\"item-suggestions\" class=\"fs-12 d-none\"></datalist>\n                                </div>\n                            </td>\n                            <td class=\"qty\">\n                                <div class=\"me-1 me-sm-3 mt-2\">\n                                    <input type=\"text\" value=\"\" autocomplete=\"off\" class=\"form-control text-right edit-qty\">\n                                </div>\n                            </td>\n                            <td class=\"tp\">\n                                <div class=\"me-1 me-sm-3 mt-2 d-flex\">\n                                    <select class=\"form-select form-select edit-discount me-2 d-none\" data-type=\"select\" aria-label=\"Default payment method\">\n                                        <option value=\"\" selected=\"\">%</option>\n                                        <option value=\"eNets\">eNets</option>\n                                        <option value=\"PayNow\">PayNow</option>\n                                    </select>\n                                    <input type=\"text\" value=\"\" autocomplete=\"off\" class=\"form-control edit-tp\">\n                                </div>\n                            </td>\n                            <td class=\"align-middle text-center pt-2\"> \n                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 16 16\" width=\"24\" height=\"24\" class=\"bi bi-plus-circle text-success align-middle add-item\"><path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path><path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"></path></svg>\n                            </td>\n                        </tr>`;\n\n                html += `</table><div class=\"item-vars-input mt-3\"> </div>`;\n\n                return html;\n            default:\n\n                if (x == '_id') item = item.substr(0, 6);\n\n                html = `<div data-id=\"${x}\" data-type=\"text\" class=\"${a.classList ? a.classList : \"\"} ms-2 d-inline-block\" ${a.editable ? 'contenteditable=\"true\"' : ''} data-id=\"${x}\">${item}</div>`;\n                return html;\n        }\n    },\n    itemOptions: (item) => {\n\n        let options = `\n\n        <div class=\"dropdown text-center\">\n            <a  href=\"#\" role=\"button\" id=\"order-item-options\" data-id=\"status\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-three-dots-vertical order-item-options\" viewBox=\"0 0 16 16\"><path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/></svg>\n            </a>\n            <ul class=\"dropdown-menu\" aria-labelledby=\"order-item-options\" >\n                <li><a class=\"oio dropdown-item edit-item-note\" data-key=\"edit-item-note\" href=\"#\">${__('Add note')}</a></li>\n                <li><a class=\"oio dropdown-item d-none\" data-key=\"edit-item-variation\" href=\"#\">${__('Add variation')}</a></li>\n                <li><a class=\"oio dropdown-ite d-none\" data-key=\"edit-item-price\" href=\"#\">${__('Adjust price')}</a></li>\n                <li><a class=\"oio dropdown-item text-danger remove-item\" data-key=\"remove-item\" href=\"#\">${__('Remove')}</a></li>\n            </ul>\n        </div>\n    `;\n\n        return options;\n    },\n    structOrderItemTable: (_this, x, item, isNew = false, options = true) => {\n\n        // console.log(item[x].variations);\n\n        if (_this.created != item[x].created) { _this.rowMark += 1; }\n\n        _this.created = item[x].created;\n        item[x].cats = item[x].cats ? item[x].cats : [];\n\n        // parse variations\n        let vars = '', output = ''\n        for (let v in item[x].variations) {\n\n            // parse variation list\n            let list = ''; for (let l in item[x].variations[v].list) list += __html(item[x].variations[v].list[l].title) + \" \";\n            vars += '<div><b class=\"me-1\">' + __html(item[x].variations[v].title) + \"</b> <span>\" + list + \"</span></div> \";\n\n            // meal note\n            if (item[x].variations[v].note !== undefined && item[x].variations[v].note.length > 0) vars += \"<div><b>\" + __('Note') + \"</b> \" + item[x].variations[v].note + \"</div> \";\n        }\n\n        let item_discount = \"\";\n        if(item[x].discount_percent) item_discount = \" (-\" + item[x].discount_percent + \"%)\";\n        if(item[x].discount_value) item_discount = \" (-\" + priceFormat(_this, item[x].discount_value) + \")\";\n\n        // individual discount\n        if(!item[x].discounts) item[x].discounts = [];\n        item[x].discounts.forEach(obj => {\n\n           if(obj.type == \"never\") item[x].discount_type = \"never\";\n        });\n \n        output += '<tr class=\"order-item-row-active row-mark' + _this.rowMark + '\" data-created=\"' + item[x].created + '\" data-x=\"' + x + '\" data-id=\"' + item[x].id + '\" data-vars=\"' + escape(JSON.stringify(item[x].variations)) + '\" data-cats=\"' + escape(JSON.stringify(item[x].cats)) + '\" data-discounts=\"' + escape(JSON.stringify(item[x].discounts)) + '\">';\n        output += '<td><div class=\"item-title\" contenteditable=\"false\" data-value=\"' + item[x].title + '\" data-sdesc=\"' + (item[x].sdesc ? item[x].sdesc : \"\") + '\">' + __html(item[x].title) + '</div><div class=\"item-note text-muted mb-1 ' + ((item[x].note.length == 0 || item[x].note == '<br>') && !isNew ? \"d-none\" : \"\") + '\" contenteditable=\"true\" data-value=\"' + item[x].note + '\">' + item[x].note + '</div><div class=\"vars border-primary item-variations my-1 ps-2 text-secondary\" data-value=\"\">' + vars + '</div></td><td class=\"qty\"><div class=\"me-1 me-sm-3 item-qty\" data-value=\"' + item[x].qty + '\">' + item[x].qty + '</div></td><td class=\"tp\"><div class=\"me-1 me-sm-3 item-total\" data-price=\"' + item[x].price + '\" data-value=\"' + item[x].total + '\" data-discount_type=\"' + (item[x].discount_type ? item[x].discount_type : \"\") + '\" data-discount_percent=\"' + (item[x].discount_percent ? item[x].discount_percent : \"\") + '\" data-discount_value=\"' + (item[x].discount_value ? item[x].discount_value : \"\") + '\">' + priceFormat(_this, item[x].total) + item_discount + '</div><td class=\"' + (options ? '' : 'd-none') + '\">' + preview.itemOptions(item[x]) + '</td></td>';\n        output += '</tr>';\n\n        return output;\n    },\n    suggestOrderItem: (_this) => {\n\n        onKeyUp('.edit-item', (e) => {\n\n            // disable some key for better UX\n            var key = e.keyCode || e.charCode;\n            if (key >= 34 && key <= 45) { return; }\n\n            let s = e.currentTarget.value;\n\n            if (s.length == 1) document.querySelector('.modal-body').scrollTo({\n                top: (document.querySelector('.edit-item').getBoundingClientRect().top - document.querySelector('.modal-body-cont').getBoundingClientRect().top) - 20,\n                behavior: \"smooth\"\n            });\n\n            // empty search string\n            if (s.length == 0 || e.currentTarget !== document.activeElement) { document.querySelector('.s-list').dataset.toggle = false; return; }\n\n            // do API query\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: headers,\n                body: JSON.stringify({\n                    query: {\n                        products: {\n                            type: 'find',\n                            key: 'ecommerce-product',\n                            fields: ['_id', 'id', 'img', 'status', 'cats', 'variations', 'price', 'discounts', 'title'],\n                            limit: _this.state.slist,\n                            // only suggesting products with status public\n                            term: [\n                                {\n                                    type: \"string\",\n                                    field: \"status\",\n                                    relation: \"=\",\n                                    value: \"1\",\n                                }\n                            ],\n                            offset: s.length > 0 ? 0 : getPageNumber() * _this.state.slist - _this.state.slist,       // automatically calculate the offset of table pagination\n                            search: {                                                                                 // if s is empty search query is ignored\n                                field: 'title',\n                                s: s\n                            },\n                            sortby: {\n                                field: 'title',\n                                order: 'DESC'\n                            },\n                        }\n                    }\n                })\n            })\n                .then(response => response.json())\n                .then(response => {\n\n                    // hide UI loader\n                    hideLoader();\n\n                    // console.log(response);\n\n                    if (response.success) {\n\n                        _this.state.productsSuggestions = response.products;\n\n                        let options = ``;\n                        response.products.forEach((product, index) => {\n\n                            // options += `<option class=\"pso\" data-id=\"${ product._id }\" data-title=\"${ product.title }\" data-index=\"${ index }\" value=\"${ product.title }\">${ product.title }</option>`; \n                            options += `<li class=\"s-list-item py-1\" data-id=\"${product._id}\" data-title=\"${product.title}\" data-index=\"${index}\"  data-display=\"true\" data-highlight=\"false\">${product.title}</li>`;\n                        });\n                        document.querySelector('.s-list').innerHTML = options;\n                        document.querySelector('.s-list').dataset.toggle = true;\n\n                        // suggestion click listener \n                        onClick('.s-list-item', (e) => {\n\n                            let index = e.currentTarget.dataset.index;\n\n                            console.log(_this.state.productsSuggestions[index]);\n                            // console.log(_this.state.productsSuggestions[index]);\n\n                            document.querySelector('.edit-item').dataset.index = index;\n                            document.querySelector('.edit-item').dataset.id = _this.state.productsSuggestions[index]._id;\n                            document.querySelector('.edit-item').dataset.cats = JSON.stringify(_this.state.productsSuggestions[index].cats);\n                            document.querySelector('.edit-item').value = _this.state.productsSuggestions[index].title;\n                            document.querySelector('.edit-item').dataset.discounts = JSON.stringify(_this.state.productsSuggestions[index].discounts);\n                            document.querySelector('.edit-qty').value = 1;\n                            document.querySelector('.edit-qty').dataset.price = _this.state.productsSuggestions[index].price;\n                            document.querySelector('.edit-tp').value = _this.state.productsSuggestions[index].price;\n                            document.querySelector('.edit-tp').dataset.price = _this.state.productsSuggestions[index].price;\n                            document.querySelector('.s-list').dataset.toggle = false;\n                            document.querySelector('.edit-discount').classList.add('d-none');\n\n                            if (_this.state.productsSuggestions[index].discounts) if (_this.state.productsSuggestions[index].discounts.length > 0) {\n\n                                let discount_options = '<option value=\"\">%</option>';\n                                _this.state.productsSuggestions[index].discounts.forEach(discount => {\n                                    if (discount.availability == \"admin\" && discount.type == \"percent\") {\n\n                                        discount_options += '<option data-type=\"percent\" value=\"' + discount.percent + '\">-' + discount.percent + '%</option>';\n                                        document.querySelector('.edit-discount').classList.remove('d-none');\n                                    }\n                                    if (discount.availability == \"admin\" && discount.type == \"value\") {\n\n                                        discount_options += '<option data-type=\"value\" value=\"' + discount.value + '\">-' + priceFormat(preview._this, discount.value) + '</option>';\n                                        document.querySelector('.edit-discount').classList.remove('d-none');\n                                    }\n                                    if (discount.type == \"never\") {\n\n                                        \n                                    }\n                                });\n\n                                document.querySelector('.edit-discount').innerHTML = discount_options;\n\n                                onChange('.edit-discount', e => {\n\n                                    setTimeout(() => { calcItemTotal(); }, 300);\n                                });\n                            }\n\n                            let calcItemTotal = () => {\n\n                                let discount_type = document.querySelector('.edit-discount').options[document.querySelector('.edit-discount').selectedIndex].dataset.type;\n                                let total = parseFloat(document.querySelector('.edit-qty').value) * parseFloat(document.querySelector('.edit-qty').dataset.price);\n                                if (isNaN(total)) {\n                                    total = \"\";\n                                } else {\n\n                                    if (discount_type == \"percent\") {\n                                        total = total - (total * parseInt(document.querySelector('.edit-discount').value) / 100);\n                                    }\n\n                                    if (discount_type == \"value\") {\n                                        total = total - parseFloat(document.querySelector('.edit-discount').value);\n                                    }\n                                }\n                                document.querySelector('.edit-tp').value = total;\n                            }\n\n                            // auto update price when quantity is changed\n                            document.querySelector('.edit-qty').addEventListener('keypress', (e) => {\n\n                                // console.log(e.which);\n                                if (e.which != 8 && isNaN(String.fromCharCode(e.which))) {\n\n                                    e.preventDefault(); // stop character from entering input\n                                    return false;\n                                }\n\n                            });\n\n                            document.querySelector('.edit-qty').addEventListener('keydown', (e) => {\n\n                                // console.log('keydown');\n                                setTimeout(() => { calcItemTotal(); }, 300);\n\n                            });\n\n                            // price can be float number only\n                            document.querySelector('.edit-tp').addEventListener('keypress', (e) => {\n\n                                // console.log(e.which);\n                                if (e.which != 8 && e.which != 46 && isNaN(String.fromCharCode(e.which))) {\n\n                                    e.preventDefault(); // stop character from entering input\n                                    return false;\n                                }\n                            });\n\n                            // focus on quantity field\n                            document.querySelector('.edit-qty').focus();\n                            document.querySelector('.edit-qty').select();\n\n                            // parse selected product variations\n                            // console.log('parseVariations');\n                            document.querySelector('.item-vars-input').innerHTML = parseVariations(_this, _this.state.productsSuggestions[index]);\n\n                        });\n\n                    } else {\n\n                        parseApiError(response);\n                    }\n                })\n                .catch(error => { console.log(error); parseApiError(error); });\n\n        });\n    },\n    tableOrderItemListeners: (e) => {\n\n        // make note field visible below the order item\n        onClick('.edit-item-note', (e) => {\n\n            e.preventDefault();\n\n            let noteEl = e.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('.item-note');\n            // console.log(noteEl);\n            noteEl.classList.remove('d-none');\n            noteEl.focus();\n\n            preview._this.state.changes = true;\n        });\n\n        // remove order item\n        onClick('.remove-item', (e) => {\n\n            e.preventDefault();\n\n            e.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.remove();\n\n            // if(preview._this.state.orderSingle._id == 'new') \n            preview.refreshTotals();\n\n            preview._this.state.changes = true;\n        });\n    },\n    refreshTotals: () => {\n\n        let html = ``, grand_total_temp = 0;\n\n        // calc grand_total_temp\n        for (let price of document.querySelectorAll('.item-total')){ grand_total_temp += makeNumber(price.dataset.value); };\n\n        // defaults\n        let price = { grand_total: 0, total: makeNumber(grand_total_temp), discount_percent: document.querySelector('.discount-percent-inp') ? parseInt(document.querySelector('.discount-percent-inp').value) : preview.state.orderSingle['price']['discount_percent'] ? preview.state.orderSingle['price']['discount_percent'] : 0, discount_value: document.querySelector('.discount-value-inp') ? parseFloat(document.querySelector('.discount-value-inp').value) : preview.state.orderSingle['price']['discount_value'] ? preview.state.orderSingle['price']['discount_value'] : 0, discount_total: 0, fee_total: 0, tax_total: 0, tax_percent: 0 };\n\n        // subtotal\n        let ordertotalsubtotal =\n            `<div class=\"mb-2 mt-2 order-total-subtotal order-row text-right elipsized keyx-total\">\n                <b>${__html('Subtotal')}</b><div class=\"ms-2 d-inline-block\" data-type=\"key-number\" >${priceFormat(preview._this, price.total)}</div>\n             </div>`;\n\n        html += ordertotalsubtotal;\n\n        // console.log(preview.state.orderSingle.price);\n\n        // payment method\n        if (preview._this.state.settings.custom_payment_method == \"1\") {\n\n            let options = '';\n            preview._this.state.settings.payment_methods.trim().split('\\n').forEach((el, i) => {\n\n                options += `<option value=\"${el}\" ${preview.state.orderSingle.price['payment_method'] == el ? 'selected' : ''} >${el}</option>`;\n            });\n\n            let ordertotalpaymentmethod =\n                `<div class=\"mb-2 mt-2 order-total-payment_method order-row text-right keyx-payment_method\">\n                    <b>${__('Payment')}</b>\n                    <div class=\"ms-2 d-inline-block\" >\n                        <select class=\"form-select form-select-sm payment-method-select\" data-type=\"select\" aria-label=\"Default payment method\">\n                            ${options}\n                        </select>\n                    </div>\n                </div>`;\n\n            html += ordertotalpaymentmethod;\n        }\n\n        if (document.querySelector('.order-total-subtotal')) { document.querySelector('.order-total-subtotal').outerHTML = ordertotalsubtotal; }\n\n        // discount\n        html += `<div class=\"mb-2 mt-2 order-total-discount d-flex align-items-center justify-content-end bd-highlight order-row keyx-total\">\n                <div class=\"dropdown\">\n                    <button class=\"btn border-0 dropdown-toggle fw-bold\" type=\"button\" id=\"discount-type\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                    ${parseFloat(price.discount_value) > 0 ? __('Discount by value') : __('Discount by %')}\n                    </button>\n                    <ul class=\"dropdown-menu discount-type-option\" aria-labelledby=\"discount-type\">\n                        <li><a class=\"dropdown-item\" data-type=\"percent\" href=\"#\">${__('Discount by %')}</a></li>\n                        <li><a class=\"dropdown-item\" data-type=\"value\" href=\"#\">${__('Discount by value')}</a></li>\n                    </ul>\n                </div>\n                <div class=\"ms-2 d-inline-block\" data-type=\"key-number\" >\n                    <input type=\"text\" autocomplete=\"off\" maxlength=\"3\" class=\"discount-percent-inp form-control form-control-sm text-end ${parseFloat(price.discount_value) > 0 ? 'd-none' : ''}\" value=\"${price.discount_percent}\" style=\"max-width:50px;\">\n                    <input type=\"text\" autocomplete=\"off\" class=\"discount-value-inp ${parseFloat(price.discount_value) > 0 ? '' : 'd-none'} form-control form-control-sm text-end\" value=\"${price.discount_value}\" style=\"max-width:120px;\">\n                </div>\n            </div>`;\n\n        // let discount_type\n        // if(document.querySelector(\"#discount-type\").dataset.type == 'percent'){\n        if (parseInt(price.discount_percent) > 0) {\n\n            // if (parseInt(price.discount_percent) > 0 && parseInt(price.discount_percent) <= 100) {\n\n            //     price.discount_total = makeNumber((parseInt(price.discount_percent)) * price.total) / 100;\n            //     grand_total_temp -= price.discount_total;\n            // }\n\n            price.discount_total = 0;\n            for (let item_price of document.querySelectorAll('.item-total')){\n\n                if(item_price.dataset.discount_type != 'never') price.discount_total += makeNumber((parseInt(price.discount_percent)) * makeNumber(item_price.dataset.value)) / 100;\n            }\n\n            grand_total_temp -= price.discount_total;\n        }\n\n        // }else if(document.querySelector(\"#discount-type\").dataset.type == 'value'){\n        if (parseFloat(price.discount_value) > 0) {\n\n            if (parseFloat(price.discount_value) > 0) {\n\n                grand_total_temp -= price.discount_value;\n            }\n        }\n\n        // service charge\n        if (preview._this.state.settings.fee_calc == \"1\") {\n\n            // price.fee_total = makeNumber((preview._this.state.settings.fee_percent)*price.total)/100;\n            price.fee_total = makeNumber((preview._this.state.settings.fee_percent) * grand_total_temp) / 100;\n            price.fee_percent = makeNumber(preview._this.state.settings.fee_percent);\n\n            let ordertotalfee =\n                `<div class=\"mb-2 mt-2 order-total-fee order-row text-right elipsized\">\n                    <b>${__(preview._this.state.settings.fee_display)}</b><div class=\"ms-2 d-inline-block\" data-type=\"key-number\" >${priceFormat(preview._this, price.fee_total)}</div>\n                 </div>`;\n\n            html += ordertotalfee;\n\n            if (document.querySelector('.order-total-fee')) { document.querySelector('.order-total-fee').outerHTML = ordertotalfee; }\n\n            // console.log(price.fee_total);\n\n            grand_total_temp += price.fee_total;\n        }\n\n        // tax \n        if (preview._this.state.settings.tax_calc == \"1\") {\n\n            // console.log(grand_total_temp + ' '  + parseFloat(preview._this.state.settings.tax_percent/100));\n            price.tax_total = makeNumber(((grand_total_temp) * parseFloat(preview._this.state.settings.tax_percent)) / 100);\n            price.tax_percent = makeNumber(preview._this.state.settings.tax_percent);\n            let ordertotaltax =\n                `<div class=\"mb-2 mt-2 order-total-tax order-row text-right elipsized\">\n                    <b>${preview._this.state.settings.tax_display}</b><div class=\"ms-2 d-inline-block\" data-type=\"key-number\" >${priceFormat(preview._this, price.tax_total)}</div>\n                 </div>`;\n\n            html += ordertotaltax;\n\n            if (document.querySelector('.order-total-tax')) { document.querySelector('.order-total-tax').outerHTML = ordertotaltax; }\n\n            grand_total_temp += price.tax_total;\n        }\n\n        // grand total\n        price.grand_total = makeNumber(grand_total_temp);\n        let ordertotalgrandtotal =\n            `<div class=\"mb-2 mt-2 order-total-grandtotal order-row text-right elipsized\">\n                <b>${__html('Grand Total')}</b><div class=\"ms-2 d-inline-block\" data-type=\"key-number\" >${priceFormat(preview._this, price.grand_total)}</div>\n             </div>`;\n\n        html += ordertotalgrandtotal;\n\n        if (document.querySelector('.order-total-grandtotal')) { document.querySelector('.order-total-grandtotal').outerHTML = ordertotalgrandtotal; }\n\n        // if(document.querySelector('.order-total')) document.querySelector('.order-total').remove(); \n        if (document.querySelector('.order-total')) {\n\n            document.querySelector('.order-total').dataset.price = encodeURIComponent(JSON.stringify(price));\n        } else {\n\n            // document.querySelector('.order-total').remove(); \n            document.querySelector('.modal-body-cont').insertAdjacentHTML(\"beforeend\", `<div class=\"mt-5 order-total order-form text-end\" data-type=\"price\" data-price=\"${encodeURIComponent(JSON.stringify(price))}\">${html}</div>`);\n\n            onClick('.discount-type-option li a', (e) => {\n\n                e.preventDefault();\n\n                document.querySelector('#discount-type').dataset.type = e.currentTarget.dataset.type;\n\n                console.log(e.currentTarget.dataset.type);\n\n                switch (e.currentTarget.dataset.type) {\n\n                    case 'value':\n\n                        document.querySelector('#discount-type').innerHTML = __html('Discount by value');\n                        document.querySelector('.discount-value-inp').style.maxWidth = '120px';\n                        document.querySelector('.discount-value-inp').classList.remove('d-none');\n                        document.querySelector('.discount-percent-inp').classList.add('d-none');\n                        document.querySelector('.discount-percent-inp').value = 0;\n                        break;\n                    case 'percent':\n\n                        document.querySelector('#discount-type').innerHTML = __html('Discount by %');\n                        document.querySelector('.discount-percent-inp').style.maxWidth = '70px';\n                        document.querySelector('.discount-value-inp').classList.add('d-none');\n                        document.querySelector('.discount-percent-inp').classList.remove('d-none');\n                        document.querySelector('.discount-value-inp').value = 0;\n                        break;\n                }\n\n                preview._this.state.changes = true;\n                \n                preview.refreshTotals();\n            });\n\n            // restrict discount percent input fields\n            onlyNumbers('.discount-percent-inp', [8]);\n            onKeyUp('.discount-percent-inp', (e) => {\n\n                if (parseInt(e.currentTarget.value) > 100 || parseInt(e.currentTarget.value) < 0) {\n\n                    // console.log(e.currentTarget.value)\n                    e.currentTarget.setCustomValidity(\"wrong percent value\");\n                } else {\n\n                    e.currentTarget.setCustomValidity(\"\");\n                }\n\n                // if(e.currentTarget.value=='') e.currentTarget.value = 0;\n\n                e.currentTarget.parentElement.classList.add(\"was-validated\");\n\n                e.currentTarget.style.maxWidth = '70px';\n\n                preview.refreshTotals();\n            });\n\n            // restrict discount value input fields\n            onlyNumbers('.discount-value-inp', [8, 46]);\n            onKeyUp('.discount-value-inp', (e) => {\n\n                if (parseInt(e.currentTarget.value) < 0 || parseInt(e.currentTarget.value) > price.total) {\n\n                    // console.log(e.currentTarget.value)\n                    e.currentTarget.setCustomValidity(\"wrong discount value\");\n                } else {\n\n                    e.currentTarget.setCustomValidity(\"\");\n                }\n\n                // if(e.currentTarget.value=='') e.currentTarget.value = 0;\n\n                e.currentTarget.parentElement.classList.add(\"was-validated\");\n\n                e.currentTarget.style.maxWidth = '120px';\n\n                preview._this.state.changes = true;\n\n                preview.refreshTotals();\n            });\n        }\n    },\n\n    /*\n    order JSON structure example\n    {\n        \"id\": \"pDqeWHGI1648563700945\",\n        \"idd\": \"ItqvUvlY1648563462357\",\n        \"kid\": \"7851\",\n        \"sid\": \"1000452\",\n        \"from\": \"1 - WP Asia\",\n        \"name\": \"WP Asia\",\n        \"customer\": {\n  \n  \n        },\n        \"note\": \"\",\n        \"note_vendor\": \"\",\n        \"step\": 1,\n        \"items\": [\n            {\n                \"id\": \"24adf24670cf977efe9386b781c9dc18124ac54b\",\n                \"qty\": 2,\n                \"note\": \"\",\n                \"type\": \"new\",\n                \"index\": \"27\",\n                \"price\": 10,\n                \"sdesc\": \"Deep Fried Gyoza with Mentai Sauce\",\n                \"title\": \"11. MENTAI GYOZA\",\n                \"total\": 20,\n                \"variations\": []\n            },\n            {\n                \"id\": \"c070bdb900bb47605b0056f96e7c4c9108fa22fe\",\n                \"qty\": 1,\n                \"note\": \"\",\n                \"type\": \"new\",\n                \"index\": \"24\",\n                \"price\": 8,\n                \"sdesc\": \"Deep-fried Sweet Prawn\",\n                \"title\": \"8. AMAEBI KARAAGE\",\n                \"total\": 8,\n                \"variations\": []\n            }\n        ],\n        \"table\": \"1\",\n        \"total\": 28,\n        \"status\": \"new\",\n        \"created\": 1648563701,\n        \"updated\": 1648563701\n    }\n    */\n    addOrderItem: (_this) => {\n\n        onClick('.add-item', (e) => {\n\n            let x = 0, itemArr = [], item = {};\n\n            // get order item details\n            item.id = document.querySelector('.edit-item').dataset.id;\n            item.cats = JSON.parse(document.querySelector('.edit-item').dataset.cats);\n            item.title = document.querySelector('.edit-item').value;\n            item.total = parseFloat(document.querySelector('.edit-tp').value);\n            item.price = parseInt(document.querySelector('.edit-tp').dataset.price);\n            item.discounts = JSON.parse(document.querySelector('.edit-item').dataset.discounts);\n            item.qty = parseInt(document.querySelector('.edit-qty').value);\n            item.note = \"\";\n            item.created = preview.state.orderSingle.updated; // Date.now() / 1000 | 0;  \n            item.variations = [];\n\n            // get discount\n            let discount_type = document.querySelector('.edit-discount').options[document.querySelector('.edit-discount').selectedIndex].dataset.type;\n            // if (discount_type) item.discount_type;\n            if (discount_type == \"percent\") { item.discount_percent = document.querySelector('.edit-discount').value; }\n            if (discount_type == \"value\") { item.discount_value = document.querySelector('.edit-discount').value; }\n            \n            // working\n            let count = 0;\n            let list = document.querySelectorAll(\".item-vars-input input\");\n            for (const inp of list) {\n\n                let v = count;\n                if (inp.checked) {\n\n                    if (!item.variations[v]) item.variations[v] = {};\n\n                    if (!item.variations[v].list) item.variations[v].list = {};\n\n                    if (!item.variations[v].title) item.variations[v].title = inp.dataset.titlev;\n\n                    // cache selected variations\n                    item.variations[v].list[\"_\" + inp.dataset.index] = { title: inp.dataset.title, price: parseFloat(inp.dataset.price) };\n\n                    item.total += item.qty * parseFloat(inp.dataset.price);\n\n                    count += 1;\n                }\n            }\n\n            if (item.title.length < 2) { alert(__('Incorrect product data')); return; }\n\n            itemArr.push(item);\n\n            let itemRow = preview.structOrderItemTable(_this, x, itemArr, true);\n\n            document.querySelector('.new-item-row').insertAdjacentHTML(\"beforebegin\", itemRow);\n\n            preview.tableOrderItemListeners();\n\n            // calculate totals for new orders only\n            preview.refreshTotals();\n\n            // clear fields\n            document.querySelector('.edit-item').value = \"\";\n            document.querySelector('.edit-tp').value = \"\";\n            document.querySelector('.edit-qty').value = \"\";\n            document.querySelector('.edit-discount').value = \"\";\n            document.querySelector(\".item-vars-input\").innerHTML = \"\";\n\n            // focus back to the input field\n            setTimeout(() => { document.querySelector('.edit-item').focus(); }, 300);\n\n            preview._this.state.changes = true;\n        });\n    },\n}","import { __html } from '@kenzap/k-cloud';\n\nexport const HTMLContent = () => {\n\n    return `\n      <div class=\"container ec-orders\">\n        <div class=\"d-md-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            <button class=\"btn btn-primary add-order btn-add mt-3 mb-1 mt-md-0 mb-md-0\" type=\"button\">${ __html('New order') }</button>\n        </div>\n        <div class=\"d-md-flex justify-content-between bd-highlight mb-3\">\n          <div>\n            <div class=\"col-md-12 page-title\">\n              <div class=\"st-opts st-table dropdown\">\n                  <a class=\"btn btn-outline-secondary dropdown-toggle\" href=\"#\" role=\"button\" id=\"order-status\" data-id=\"status\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                    ${ __html('All') }\n                  </a>\n                  <ul class=\"dropdown-menu\" aria-labelledby=\"order-status\">\n                    <li><a class=\"dppi dropdown-item\" data-key=\"\" href=\"#\" >${ __html('All') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"new\" href=\"#\" >${ __html('New') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"paid\" href=\"#\" >${ __html('Paid') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"processing\" href=\"#\" >${ __html('Processing') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"completed\" href=\"#\" >${ __html('Completed') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"canceled\" href=\"#\" >${ __html('Canceled') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"failed\" href=\"#\" >${ __html('Failed') }</a></li>\n                    <li><a class=\"dppi dropdown-item\" data-key=\"refunded\" href=\"#\" >${ __html('Refunded') }</a></li>\n                  </ul>\n              </div>\n              <div class=\"st-opts\" >\n                <div class=\"input-group-sm mb-0 justify-content-start mb-sm-0\" >\n                  <input id=\"usearch\" type=\"text\" class=\"inp form-control search-input\" autocomplete=\"off\" placeholder=\"${ __html('Search order') }\">\n                </div>\n                <!-- <a id=\"viewSum\" href=\"#\" style=\"margin-left:16px;\">view summary</a> -->\n              </div>\n            </div>\n          </div>\n          <div class=\"qr-print-cnt d-none align-self-center my-3 my-md-0\">\n            <div class=\"d-inline-block\">\n              <input id=\"qr-number\" type=\"text\" class=\"inp form-control form-control-sm qr-number p-0 px-2 me-2 ms-0\" autocomplete=\"off\" style=\"max-width:100px;\" placeholder=\"${ __('QR number') }\">\n            </div>\n            <div class=\"d-inline-block\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"currentColor\" class=\"bi bi-qr-code-scan print-qr po\" viewBox=\"0 0 16 16\">\n                <path d=\"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z\"/>\n                <path d=\"M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z\"/>\n                <path d=\"M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z\"/>\n                <path d=\"M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z\"/>\n                <path d=\"M12 9h2V8h-2v1Z\"/>\n              </svg>\n            </div>\n          </div> \n        </div>\n\n        <div id=\"orders-after-header\">\n\n\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"card border-white shadow-sm border-0\">\n              <div class=\"card-body p-0\">\n \n                <div class=\"table-responsive\">\n                  <table class=\"table table-hover table-borderless align-middle table-striped table-p-list mb-0\">\n                    <thead>\n                      <tr>\n                        <th><span class=\"ps-1\">${ __html('From') }</span></th>\n                        <th class=\"d-none d-sm-table-cell\">${ __html('Status') }</th>\n                        <th>${ __html('Subtotal') }</th>\n                        <th class=\"d-none d-sm-table-cell\">${ __html('Time') }</th>\n                        <th></th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"list\">\n\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal order-modal\" tabindex=\"-1\" data-backdrop=\"static\" data-keyboard=\"false\">\n        <div class=\"modal-dialog \">\n          <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close align-self-start-remove\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n              </div>\n              <div class=\"modal-body\">\n              \n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary btn-confirm\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n              </div>\n          </div>\n        </div>\n      </div>\n\n    `;\n}","// js dependencies\nimport { H, showLoader, hideLoader, initHeader, initBreadcrumbs, parseApiError, getCookie, onClick, onKeyUp, spaceID, toast, link, onChange, __html } from '@kenzap/k-cloud';\nimport { timeConverterAgo, priceFormat, getPageNumber, makeNumber, unescape, mt, playSound, ecommerceUpdates, initFooter } from \"../_/_helpers.js\"\nimport { tables } from \"../_/_order_tables.js\"\nimport { preview } from \"../_/_order_preview.js\"\nimport { HTMLContent } from \"../_/_cnt_orders.js\"\nimport { printReceipt, autoPrint, isPrintQREnabled } from \"../_/_print.js\"\n\n// where everything happens\nconst _this = {\n  \n    state: {\n        firstLoad: true,\n        changes: false,\n        modalCont: null,\n        modalOpen: false,\n        playSound: { allowed: false, ids: null, nids: [], n: 0, max_times: 5, timer: null, audio: new Audio('https://kenzap.com/static/swiftly.mp3') },\n        orderIDs: [],\n        printLink: null, // storing receipt print pending order \n        printRequest: null, // storing receipt print pending order \n        user: {}, // where user data is cached\n        orders: [], // where all requested orders are cached\n        settings: {}, // where all requested settings are cached\n        qr_settings: {}, // where all requested settings are cached\n        orderSingle: [], // where single order is stored during preview\n        printQueue: [],\n        updates: { last_order_id: '', last_order_update: 0 },\n        playTitleTimer: null,\n        refreshTimer: null,\n        statuses: [],\n        limit: 200, // number of records to load per table\n        slistLimit: 10, // product suggestion fetch search limit\n        productsSuggestions: []\n    },\n    init: () => {\n         \n        // load data\n        _this.getData();\n\n        // get latest orders and notifications\n        let cb = (response) => { \n\n            if(_this.state.firstLoad){ \n\n                _this.state.updates.last_order_id = response.last_order_id;\n                _this.state.updates.last_order_update = response.last_order_update;\n            }\n\n            // refresh if order list changes\n            if(response.last_order_update != _this.state.updates.last_order_update){\n\n                playSound(_this, 1);\n\n                _this.getData();\n                 \n                _this.state.updates.last_order_id = response.last_order_id;\n                _this.state.updates.last_order_update = response.last_order_update;\n            }\n        };\n\n        // _this.playSound();\n\n        // ecommerceUpdates(_this, ['messages', 'last_order_id'], cb);\n\n        // turn on data polling for new orders\n        _this.state.refreshTimer = setInterval(() => { ecommerceUpdates(_this, ['messages', 'last_order_id'], cb); }, 5000);\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        if(_this.state.printRequest){\n\n            // printReceipt(_this, _this.state.printRequest, \"user\");\n            _this.state.printQueue.push({_id: _this.state.printRequest, type: \"user\", template: null});\n        }\n\n        // search content\n        let s = document.querySelector('.search-input') ? document.querySelector('.search-input').value : '';\n\n        // search term \n        let term = document.querySelector('#order-status') ? document.querySelector('#order-status').dataset.value: '';\n\n        // skip refresh if modal is open\n        if(document.querySelector('body.modal-open')){ return; }\n        \n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar', 'id'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        source:      ['extension'],\n                        key:         'ecommerce',\n                    },\n                    orders: {\n                        type:       'find',\n                        key:        'ecommerce-order',\n                        fields:     '*',\n                        term:       term != '' ? 'status=\\'' + term +'\\'' : '',\n                        limit:      _this.state.limit,\n                        search:     {                                                           // if s is empty search query is ignored\n                            field: 'from',\n                            s: s\n                        },\n                        sortby:     {\n                            field: 'created',\n                            order: 'DESC'\n                        }\n                    },\n                    // qr_settings: {\n                    //     type:       'get',\n                    //     key:        'qrmenu-settings',\n                    //     fields:     ['slug'],\n                    // },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_percent_auto', 'tax_percent', 'tax_display', 'fee_calc', 'fee_percent', 'fee_display', 'payment_methods', 'custom_payment_method', 'tables', 'table_list', 'add_products', 'add_products_list', 'templates'],\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if(response.success){\n                \n                // init header\n                initHeader(response);\n\n                // get core html content \n                _this.loadPageStructure();  \n\n                // render table\n                _this.renderPage(response);\n\n                // bind content listeners\n                _this.initListeners();\n            \n                // initiate footer\n                initFooter(_this);\n\n                // first load\n                _this.state.firstLoad = false;\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    },\n    authUser: (response) => {\n\n        if(response.user){\n            \n            if(response.user.success == true){\n\n                \n            }\n        }\n    },\n    loadPageStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent();\n    },\n    renderPage: (response) => {\n\n        if(_this.state.firstLoad){\n\n            // initiate breadcrumbs\n            initBreadcrumbs(\n                [\n                    { link: link('https://dashboard.kenzap.cloud'), text: __html('Home') },\n                    { link: link('/'), text: __html('E-commerce') },\n                    { text: __html('Orders') }\n                ]\n            );\n\n            // initialize statuses\n            _this.state.statuses = {\n                'new': { \n                    text: __html('New'),\n                    class: 'btn-warning text-dark fw-light'\n                },\n                'paid': {\n                    text: __html('Paid'),\n                    class: 'btn-primary fw-light'\n                },\n                'processing': { \n                    text: __html('Processing'),\n                    class: 'btn-primary fw-light'\n                },\n                'completed': { \n                    text: __html('Completed'),\n                    class: 'btn-success fw-light'\n                },\n                'canceled': { \n                    text: __html('Canceled'),\n                    class: 'btn-secondary fw-light'\n                },\n                'failed': { \n                    text: __html('Failed'),\n                    class: 'btn-danger fw-light'\n                },\n                'refunded': { \n                    text: __html('Refunded'),\n                    class: 'btn-danger fw-light'\n                }\n            };\n        }\n\n        // cache orders globally\n        _this.state.user = response.user;\n        _this.state.orders = response.orders;\n        _this.state.meta = response.meta;\n        \n        // console.log(_this.state.orders);\n\n        // cache settings globally\n        _this.state.settings = response.settings;\n        // _this.state.qr_settings = response.qr_settings;\n\n        if (!_this.state.settings['templates']){ _this.state.settings['templates'] = []; }\n\n        // enable QR priting\n        _this.state.settings.qr_print = isPrintQREnabled(_this);\n        if (_this.state.settings.qr_print){ document.querySelector(\".qr-print-cnt\").classList.remove('d-none'); }\n\n        // no orders in the list\n        if (response.orders.length == 0){\n\n            document.querySelector(\".table tbody\").innerHTML = `<tr><td colspan=\"5\">${ __html(\"No orders to display.\") }</td></tr>`;\n            return;\n        }\n\n        // generate website table\n        let orderIDsTemp = [];\n        _this.state.newOrderCount = [];\n\n        let list = '', new_ids = '';\n        for (let i in response.orders){\n\n            // save last order ID for ecommerceUpdates\n            // if(i==0) _this.state.lastOrderID = response.orders[i]._id;\n\n            let img = 'https://cdn.kenzap.com/loading.png';\n            orderIDsTemp.push(response.orders[i]._id);\n\n            if(typeof(response.orders[i].status) === 'undefined') response.orders[i].status = 'new';\n\n            if(response.orders[i].status == 'new') new_ids += response.orders[i].id;\n     \n            let applink = {\"print\":\"[C]<u><font size=\\\"big\\\">ORDER{{order_id_short}}</font></u>\\n[C]Fu Zhen Seafood\\n[C]<u type=double>{{date_time}}</u>\\n[C]\\n[C]================================\\\" \\n[L]\\n[L]<b>BEAUTIFUL SHIRT</b>[R]9.99€\\n[L]  + Size : S\\n[L]\\n[L]<b>AWESOME HAT</b>[R]24.99€\\n[L]  + Size : 57/58\\n[L]\\n[C]--------------------------------\\n[R]TOTAL PRICE :[R]34.98€\\n[R]TAX :[R]4.23€\"};\n            let classN = ((_this.state.orderIDs.includes(response.orders[i]._id) || _this.state.firstLoad)?'':'new');\n            list += `\n            <tr class=\"${ classN }\">\n              <td class=\"details view-order\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\">\n                <div class=\"ps-1\" >\n                  <b class=\"\">${ (response.orders[i].id) }</b> ${ response.orders[i].from }\n                  <div class=\" elipsized fst-italic\">${ response.orders[i].note ? response.orders[i].note : \"\" }</div>\n                  <div class=\" d-sm-none\"> <span class=\"me-2\">${ _this.getStatus(response.orders[i].status) }</span> <span class=\"text-muted\">${ timeConverterAgo(__, response.meta.time, response.orders[i].created) }</span> </div>\n                </div>\n              </td>\n              <td class=\"d-none d-sm-table-cell\">\n                <span class=\"fs-12\">${ _this.getStatus(response.orders[i].status) }</span>\n              </td>\n              <td>\n                <span style=\"font-size:18px;\">${ priceFormat(_this, response.orders[i].total) }</span>\n              </td>\n              <td class=\"d-none d-sm-table-cell\">\n                <span style=\"font-size:18px;\">${ timeConverterAgo(__, response.meta.time, response.orders[i].created) }</span>\n              </td>\n              <td class=\"last\">\n                <a href=\"#\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"view-order text-success d-none me-4\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\"/>\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\n                </svg></a>\n                <a href=\"kenzapprint://kenzapprint.app?data=${ encodeURIComponent(JSON.stringify(applink)) }\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"print-order-dis d-none text-success me-2\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-printer me-2\" viewBox=\"0 0 16 16\">\n                    <path d=\"M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z\"/>\n                    <path d=\"M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z\"/>\n                </svg></a>\n                <a href=\"#\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"remove-order text-danger me-2\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"19\" height=\"19\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                </svg></a>\n              </td>\n            </tr>`;\n        }\n        \n        // _this.state.playSoundNow = count_new > 0 ? true : false;\n        // if(_this.state.playSound.ids != new_ids && !document.querySelector('body.modal-open')){ console.log('reload no'); }else{ console.log('reload yes'); _this.getData(); }\n\n        // if(_this.state.playSound.ids){  }\n\n        if(_this.state.playSound.ids && _this.state.playSound.ids!=new_ids && _this.state.playSound.ids.length < new_ids.length){ playSound(_this, 3); }\n\n        _this.state.playSound.ids = new_ids;\n        \n        _this.state.orderIDs = orderIDsTemp;\n\n        // provide result to the page\n        document.querySelector(\".table tbody\").innerHTML = list;\n    },\n    // parse visual page status\n    getStatus: (status) => {\n    \n        return `<div class=\"badge ${ _this.state.statuses[status].class }\">${ _this.state.statuses[status].text }</div>`;\n    },\n    initListeners: () => {\n\n        // view table mode\n        tables.render(_this);\n\n        // view order\n        preview.viewOrder(_this);\n        \n        // remove order\n        onClick('.remove-order', _this.listeners.removeOrder);\n\n        // print order\n        // print.viewOrder(_this);\n        // onClick('.print-order', _this.listeners.printOrder);\n\n        // table status change listener\n        onClick('.st-table li a', _this.listeners.changeStatus);\n\n        // break here if initListeners is called more than once\n        if(!_this.state.firstLoad) return;\n\n        // turn on auto printing \n        autoPrint(_this);\n\n        // add new order listener\n        preview.newOrder(_this);\n\n        // modal success button\n        onClick('.modal .btn-primary', _this.listeners.modalSuccessBtn);\n        \n        // search orders\n        onKeyUp('.search-input', _this.listeners.searchOrders);\n\n        // track first touch iteration to allow sound to play\n        document.body.addEventListener('touchstart', function(){ _this.state.playSound.allowed = true ; }, false);\n        document.body.addEventListener('mousedown', function(){ _this.state.playSound.allowed = true ; }, false);\n\n        // android back pressed\n        window.addEventListener(\"hashchange\", function(e) {\n\n            // close modal if still openned\n            // if(window.location.href.indexOf(\"#editing\")==-1) { e.preventDefault(); if(_this.modalCont){ _this.modalCont.hide(); } return false; }\n            if(_this.modalCont){ e.preventDefault(); _this.modalOpen = false; _this.modalCont.hide(); return false; }\n\t\t});\n    },\n    listeners: {\n\n        newOrder: (e) => {\n\n\n        },\n        changeStatus: (e) => {\n\n            e.preventDefault();\n\n            // console.log(e.currentTarget.dataset.key);\n\n            let os = document.querySelector('#order-status');\n            if(e.currentTarget.dataset.key == \"\"){\n                os.innerHTML = __html('All')\n                os.dataset.value = '';\n            }else{\n                os.innerHTML = _this.state.statuses[e.currentTarget.dataset.key].text;\n                os.dataset.value = e.currentTarget.dataset.key;\n            }\n\n            let list = [];\n\n            // clear previous classes\n            Object.keys(_this.state.statuses).forEach((key) => {\n                list = _this.state.statuses[key].class.split(' ');\n                list.forEach((key) => { \n                    os.classList.remove(key);\n                });\n                os.classList.remove('btn-outline-secondary');\n            });\n\n            // add new classes\n            if(e.currentTarget.dataset.key==''){\n                \n                os.classList.add('btn-outline-secondary');\n            }else{\n                list = _this.state.statuses[e.currentTarget.dataset.key].class.split(' ');\n                list.forEach((key) => { \n                    os.classList.add(key);\n                });\n            }\n\n            // reload table\n            _this.getData();\n        },\n        removeOrder: (e) => {\n\n            e.preventDefault();\n\n            let c = confirm( __('Completely remove this order?') );\n\n            if(!c) return;\n  \n            // send data\n            fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: {\n                        product: {\n                            type:       'delete-order',\n                            id:         e.currentTarget.dataset.id,  \n                            sid:        spaceID(),\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    // _this.modalCont.hide();\n\n                    _this.getData();\n\n                }else{\n\n                \n                    parseApiError(response);\n                }\n            })\n            .catch(error => {\n                parseApiError(error);\n            });\n        },\n        searchOrders: (e) => {\n\n            e.preventDefault();\n\n            _this.getData();\n        },\n\n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        modalSuccessBtnFunc: null\n    },\n    updateOrder: (i, id) => {\n\n        // print immediately if order has no changes\n        if(!_this.state.changes && _this.state.printRequest){ \n\n            _this.state.printQueue.push({_id: _this.state.printRequest, type: \"user\", template: null});\n            // printReceipt(_this, _this.state.printRequest, \"user\");\n            _this.modalCont.hide(); \n            return; \n        }\n\n        let modal = document.querySelector(\".modal\");\n        if(modal.querySelector(\".btn-confirm\").dataset.loading === 'true') return;\n        modal.querySelector(\".btn-confirm\").dataset.loading = true;\n        modal.querySelector(\".btn-confirm\").innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __html('Loading..');\n\n        let data = {};\n\n        // iterate through all fields\n        for(let s of document.querySelectorAll('.order-form')){\n\n            switch(s.dataset.type){\n          \n                // case 'html': data[s.dataset.id] = s.innerHTML; break;\n                case 'key': \n                    data[s.dataset.id] = s.dataset.value; \n                    break;\n                case 'key-number': \n                    data[s.dataset.id] = makeNumber(s.dataset.value); \n                    break;\n                case 'items':   \n\n                    // data['items'] = {};\n                    data['items'] = [];\n                    for(let item of document.querySelectorAll('.order-item-row-active')){\n\n                        let vars = JSON.parse(unescape(item.dataset.vars));\n                        let cats = JSON.parse(unescape(item.dataset.cats));\n                        let discounts = JSON.parse(unescape(item.dataset.discounts));\n                        let obj = {\n                            \"id\": item.dataset.id,\n                            \"qty\": parseInt(item.querySelector('.item-qty').dataset.value),\n                            \"cats\": cats ? cats : [],\n                            \"discounts\": discounts ? discounts : [],\n                            \"note\": item.querySelector('.item-note').innerHTML,\n                            \"type\": \"new\",\n                            \"index\": \"0\",\n                            \"price\": parseFloat(item.querySelector('.item-total').dataset.price),\n                            \"sdesc\": item.querySelector('.item-title').dataset.sdesc,\n                            \"title\": item.querySelector('.item-title').dataset.value,\n                            // \"priceF\": parseFloat(item.querySelector('.item-total').dataset.value),\n                            \"total\": parseFloat(item.querySelector('.item-total').dataset.value),\n                            \"variations\": id == 'new' ? [] : vars ? vars : [],\n                        }\n\n                        // get discount\n                        // let discount_type = document.querySelector('.edit-discount').options[document.querySelector('.edit-discount').selectedIndex].dataset.type;\n                        if (item.querySelector('.item-total').dataset.discount_percent) { obj.discount_percent = item.querySelector('.item-total').dataset.discount_percent; }\n                        if (item.querySelector('.item-total').dataset.discount_value) { obj.discount_value = item.querySelector('.edit-total').dataset.discount_value; }\n                    \n                        data['items'].push(obj);\n                    }\n                    \n                break\n                case 'text':   \n                    data[s.dataset.id] = s.innerHTML;\n                    break;\n                case 'email':  \n                case 'emails':  \n                case 'select':\n                case 'textarea': \n                    data[s.id] = s.value; \n                    break;\n                case 'radio': \n                    data[s.id] = s.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('input:checked').value; \n                    break;\n                case 'price':\n                    data['price'] = JSON.parse(decodeURIComponent(s.dataset.price));\n                    data['total'] = data['price']['total'];\n                    data['total_all'] = data['price']['grand_total'];\n                    if(document.querySelector(\".payment-method-select\")) data['price']['payment_method'] = document.querySelector(\".payment-method-select\").value;\n                    break;\n            }\n        }\n\n\n        // we use this data to generate analytical reports\n        let dateObj = new Date();\n        data['created_ymd'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1) + '' + mt(dateObj.getUTCDate());\n        data['created_ym'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1);\n        data['created_y'] = dateObj.getUTCFullYear() + '';\n        data['printed'] = _this.state.printRequest ? true : false;\n        data['notify'] = false;\n\n        // console.log(data);\n\n        preview._this.state.changes = false;\n\n        // create new order\n        if(id == 'new'){\n\n            // additional required fields\n            data['name'] = data['from'];\n            data['customer'] = {\n                \"first_name\": data['from'],\n                \"last_name\": \"\",\n                \"kid\": 0,\n            };\n            \n            // get last order ID number\n            fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: {\n                        order: {\n                            type:       'create-order',\n                            key:        'ecommerce-order',        \n                            // sid:        localStorage.sid,\n                            data:       data\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n                \n                if (response.success){\n\n                    _this.modalCont.hide();\n\n                    toast( __('Order created') );\n\n                    if(_this.state.printRequest == 'new') _this.state.printRequest = data._id;\n                    \n                    _this.getData();\n                                    \n                }else{ parseApiError(response); }\n            })\n            .catch(error => { parseApiError(error); });\n\n        // update existing order\n        }else{\n\n            // send data\n            fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: {\n                        order: {\n                            type:       'update-order',\n                            id:         id,         \n                            sid:        spaceID(),\n                            data:       data\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    _this.modalCont.hide();\n\n                    toast( __('Order updated') );\n\n                    _this.getData();\n\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => {\n                parseApiError(error);\n            });\n        }\n    },\n    initFooter: () => {\n        \n        initFooter(__('Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/ecommerce\" target=\"_blank\">', '</a>'), '');\n    }\n}\n\n_this.init();"],"names":["__","onClick","mt","val","length","getPageNumber","urlParams","URLSearchParams","window","location","search","page","get","parseInt","priceFormat","_this","price","makeNumber","Math","round","parseFloat","toFixed","state","settings","currency_symb_loc","currency_symb","onlyNumbers","sel","chars","document","querySelector","push","apply","_toConsumableArray","querySelectorAll","forEach","el","addEventListener","e","key","toLowerCase","console","log","isNumber","which","includes","preventDefault","fn","_iterator2","_createForOfIteratorHelper","_step2","s","n","done","value","removeEventListener","err","f","timeConverterAgo","now","time","past","a","Date","months","year","getFullYear","month","getMonth","date","getDate","getHours","getMinutes","getSeconds","parseVariations","product","html_vars","_typeof","variations","v","type","__html","title","required","d","data","checked","escape","htmlStr","replace","unescape","ecommerceUpdates","source","cb","fetch","method","headers","H","body","JSON","stringify","query","updates","then","response","json","success","renderNotifications","messages","error","isMobile","nav","navigator","userAgent","match","playSound","max","timer","clearInterval","allowed","audio","play","vibrate","_unused","setInterval","html","msg","nids","_id","concat","color","getData","insertAdjacentHTML","id","currentTarget","dataset","_iterator3","_step3","assigned","simulateClick","getProductsById","products","fields","sortby","field","order","i","orderSingle","items","cats","index","note","qty","sdesc","total","parseApiError","initFooter","left","right","link","innerHTML","printReceipt","template","debug","arguments","undefined","o","created","from","idd","kid","name","sid","spaceID","status","discount_percent","discount_total","discount_value","fee_total","grand_total","payment_method","tax_percent","tax_total","step","table","total_all","updated","orders","filter","templates","user","print","cols_p","indexOf","cols","substr","takeaway","phone","addr1","toLocaleString","dateStyle","timeStyle","getPrintItems","matches","matchAll","Array","x","cat","items_restricted","re","RegExp","start","end","slice","order_totals","fee_display","tax_display","printers","processStyling","toast","parsePrintError","printRequest","rows","split","output","_iterator","_step","_loop","row","max_char","r","l","c","countDoubledChars","spaceN","addSpaces","floor","ceil","empty","char","rowNew","last_row_length","txt","start_ofst","end_ofst","max_ofst","ofst","first_row","text","cjkRegEx","wordCount","inWord","curChar","charAt","test","list","endsWith","substring","printQR","qrnum","qr_settings","slug","autoPrint","lastPrintTime","printQueue","_obj","shift","auto_print_action","last_print_id","localStorage","hasOwnProperty","getItem","reverse","t","auto_print","p","template_temp","setItem","isPrintQREnabled","reason","remove","tables","firstLoad","render","table_list","trim","structTableCard","meta","renderField","item","classList","editable","preview","structOrderItemTable","ii","id_last","classes","_id_header","_id_body","qr_print","renderOrder","changes","modal","modalCont","bootstrap","Modal","modalOpen","rowMark","history","pushState","pageID","pathname","href","add_products","add_products_list","renderOrderUI","listeners","modalSuccessBtnFunc","updateOrder","osm","statuses","Object","keys","add","_fields","statusSelect","isNaN","loading","fname","lname","bios","avatar","email","countryr","cityr","addr2","post","c1","c2","c3","c4","c5","_defineProperty","setTimeout","refreshTotals","delivery","shareLink","show","tableOrderItemListeners","suggestOrderItem","toggle","addOrderItem","focus","newOrder","viewOrder","itemOptions","options","isNew","vars","item_discount","discounts","obj","discount_type","onKeyUp","keyCode","charCode","scrollTo","top","getBoundingClientRect","behavior","activeElement","limit","slist","term","relation","offset","hideLoader","productsSuggestions","discount_options","discount","availability","percent","onChange","calcItemTotal","selectedIndex","String","fromCharCode","select","noteEl","parentElement","grand_total_temp","ordertotalsubtotal","custom_payment_method","payment_methods","ordertotalpaymentmethod","outerHTML","item_price","fee_calc","fee_percent","ordertotalfee","tax_calc","ordertotaltax","ordertotalgrandtotal","encodeURIComponent","style","maxWidth","setCustomValidity","itemArr","parse","count","inp","titlev","alert","itemRow","HTMLContent","ids","max_times","Audio","orderIDs","printLink","last_order_id","last_order_update","playTitleTimer","refreshTimer","slistLimit","init","showLoader","token","getCookie","locale","initHeader","loadPageStructure","renderPage","initListeners","authUser","initBreadcrumbs","orderIDsTemp","newOrderCount","new_ids","applink","classN","getStatus","removeOrder","changeStatus","modalSuccessBtn","searchOrders","hide","os","confirm","decodeURIComponent","dateObj","getUTCFullYear","getUTCMonth","getUTCDate"],"mappings":"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"}