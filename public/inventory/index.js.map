{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_cnt_inventory_list.js","../../src/_/_mod_inventory_edit.js","../../src/_/_mod_inventory_view.js","../../src/_/_mod_inventory_category_table.js","../../src/inventory/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n\n    // cache CDN link\n    if(response.cdn) localStorage.setItem('cdn', response.cdn);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __init = (locale) => {\n\n    if(typeof locale !== 'object' || locale === null) return;\n\n    if(typeof window.i18n === 'undefined') window.i18n = {};\n\n    if(typeof window.i18n.state === 'undefined') window.i18n.state = { locale: {} };\n   \n    window.i18n.state.locale = locale;\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n\n\n    return match(window.i18n.state.locale.values[text], p);\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param cb {Function} callback function to escape text variable\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nconst __esc = (text, cb, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(cb(window.i18n.state.locale.values[text]), p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const attr = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __attr = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Removes special characters `<`, `>`, `\"`, `'` from the link.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const src = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n    \n}\n\n/*\n * Converts special characters `<`, `>`, `\"`, `'` from the link and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __src = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const html = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translations\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __html = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[&<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries.\n * @param {object} headers\n */\n export const H = () => {\n\n    return {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n        'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n        'Kenzap-Header': checkHeader(),\n        'Kenzap-Token': getCookie('kenzap_token'),\n        'Kenzap-Sid': spaceID()\n    }\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n * @deprecated\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+encodeURIComponent(window.location.href); break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name CDN\n * @description Returns CDN URL of Kenzap Cloud file storage\n * @param {String} region - Default location Singapore. TODO, override by region variable\n */\nexport const CDN = (region = '') => {\n\n    if(localStorage.getItem('cdn')) return localStorage.getItem('cdn');\n\n    return 'https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com';\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" style=\"z-index:10000;\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { getCookie, H, getSiteId, simulateClick, link, parseApiError, __html } from '@kenzap/k-cloud';\n\n/* \ntexts to localize\n__('required')\n__('Size')\n__('Small')\n__('Regular')\n__('Large')\n__('Subtotal')\n__('Discount by %')\n__('Discount by value')\n__('Grand Total')\n*/\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const isValidDomain = (str) => {\n \n    if (typeof value !== 'string') return false\n    if (!(opts instanceof Object)) opts = {}\n    value = value.toLowerCase()\n  \n    if (value.endsWith('.')) {\n      value = value.slice(0, value.length - 1)\n    }\n  \n    if (opts.allowUnicode) {\n      value = punycode.toASCII(value)\n    }\n  \n    if (value.length > 253) {\n      return false\n    }\n  \n    const validChars = /^([\\u0E00-\\u0E7Fa-z0-9-._*]+)$/g\n    if (!validChars.test(value)) {\n      return false\n    }\n  \n    if (opts.topLevel) {\n      if (ccTldMap[value.replace(/\\.$/, '')]) {\n        return true\n      }\n    }\n  \n    const sldRegex = /(.*)\\.(([\\u0E00-\\u0E7Fa-z0-9]+)(\\.[a-z0-9]+))/\n    const matches = value.match(sldRegex)\n    let tld = null\n    let labels = null\n    if (matches && matches.length > 2) {\n      if (sldMap[matches[2]]) {\n        tld = matches[2]\n        labels = matches[1].split('.')\n      }\n    }\n  \n    if (!labels) {\n      labels = value.split('.')\n      if (labels.length <= 1) return false\n  \n      tld = labels.pop()\n      const tldRegex = /^(?:xn--)?(?!^\\d+$)[\\u0E00-\\u0E7Fa-z0-9]+$/gi\n  \n      if (!tldRegex.test(tld)) return false\n    }\n  \n    if (opts.subdomain === false && labels.length > 1) return false\n  \n    const isValid = labels.every(function (label, index) {\n      if (opts.wildcard && index === 0 && label === '*' && labels.length > 1) {\n        return true\n      }\n  \n      let validLabelChars = /^([\\u0E00-\\u0E7Fa-zA-Z0-9-_]+)$/g\n      if (index === labels.length - 1) {\n        validLabelChars = /^([\\u0E00-\\u0E7Fa-zA-Z0-9-]+)$/g\n      }\n  \n      // https://github.com/miguelmota/is-valid-domain/issues/22\n      const doubleDashCount = (label.match(/--(--)?/g) || []).length\n      const xnDashCount = (label.match(/xn--/g) || []).length\n      if (index === labels.length - 1 && doubleDashCount !== xnDashCount) {\n        return false\n      }\n  \n      const isValid = (\n        validLabelChars.test(label) &&\n        label.length < 64 &&\n        !label.startsWith('-') &&\n        !label.endsWith('-')\n      )\n  \n      return isValid\n    })\n  \n    return isValid\n}\n\nexport const getParam = (param) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get(param) ? urlParams.get(param) : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const replaceQueryParam = (param, newval, search) => {\n\n    let regex = new RegExp(\"([?;&])\" + param + \"[^&;]*[;&]?\");\n    let query = search.replace(regex, \"$1\").replace(/&$/, '');\n\n    return (query.length > 2 ? query + \"&\" : \"?\") + (newval ? param + \"=\" + newval : '');\n}\n\nexport const getPageNumberOld = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPageNumber = () => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n    let page = urlParams.get('page') ? urlParams.get('page') : 1;\n\n    return parseInt(page);\n}\n\nexport const getPagination = (__, meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = __('no records to display'); return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = __(\"Showing %1$ to %2$ of %3$ entries\", (1+meta.offset), (offset), meta.total_records);\n    //  \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat mb-0\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?i:i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        \n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                // let url = window.location.href.split('/page');\n                // let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                let str = window.location.search;\n                str = replaceQueryParam('page', p, str);\n                // window.location = window.location.pathname + str\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, window.location.pathname + str);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const stockBadge = (_this, inventory) => {\n\n    // console.log(inventory.stock_warning + \" \" + inventory.stock_amount);\n\n    if(inventory.stock_amount <= 0){\n\n        return '<div data-stock=\"out\" class=\"badge bg-danger text-light fw-light\">' + __html('Out of stock') + '</div>';\n    }else if(inventory.stock_warning >= inventory.stock_amount){\n\n        return '<div data-stock=\"low\" class=\"badge bg-warning text-dark fw-light\">' + __html('Low stock') + '</div>';\n    }else{\n\n        return '<div data-stock=\"in\" class=\"badge bg-success text-light fw-light\">' + __html('In stock') + '</div>';\n    }\n}\n\nexport const formatStatus = (__, st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">' + __('Draft') + '</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">' + __('Published') + '</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">' + __('Unpublished') + '</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">' + __('Drafts') + '</div>';\n    }\n}\n\n/**\n    * Render price\n    * @public\n    */\n export const priceFormat = function(_this, price) {\n\n    price = makeNumber(price);\n\n    price = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    switch(_this.state.settings.currency_symb_loc){\n        case 'left': price = _this.state.settings.currency_symb + ' ' + price; break;\n        case 'right': price = price + _this.state.settings.currency_symb; break;\n    }\n\n    return price;\n}\n\nexport const makeNumber = function(price) {\n\n    price = price ? price : 0;\n    price = parseFloat(price);\n    price = Math.round(price * 100) / 100;\n    return price;\n}\n\nexport const formatTime = (__, timestamp) => {\n\t\n    const d = new Date(parseInt(timestamp) * 1000);\n    return d.toLocaleDateString();\n\n    let a = new Date(timestamp * 1000);\n    let months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const formatTimeDetailed = (__, timestamp) => {\n\t\n    // let a = new Date(timestamp * 1000);\n    // let hour = a.getHours();\n    // let min = a.getMinutes();\n\n    // console.log(hour+\":\"+min);\n\n    // server stores in UTC\n    // let offset = new Date().getTimezoneOffset();\n\n    const d = new Date(parseInt(timestamp) * 1000); //  + offset*60\n    \n    let t = d.toLocaleTimeString().split(':');\n\n    return d.toLocaleDateString() + \" \" + t[0] + \":\" + t[1];\n}\n\n// numbers only with allowed exceptions\n// export const onlyNumbers = (sel, chars) => {\n\n//     if(!document.querySelector(sel)) return;\n    \n//     document.querySelector(sel).addEventListener('keypress', (e) => {\n\n//         // console.log(e.which);\n\n//         if((!chars.includes(e.which) && isNaN(String.fromCharCode(e.which))) || e.which == 32 || (document.querySelector(sel).value.includes(String.fromCharCode(e.which)) && chars.includes(e.which))){\n\n//             // stop character from entering input\n//             e.preventDefault(); \n//             return false;\n//         }\n//     });\n// }\n\n// numbers only with allowed exceptions\nexport const onlyNumbers = (sel, chars) => {\n\n    if(!document.querySelector(sel)) return;\n\n    // arrow navigation\n    chars.push(...[9, 37, 38, 39, 40, 98, 100, 102, 104]);\n    \n    [...document.querySelectorAll(sel)].forEach(el => {\n\n        el.addEventListener('keydown', (e) => {\n\n            const key = e.key.toLowerCase();\n\n            // track potential paste event\n            if(key == 'control' || key == 'meta'){\n\n                window[key] = true;\n            }\n        \n            console.log(key.length + \" / \" + isNumber + \" / \" + e.which);\n\n            // not alphanumeric\n            // if (key.length != 1) {\n\n            //     e.preventDefault(); \n            //     return false;\n            // }\n        \n            // const isLetter = (key >= 'a' && key <= 'z');\n            const isNumber = (key >= '0' && key <= '9');\n\n            // add exception when Control or Meta (MAC) keys pressed\n            // console.log(window['meta'] + \" \" + window['control']);\n\n            // allow x c v a characters when meta ot control is pressed\n            if((window['control'] || window['meta']) && [86, 88, 65, 67, 90].includes(e.which)){ console.log(\"pushing\"); return true; }\n\n            // actual check\n            if (!isNumber && !chars.includes(e.which)) {\n\n                e.preventDefault(); \n                return false;\n            }\n        });\n\n        el.addEventListener('keyup', (e) => {\n\n            const key = e.key.toLowerCase();\n\n            // potential paste event\n            if(key == 'control' || key == 'meta'){\n\n                window[key] = false;\n            }\n        });\n    });\n}\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (__, now, time) => {\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return __('moments ago');\n    if(past < 3600) return parseInt(past / 60) + ' ' + __('minutes ago');\n    if(past < 86400) return parseInt(past / 60 / 60) + ' ' + __('hours ago');\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [ __('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec') ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const parseVariations = (_this, product) => {\n\n    let html_vars = '';\n    if(typeof(product.variations !== 'undefined'))\n    for(let v in product.variations){\n\n        // variation type\n        let type = '';\t\n        if(product.variations[v].type=='checkbox') type = 'check';\n        if(product.variations[v].type=='radio')    type = 'radio';\n\n        // struct variation\n        html_vars += '\\\n        <b>' + __html(product.variations[v].title) + (product.variations[v].required == '1' ? ' <span class=\"tag\">'+__html('required')+'</span>':'')+'</b>\\\n        <div class=\"kp-'+type+'\" >';\n\n        // variation labels\n        for(let d in product.variations[v].data){\n\n            let checked = false;\n            // for public qr feed\n            // if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){ checked = true; }\n            \n            // verify variation price validity\n            product.variations[v].data[d]['price'] = makeNumber(product.variations[v].data[d]['price']);\n\n            switch(type){\n                case 'check':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"checkbox\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+'>\\\n                        <div class=\"checkbox\">\\\n                            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\\\n                                <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\\\n                                <polyline points=\"4 11 8 15 16 6\"></polyline>\\\n                            </svg>\\\n                        </div>\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n                case 'radio':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"radio\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" name=\"radio'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+' />\\\n                        <span>'+__html(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n            }\n        }\n\n        html_vars += '</div>';\n    }\n\n    return html_vars;\n}\n\nexport const escape = (htmlStr) => {\n\n    return htmlStr.replace(/&/g, \"&amp;\")\n          .replace(/</g, \"&lt;\")\n          .replace(/>/g, \"&gt;\")\n          .replace(/\"/g, \"&quot;\")\n          .replace(/'/g, \"&#39;\");        \n \n}\n\nexport const unescape = (htmlStr) => {\n\n    htmlStr = htmlStr.replace(/&lt;/g , \"<\");\t \n    htmlStr = htmlStr.replace(/&gt;/g , \">\");     \n    htmlStr = htmlStr.replace(/&quot;/g , \"\\\"\");  \n    htmlStr = htmlStr.replace(/&#39;/g , \"\\'\");   \n    htmlStr = htmlStr.replace(/&amp;/g , \"&\");\n    return htmlStr;\n}\n\nexport const ecommerceUpdates = (_this, source, cb) => {\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: H(),\n        body: JSON.stringify({\n            query: {\n                updates: {\n                    type:       'updates',\n                    source:     source,\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if(response.success){\n\n            // do callback\n            cb(response);\n            \n            // parse notifications\n            renderNotifications(_this, response.messages);\n            \n        }else{\n\n\n        }\n    })\n    .catch(error => { // parseApiError(error); \n    });\n}\n\nexport const isMobile = () => {\n\n    const nav = navigator.userAgent.toLowerCase();\n    return (\n        nav.match(/iphone/i) || nav.match(/ipod/i) || nav.match(/ipad/i) || nav.match(/android/i)\n    );\n}\n\n// play notification sound. Ex.: when new order received\nexport const playSound = (_this, max) => {\n \n    // if(!max) max = _this.state.playSound.max_times;\n\n    _this.state.playSound.n = 0;\n\n    if(_this.state.playSound.timer) clearInterval(_this.state.playSound.timer);\n\n    if(_this.state.playSound.allowed) _this.state.playSound.audio.play();\n\n    // console.log(\"playing \" + _this.state.playSound.allowed);\n\n    try{\n        if(_this.state.playSound.allowed && isMobile()) window.navigator.vibrate(200);\n    }catch{\n\n    }\n\n    if(max==1) return;\n\n    _this.state.playSound.timer = setInterval(() => {\n\n        if(!_this.state.playSound.allowed) return;\n         \n        _this.state.playSound.audio.play();\n\n        if(_this.state.playSound.n > max){ clearInterval(_this.state.playSound.timer) }\n\n        _this.state.playSound.n += 1;\n\n    }, 5000);\n\n    // console.log('playSound');\n}\n\nexport const renderNotifications = (_this, messages) => {\n\n    let html = '';\n\n    let play = false;\n\n    // html\n    messages.forEach(msg => {\n\n        if(!_this.state.playSound.nids.includes(msg._id)){ _this.state.playSound.nids.push(msg._id); play = true; }\n\n        if(!document.querySelector('#contents .container [data-id=\"'+msg._id+'\"]')){\n        \n            html += `\n\n            <div class=\"alert alert-${ msg.color } alert-dismissible fade show\" role=\"alert\" data-id=\"${ msg._id }\">\n                <div class=\"d-flex align-items-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-square flex-shrink-0 me-2\" viewBox=\"0 0 16 16\">\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\n                        <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                    </svg>\n                    <div>\n                    ${ msg.msg }\n                    </div>\n                </div>\n                <button type=\"button\" class=\"btn-close btn-dismiss-notify\" data-bs-dismiss=\"alert\" aria-label=\"Close\" data-id=\"${ msg._id }\"></button>\n            </div>`;\n        }\n    });\n\n    // play sound\n    if(play){ \n        // console.log('notify play sound'); \n        playSound(_this, 1); _this.getData(); \n    }\n\n    if(document.querySelector('#contents .container')) document.querySelector('#contents .container').insertAdjacentHTML(\"afterbegin\", html);\n\n    // listeners\n    onClick('.btn-dismiss-notify', (e) => {\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    updates: {\n                        type:       'dismiss',\n                        id:         e.currentTarget.dataset.id,\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n\n\n            }else{\n\n\n            }\n        })\n        .catch(error => { // parseApiError(error); \n        });\n    });\n\n    // order open listener\n    if(document.querySelector('.order-details')) for( let el of document.querySelectorAll('.order-details') ){\n\n        if(el.dataset.assigned == \"1\") return;\n\n        el.dataset.assigned = 1;\n\n        el.addEventListener('click', (e) => {\n\n            let el = document.querySelector(\".view-order[data-id='\"+e.currentTarget.dataset.id+\"']\");\n\n            simulateClick(el);\n\n        }, true);\n    }\n}\n\n/*\n* Load additional JS or CSS depencies\n*\n* @param    dep       dependecy. Ex.: hiebee.min.js \n* @param    cb        function to call after script is loaded (optional)       \n* @return \t{Boolen} \tresult status \n* \n*/\nexport const loadAddon = (dep, version, cb) => {\n\n    \n    const url = new URL(dep);\n\n    if(getCookie('debug')) dep = 'http://localhost:3000' + url.pathname;\n    \n    console.log(dep);\n\n    // dependency already loaded, skip\n    if(document.getElementById(dep)){ if(typeof cb === 'function') cb.call(); return; }\n\n    // detect dependency type\n    let t = dep.split('.').slice(-1)[0];\n    // console.log(dep+'loadAddon'+t);\n    switch(t){\n      case 'js':\n        \n        let js = document.createElement(\"script\");\n        js.setAttribute(\"src\", dep);\n        js.id = dep;\n        js.onload = js.onreadystatechange = function() {\n \n          if(!this.readyState || this.readyState == 'complete')\n            if(typeof cb === 'function') cb.call();\n        };\n        document.body.appendChild(js);\n        \n      break;\n      case 'css':\n\n        var head  = document.getElementsByTagName('head')[0];\n        var css  = document.createElement('link');\n        css.id   = dep;\n        css.rel  = 'stylesheet';\n        css.type = 'text/css';\n        css.href = dep;\n        head.appendChild(css);\n\n      break;\n    }\n}\n\nexport const getProductsById = (_this, products, cb) => {\n\n    // do API query\n    const response_raw = fetch('https://api-v1.kenzap.cloud/', {\n        method: 'post',\n        headers: H(),\n        body: JSON.stringify({\n            query: {\n                products: {\n                    type:       'find',\n                    fields:     '*',\n                    key:        'ecommerce-product',\n                    id:         products,\n                    sortby:     {\n                        field: 'created',\n                        order: 'DESC'\n                    }\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success) {\n\n            response.products.forEach((product, i) => {\n\n                _this.state.orderSingle.items.push({\n                    cats: [],\n                    id: product._id,\n                    index: i,\n                    note: \"\",\n                    price: product.price,\n                    qty: 1,\n                    sdesc: __html(product.sdesc),\n                    title: __html(product.title),\n                    total: product.price,\n                    type: \"new\",\n                    variations: []\n                });\n            });\n\n            cb(_this);\n        }\n    })\n    .catch(error => { console.log(error); parseApiError(error); });\n}\n\nexport let Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\\r\\n/g,\"\\n\");var t=\"\";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}\n\nexport const makeid = (length) => {\n\n    let result = '';\n    const characters = 'abcdefghijklmnopqrstuvwxyz';\n    const charactersLength = characters.length;\n    let counter = 0;\n    while (counter < length) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      counter += 1;\n    }\n    return result;\n}\n\n// categories input tags\nexport const simpleTags = (element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', __html('new tag'));\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}\n\nexport const initFooter = (_this) => {\n        \n    // Created by %1$Kenzap%2$. ❤️ \n    let left = __html('Pages 1.0.4 by %1$Kenzap%2$. ❤️ Licensed %3$GPLv3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/pages\" target=\"_blank\">', '</a>')  \n    let right = __html('Switch to %1$Developer mode%2$', `<a class=\"text-muted\" href=\"${ link('/develop/') }\" target=\"_self\">`, `</a>`)  ;\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name getAPI\n * @description Returns API link\n * @param {object} headers\n */\nexport const getSiteAPI = () => {\n\n    return window.location.host.indexOf(\"localhost\") == 0 ? \"https://siteapi-dev.kenzap.cloud/\" : \"https://siteapi.kenzap.cloud/\";\n}\n\nexport const getCurrencies = () => {\n\n    // length 164\n    return [\n        {\"name\":\"Afghan Afghani\",\"code\":\"AFA\",\"symbol\":\"؋\"},\n        {\"name\":\"Albanian Lek\",\"code\":\"ALL\",\"symbol\":\"Lek\"},\n        {\"name\":\"Algerian Dinar\",\"code\":\"DZD\",\"symbol\":\"دج\"},\n        {\"name\":\"Angolan Kwanza\",\"code\":\"AOA\",\"symbol\":\"Kz\"},\n        {\"name\":\"Argentine Peso\",\"code\":\"ARS\",\"symbol\":\"$\"},\n        {\"name\":\"Armenian Dram\",\"code\":\"AMD\",\"symbol\":\"֏\"},\n        {\"name\":\"Aruban Florin\",\"code\":\"AWG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"Australian Dollar\",\"code\":\"AUD\",\"symbol\":\"$\"},\n        {\"name\":\"Azerbaijani Manat\",\"code\":\"AZN\",\"symbol\":\"m\"},\n        {\"name\":\"Bahamian Dollar\",\"code\":\"BSD\",\"symbol\":\"B$\"},\n        {\"name\":\"Bahraini Dinar\",\"code\":\"BHD\",\"symbol\":\".د.ب\"},\n        {\"name\":\"Bangladeshi Taka\",\"code\":\"BDT\",\"symbol\":\"৳\"},\n        {\"name\":\"Barbadian Dollar\",\"code\":\"BBD\",\"symbol\":\"Bds$\"},\n        {\"name\":\"Belarusian Ruble\",\"code\":\"BYR\",\"symbol\":\"Br\"},\n        {\"name\":\"Belgian Franc\",\"code\":\"BEF\",\"symbol\":\"fr\"},\n        {\"name\":\"Belize Dollar\",\"code\":\"BZD\",\"symbol\":\"$\"},\n        {\"name\":\"Bermudan Dollar\",\"code\":\"BMD\",\"symbol\":\"$\"},\n        {\"name\":\"Bhutanese Ngultrum\",\"code\":\"BTN\",\"symbol\":\"Nu.\"},\n        {\"name\":\"Bitcoin\",\"code\":\"BTC\",\"symbol\":\"฿\"},\n        {\"name\":\"Bolivian Boliviano\",\"code\":\"BOB\",\"symbol\":\"Bs.\"},\n        {\"name\":\"Bosnia-Herzegovina Convertible Mark\",\"code\":\"BAM\",\"symbol\":\"KM\"},\n        {\"name\":\"Botswanan Pula\",\"code\":\"BWP\",\"symbol\":\"P\"},\n        {\"name\":\"Brazilian Real\",\"code\":\"BRL\",\"symbol\":\"R$\"},\n        {\"name\":\"British Pound Sterling\",\"code\":\"GBP\",\"symbol\":\"£\"},\n        {\"name\":\"Brunei Dollar\",\"code\":\"BND\",\"symbol\":\"B$\"},\n        {\"name\":\"Bulgarian Lev\",\"code\":\"BGN\",\"symbol\":\"Лв.\"},\n        {\"name\":\"Burundian Franc\",\"code\":\"BIF\",\"symbol\":\"FBu\"},\n        {\"name\":\"Cambodian Riel\",\"code\":\"KHR\",\"symbol\":\"KHR\"},\n        {\"name\":\"Canadian Dollar\",\"code\":\"CAD\",\"symbol\":\"$\"},\n        {\"name\":\"Cape Verdean Escudo\",\"code\":\"CVE\",\"symbol\":\"$\"},\n        {\"name\":\"Cayman Islands Dollar\",\"code\":\"KYD\",\"symbol\":\"$\"},\n        {\"name\":\"CFA Franc BCEAO\",\"code\":\"XOF\",\"symbol\":\"CFA\"},\n        {\"name\":\"CFA Franc BEAC\",\"code\":\"XAF\",\"symbol\":\"FCFA\"},\n        {\"name\":\"CFP Franc\",\"code\":\"XPF\",\"symbol\":\"₣\"},\n        {\"name\":\"Chilean Peso\",\"code\":\"CLP\",\"symbol\":\"$\"},\n        {\"name\":\"Chinese Yuan\",\"code\":\"CNY\",\"symbol\":\"¥\"},\n        {\"name\":\"Colombian Peso\",\"code\":\"COP\",\"symbol\":\"$\"},\n        {\"name\":\"Comorian Franc\",\"code\":\"KMF\",\"symbol\":\"CF\"},\n        {\"name\":\"Congolese Franc\",\"code\":\"CDF\",\"symbol\":\"FC\"},\n        {\"name\":\"Costa Rican Colón\",\"code\":\"CRC\",\"symbol\":\"₡\"},\n        {\"name\":\"Croatian Kuna\",\"code\":\"HRK\",\"symbol\":\"kn\"},\n        {\"name\":\"Cuban Convertible Peso\",\"code\":\"CUC\",\"symbol\":\"$, CUC\"},\n        {\"name\":\"Czech Republic Koruna\",\"code\":\"CZK\",\"symbol\":\"Kč\"},\n        {\"name\":\"Danish Krone\",\"code\":\"DKK\",\"symbol\":\"Kr.\"},\n        {\"name\":\"Djiboutian Franc\",\"code\":\"DJF\",\"symbol\":\"Fdj\"},\n        {\"name\":\"Dominican Peso\",\"code\":\"DOP\",\"symbol\":\"$\"},\n        {\"name\":\"East Caribbean Dollar\",\"code\":\"XCD\",\"symbol\":\"$\"},\n        {\"name\":\"Egyptian Pound\",\"code\":\"EGP\",\"symbol\":\"ج.م\"},\n        {\"name\":\"Eritrean Nakfa\",\"code\":\"ERN\",\"symbol\":\"Nfk\"},\n        {\"name\":\"Estonian Kroon\",\"code\":\"EEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Ethiopian Birr\",\"code\":\"ETB\",\"symbol\":\"Nkf\"},\n        {\"name\":\"Euro\",\"code\":\"EUR\",\"symbol\":\"€\"},\n        {\"name\":\"Falkland Islands Pound\",\"code\":\"FKP\",\"symbol\":\"£\"},\n        {\"name\":\"Fijian Dollar\",\"code\":\"FJD\",\"symbol\":\"FJ$\"},\n        {\"name\":\"Gambian Dalasi\",\"code\":\"GMD\",\"symbol\":\"D\"},\n        {\"name\":\"Georgian Lari\",\"code\":\"GEL\",\"symbol\":\"ლ\"},\n        {\"name\":\"German Mark\",\"code\":\"DEM\",\"symbol\":\"DM\"},\n        {\"name\":\"Ghanaian Cedi\",\"code\":\"GHS\",\"symbol\":\"GH₵\"},\n        {\"name\":\"Gibraltar Pound\",\"code\":\"GIP\",\"symbol\":\"£\"},\n        {\"name\":\"Greek Drachma\",\"code\":\"GRD\",\"symbol\":\"₯, Δρχ, Δρ\"},\n        {\"name\":\"Guatemalan Quetzal\",\"code\":\"GTQ\",\"symbol\":\"Q\"},\n        {\"name\":\"Guinean Franc\",\"code\":\"GNF\",\"symbol\":\"FG\"},\n        {\"name\":\"Guyanaese Dollar\",\"code\":\"GYD\",\"symbol\":\"$\"},\n        {\"name\":\"Haitian Gourde\",\"code\":\"HTG\",\"symbol\":\"G\"},\n        {\"name\":\"Honduran Lempira\",\"code\":\"HNL\",\"symbol\":\"L\"},\n        {\"name\":\"Hong Kong Dollar\",\"code\":\"HKD\",\"symbol\":\"$\"},\n        {\"name\":\"Hungarian Forint\",\"code\":\"HUF\",\"symbol\":\"Ft\"},\n        {\"name\":\"Icelandic króna\",\"code\":\"ISK\",\"symbol\":\"kr\"},\n        {\"name\":\"Indian Rupee\",\"code\":\"INR\",\"symbol\":\"₹\"},\n        {\"name\":\"Indonesian Rupiah\",\"code\":\"IDR\",\"symbol\":\"Rp\"},\n        {\"name\":\"Iranian Rial\",\"code\":\"IRR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Iraqi Dinar\",\"code\":\"IQD\",\"symbol\":\"د.ع\"},\n        {\"name\":\"Israeli New Sheqel\",\"code\":\"ILS\",\"symbol\":\"₪\"},\n        {\"name\":\"Italian Lira\",\"code\":\"ITL\",\"symbol\":\"L,£\"},\n        {\"name\":\"Jamaican Dollar\",\"code\":\"JMD\",\"symbol\":\"J$\"},\n        {\"name\":\"Japanese Yen\",\"code\":\"JPY\",\"symbol\":\"¥\"},\n        {\"name\":\"Jordanian Dinar\",\"code\":\"JOD\",\"symbol\":\"ا.د\"},\n        {\"name\":\"Kazakhstani Tenge\",\"code\":\"KZT\",\"symbol\":\"лв\"},\n        {\"name\":\"Kenyan Shilling\",\"code\":\"KES\",\"symbol\":\"KSh\"},\n        {\"name\":\"Kuwaiti Dinar\",\"code\":\"KWD\",\"symbol\":\"ك.د\"},\n        {\"name\":\"Kyrgystani Som\",\"code\":\"KGS\",\"symbol\":\"лв\"},\n        {\"name\":\"Laotian Kip\",\"code\":\"LAK\",\"symbol\":\"₭\"},\n        {\"name\":\"Latvian Lats\",\"code\":\"LVL\",\"symbol\":\"Ls\"},\n        {\"name\":\"Lebanese Pound\",\"code\":\"LBP\",\"symbol\":\"£\"},\n        {\"name\":\"Lesotho Loti\",\"code\":\"LSL\",\"symbol\":\"L\"},\n        {\"name\":\"Liberian Dollar\",\"code\":\"LRD\",\"symbol\":\"$\"},\n        {\"name\":\"Libyan Dinar\",\"code\":\"LYD\",\"symbol\":\"د.ل\"},\n        {\"name\":\"Lithuanian Litas\",\"code\":\"LTL\",\"symbol\":\"Lt\"},\n        {\"name\":\"Macanese Pataca\",\"code\":\"MOP\",\"symbol\":\"$\"},\n        {\"name\":\"Macedonian Denar\",\"code\":\"MKD\",\"symbol\":\"ден\"},\n        {\"name\":\"Malagasy Ariary\",\"code\":\"MGA\",\"symbol\":\"Ar\"},\n        {\"name\":\"Malawian Kwacha\",\"code\":\"MWK\",\"symbol\":\"MK\"},\n        {\"name\":\"Malaysian Ringgit\",\"code\":\"MYR\",\"symbol\":\"RM\"},\n        {\"name\":\"Maldivian Rufiyaa\",\"code\":\"MVR\",\"symbol\":\"Rf\"},\n        {\"name\":\"Mauritanian Ouguiya\",\"code\":\"MRO\",\"symbol\":\"MRU\"},\n        {\"name\":\"Mauritian Rupee\",\"code\":\"MUR\",\"symbol\":\"₨\"},\n        {\"name\":\"Mexican Peso\",\"code\":\"MXN\",\"symbol\":\"$\"},\n        {\"name\":\"Moldovan Leu\",\"code\":\"MDL\",\"symbol\":\"L\"},\n        {\"name\":\"Mongolian Tugrik\",\"code\":\"MNT\",\"symbol\":\"₮\"},\n        {\"name\":\"Moroccan Dirham\",\"code\":\"MAD\",\"symbol\":\"MAD\"},\n        {\"name\":\"Mozambican Metical\",\"code\":\"MZM\",\"symbol\":\"MT\"},\n        {\"name\":\"Myanmar Kyat\",\"code\":\"MMK\",\"symbol\":\"K\"},\n        {\"name\":\"Namibian Dollar\",\"code\":\"NAD\",\"symbol\":\"$\"},\n        {\"name\":\"Nepalese Rupee\",\"code\":\"NPR\",\"symbol\":\"₨\"},\n        {\"name\":\"Netherlands Antillean Guilder\",\"code\":\"ANG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"New Taiwan Dollar\",\"code\":\"TWD\",\"symbol\":\"$\"},\n        {\"name\":\"New Zealand Dollar\",\"code\":\"NZD\",\"symbol\":\"$\"},\n        {\"name\":\"Nicaraguan Córdoba\",\"code\":\"NIO\",\"symbol\":\"C$\"},\n        {\"name\":\"Nigerian Naira\",\"code\":\"NGN\",\"symbol\":\"₦\"},\n        {\"name\":\"North Korean Won\",\"code\":\"KPW\",\"symbol\":\"₩\"},\n        {\"name\":\"Norwegian Krone\",\"code\":\"NOK\",\"symbol\":\"kr\"},\n        {\"name\":\"Omani Rial\",\"code\":\"OMR\",\"symbol\":\".ع.ر\"},\n        {\"name\":\"Pakistani Rupee\",\"code\":\"PKR\",\"symbol\":\"₨\"},\n        {\"name\":\"Panamanian Balboa\",\"code\":\"PAB\",\"symbol\":\"B/.\"},\n        {\"name\":\"Papua New Guinean Kina\",\"code\":\"PGK\",\"symbol\":\"K\"},\n        {\"name\":\"Paraguayan Guarani\",\"code\":\"PYG\",\"symbol\":\"₲\"},\n        {\"name\":\"Peruvian Nuevo Sol\",\"code\":\"PEN\",\"symbol\":\"S/.\"},\n        {\"name\":\"Philippine Peso\",\"code\":\"PHP\",\"symbol\":\"₱\"},\n        {\"name\":\"Polish Zloty\",\"code\":\"PLN\",\"symbol\":\"zł\"},\n        {\"name\":\"Qatari Rial\",\"code\":\"QAR\",\"symbol\":\"ق.ر\"},\n        {\"name\":\"Romanian Leu\",\"code\":\"RON\",\"symbol\":\"lei\"},\n        {\"name\":\"Russian Ruble\",\"code\":\"RUB\",\"symbol\":\"₽\"},\n        {\"name\":\"Rwandan Franc\",\"code\":\"RWF\",\"symbol\":\"FRw\"},\n        {\"name\":\"Salvadoran Colón\",\"code\":\"SVC\",\"symbol\":\"₡\"},\n        {\"name\":\"Samoan Tala\",\"code\":\"WST\",\"symbol\":\"SAT\"},\n        {\"name\":\"Saudi Riyal\",\"code\":\"SAR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Serbian Dinar\",\"code\":\"RSD\",\"symbol\":\"din\"},\n        {\"name\":\"Seychellois Rupee\",\"code\":\"SCR\",\"symbol\":\"SRe\"},\n        {\"name\":\"Sierra Leonean Leone\",\"code\":\"SLL\",\"symbol\":\"Le\"},\n        {\"name\":\"Singapore Dollar\",\"code\":\"SGD\",\"symbol\":\"$\"},\n        {\"name\":\"Slovak Koruna\",\"code\":\"SKK\",\"symbol\":\"Sk\"},\n        {\"name\":\"Solomon Islands Dollar\",\"code\":\"SBD\",\"symbol\":\"Si$\"},\n        {\"name\":\"Somali Shilling\",\"code\":\"SOS\",\"symbol\":\"Sh.so.\"},\n        {\"name\":\"South African Rand\",\"code\":\"ZAR\",\"symbol\":\"R\"},\n        {\"name\":\"South Korean Won\",\"code\":\"KRW\",\"symbol\":\"₩\"},\n        {\"name\":\"Special Drawing Rights\",\"code\":\"XDR\",\"symbol\":\"SDR\"},\n        {\"name\":\"Sri Lankan Rupee\",\"code\":\"LKR\",\"symbol\":\"Rs\"},\n        {\"name\":\"St. Helena Pound\",\"code\":\"SHP\",\"symbol\":\"£\"},\n        {\"name\":\"Sudanese Pound\",\"code\":\"SDG\",\"symbol\":\".س.ج\"},\n        {\"name\":\"Surinamese Dollar\",\"code\":\"SRD\",\"symbol\":\"$\"},\n        {\"name\":\"Swazi Lilangeni\",\"code\":\"SZL\",\"symbol\":\"E\"},\n        {\"name\":\"Swedish Krona\",\"code\":\"SEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Swiss Franc\",\"code\":\"CHF\",\"symbol\":\"CHf\"},\n        {\"name\":\"Syrian Pound\",\"code\":\"SYP\",\"symbol\":\"LS\"},\n        {\"name\":\"São Tomé and Príncipe Dobra\",\"code\":\"STD\",\"symbol\":\"Db\"},\n        {\"name\":\"Tajikistani Somoni\",\"code\":\"TJS\",\"symbol\":\"SM\"},\n        {\"name\":\"Tanzanian Shilling\",\"code\":\"TZS\",\"symbol\":\"TSh\"},\n        {\"name\":\"Thai Baht\",\"code\":\"THB\",\"symbol\":\"฿\"},\n        {\"name\":\"Tongan Pa'anga\",\"code\":\"TOP\",\"symbol\":\"$\"},\n        {\"name\":\"Trinidad & Tobago Dollar\",\"code\":\"TTD\",\"symbol\":\"$\"},\n        {\"name\":\"Tunisian Dinar\",\"code\":\"TND\",\"symbol\":\"ت.د\"},\n        {\"name\":\"Turkish Lira\",\"code\":\"TRY\",\"symbol\":\"₺\"},\n        {\"name\":\"Turkmenistani Manat\",\"code\":\"TMT\",\"symbol\":\"T\"},\n        {\"name\":\"Ugandan Shilling\",\"code\":\"UGX\",\"symbol\":\"USh\"},\n        {\"name\":\"Ukrainian Hryvnia\",\"code\":\"UAH\",\"symbol\":\"₴\"},\n        {\"name\":\"United Arab Emirates Dirham\",\"code\":\"AED\",\"symbol\":\"إ.د\"},\n        {\"name\":\"Uruguayan Peso\",\"code\":\"UYU\",\"symbol\":\"$\"},\n        {\"name\":\"US Dollar\",\"code\":\"USD\",\"symbol\":\"$\"},\n        {\"name\":\"Uzbekistan Som\",\"code\":\"UZS\",\"symbol\":\"лв\"},\n        {\"name\":\"Vanuatu Vatu\",\"code\":\"VUV\",\"symbol\":\"VT\"},\n        {\"name\":\"Venezuelan  Bolívar\",\"code\":\"VEF\",\"symbol\":\"Bs\"},\n        {\"name\":\"Vietnamese Dong\",\"code\":\"VND\",\"symbol\":\"₫\"},\n        {\"name\":\"Yemeni Rial\",\"code\":\"YER\",\"symbol\":\"﷼\"},\n        {\"name\":\"Zambian Kwacha\",\"code\":\"ZMK\",\"symbol\":\"ZK\"}\n    ];\n}","// html inventory list loader\nexport const inventoryListContent = (__) => {\n\n    return `\n    <div class=\"container\">\n\n        <div class=\"d-md-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            <button class=\"btn btn-primary btn-add mt-3 mb-1 mt-md-0 mb-md-0\" type=\"button\">${ __('Add item') }</button>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n                <div class=\"card border-white shadow-sm border-0\">\n                    <div class=\"card-body p-0\">\n                        <div class=\"no-footer\">\n                            <div class=\"row\">\n                                <div class=\"col-sm-12\">\n                                    <div class=\"table-responsive\">\n                                        <table class=\"table table-hover table-borderless align-middle table-striped table-p-list mb-0\" >\n                                            <thead>\n\n                                            </thead>\n                                            <tbody>\n\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"row my-2\">\n                                <div class=\"col-sm-12 col-md-5 d-flex align-items-center\">\n                                    <div class=\"dataTables_info mx-2 text-secondary fw-lighter \" id=\"listing_info\" role=\"status\" aria-live=\"polite\">&nbsp;</div>\n                                </div>\n                                <div class=\"col-sm-12 col-md-7\">\n                                    <div class=\"dataTables_paginate paging_simple_numbers m-2\" id=\"listing_paginate\">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h3 class=\"modal-title\"></h3>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    `;\n\n}","import { H, __html, __attr, html, parseApiError, toast } from '@kenzap/k-cloud';\nimport { simpleTags, onlyNumbers } from \"../_/_helpers.js\"\n\n// html inventory list loader\nexport const inventoryEdit = (_this) => {\n\n    let inventory = { img: [], price: 0, price_per_unit: 0, price_per_unit_prev: 0, status: \"1\", tags: [], stock_amount: 0, stock_unit: \"kg\", stock_warning: \"\", title: \"\", write_off: { type: \"never\", dof: [], time: '0', amount: 0 }, updated: 0 };\n\n    if(_this.state.action == 'edit' && _this.state.id){\n\n        inventory = _this.state.response.inventory.filter((el) => { return el._id == _this.state.id; })[0];\n    }\n\n    let required = false;\n    let modal = document.querySelector(\".modal\");\n    let modalCont = new bootstrap.Modal(modal);\n    modal.querySelector(\".modal-dialog\").classList.add('modal-fullscreen');\n    modal.querySelector(\".modal-title\").innerHTML = _this.state.action == 'edit' ? __html('Edit Item') : __html('Add Item');\n    modal.querySelector('.modal-footer').innerHTML = `\n        <button type=\"button\" class=\"btn btn-primary btn-modal btn-add-item\">${ _this.state.action == 'edit' ? __html('Update') : __html('Add') }</button>\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${ __html('Cancel') }</button>\n        <button class=\"btn btn-danger btn-remove-item btn-lg- ${ _this.state.action == 'edit' ? '' : 'd-none' }\" type=\"button\" title=\"${ __html('Remove application.') }\"><span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\"><path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/><path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/></svg></span></button>\n    `;\n\n    let modalHTml = `\n\n    <h4 class=\"card-title mb-lg-4 mt-sm-3 mt-3\">${__html('Item')}</h4>\n    <div class=\"row\">\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Title')}</label>\n            <div class=\"col-sm-9\">\n                <input id=\"title\" type=\"text\" class=\"form-control inp\" name=\"title\" data-type=\"emails\" value=\"${ inventory.title }\"  autocomplete=\"off\">\n                <p class=\"form-text\">${__html('Item description.')}</p>\n            </div>\n            </div>\n        </div>\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Price per 1 ')}<span id=\"price_stock_unit\">${ inventory.stock_unit }</span></label>\n            <div class=\"col-sm-9\">\n                <div class=\"input-group\">\n                    <input id=\"price_per_unit\" type=\"text\" class=\"form-control inp\" name=\"price_per_unit\" aria-label=\"Current stock amount\" aria-describedby=\"basic-addon1\" value=\"${ inventory.price_per_unit ? inventory.price_per_unit : 0 }\" autocomplete=\"off\">\n                    <span class=\"input-group-text\" id=\"price_curr\">${ html(_this.state.settings.currency_symb ? _this.state.settings.currency_symb : '') }</span>\n                </div>\n                <p class=\"form-text\">${__html('Price per one stock measurement unit.')}</p>\n            </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class=\"card-title mb-lg-4 mt-sm-0 mt-3\">${__html('Stock')}</h4>\n    <div class=\"row\">\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Stock unit')}</label>\n            <div class=\"col-sm-9\">\n                <select id=\"stock_unit\" class=\"form-select inp\" name=\"stock_unit\" data-type=\"select\">\n                    <option value=\"g\" ${ inventory.stock_unit == 'g' ? 'selected' : '' }>${__html('g')}</option>\n                    <option value=\"kg\" ${ inventory.stock_unit == 'kg' ? 'selected' : '' }>${__html('kg')}</option>\n                    <option value=\"set\" ${ inventory.stock_unit == 'set' ? 'selected' : '' }>${__html('set')}</option>\n                    <option value=\"pc\" ${ inventory.stock_unit == 'pc' ? 'selected' : '' }>${__html('piece')}</option>\n                    <option value=\"l\" ${ inventory.stock_unit == 'l' ? 'selected' : '' }>${__html('liter')}</option>\n                </select>\n                <p class=\"form-text\">${__html('Stock measurement unit for inventory deductions.')}</p>\n            </div>\n            </div>\n        </div>\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Current stock')}</label>\n            <div class=\"col-sm-9\">\n                <div class=\"input-group\">\n                    <input id=\"stock_amount\" type=\"text\" class=\"form-control inp\" name=\"stock_amount\" aria-label=\"Current stock amount\" aria-describedby=\"basic-addon1\" value=\"${ inventory.stock_amount }\" autocomplete=\"off\">\n                    <span class=\"input-group-text\" id=\"stock_amount_unit\">${ inventory.stock_unit }</span>\n                </div>\n                <p class=\"form-text\">${__html('Current stock amount.')}</p>\n            </div>\n            </div>\n        </div>\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Low stock')}</label>\n            <div class=\"col-sm-9\">\n                <div class=\"input-group\">\n                    <input id=\"stock_warning\" type=\"text\" class=\"form-control inp\" name=\"stock_warning\" aria-label=\"Low stock warning\" aria-describedby=\"basic-addon2\" value=\"${ inventory.stock_warning }\" autocomplete=\"off\">\n                    <span class=\"input-group-text\" id=\"stock_warning_unit\">${ inventory.stock_unit }</span>\n                </div>\n                <p class=\"form-text\">${__html('Trigger alert when stock drops below this value.')}</p>\n            </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class=\"card-title mb-lg-4 mt-sm-0 mt-3\">${__html('Write-off')}</h4>\n    <div class=\"row\">\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Auto deduction')}</label>\n            <div class=\"col-sm-9\">\n                <div class=\"input-group\">\n                    <select id=\"write_off\" class=\"form-select inp\" name=\"write_off\" data-type=\"select\">\n                        <option value=\"never\" ${ inventory.write_off.type == 'never' ? 'selected' : '' }>${__html('Never')}</option>\n                        <option value=\"daily\" ${ inventory.write_off.type  == 'daily' ? 'selected' : '' }>${__html('Daily')}</option>\n                        <option value=\"ai\" ${ inventory.write_off.type  == 'ai' ? 'selected' : '' }>${__html('AI-driven')}</option>\n                    </select>\n                </div>\n                <p class=\"form-text\">${__html('Trigger alert when stock drops below this value.')}</p>\n            </div>\n            </div>\n            <div class=\"form-group row mb-lg-3 mt-1 write_off_cont ${ inventory.write_off.type == 'never' ? 'd-none' : '' }\">\n                <label class=\"col-sm-3 col-form-label\">${__html('Days of week')}</label>\n                <div class=\"col-sm-9\">\n                    <div class=\"form-check\">\n                        <label for=\"week-monday\" class=\"form-check-label form-label\">\n                            <input id=\"week-monday\" type=\"checkbox\" class=\"form-check-input \" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Monday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label for=\"week-tuesday\" class=\"form-check-label form-label\">\n                            <input id=\"week-tuesday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Tuesday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-wednesday\" class=\"form-check-label form-label\">\n                            <input id=\"week-wednesday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Wednesday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-thursday\" class=\"form-check-label form-label\">\n                            <input id=\"week-thursday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Thursday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-friday\" class=\"form-check-label form-label\">\n                            <input id=\"week-friday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Friday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-saturday\" class=\"form-check-label form-label\">\n                            <input id=\"week-saturday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Saturday') }\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <label id=\"week-sunday\" class=\"form-check-label form-label\">\n                            <input id=\"week-sunday\" type=\"checkbox\" class=\"form-check-input\" ${ required==1?'checked=\"checked\"':'' } value=\"1\">\n                            ${ __html('Sunday') }\n                        </label>\n                    </div>\n                    <p class=\"form-text\">${ __html('Days of the week when discount is available.') }</p>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-lg-6 write_off_cont ${ inventory.write_off.type == 'never' ? 'd-none' : '' }\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n                <label class=\"col-sm-3 col-form-label\">${__html('Amount')}</label>\n                <div class=\"col-sm-9\">\n                    <div class=\"input-group\">\n                        <input id=\"write_off_amount\" type=\"text\" class=\"form-control inp\" name=\"write_off_amount\" aria-label=\"write off stock amount\" aria-describedby=\"basic-addon1\" value=\"${ inventory.write_off.amount ? inventory.write_off.amount : 0 }\" autocomplete=\"off\">\n                        <span class=\"input-group-text\" id=\"write_off_amount_unit\">${ inventory.stock_unit }</span>\n                    </div>\n                    <p class=\"form-text\">${__html('Amount to deduct from current stock amount.')}</p>\n                </div>\n            </div>\n            <div class=\"form-group row mb-lg-3 mt-1\">\n                <label class=\"col-sm-3 col-form-label\">${__html('When')}</label>\n                <div class=\"col-sm-9\">\n                    <select id=\"write_off_time\" class=\"form-select inp\" name=\"write_off_time\" data-type=\"select\">\n                        <option value=\"2\" ${ inventory.write_off.time == '2' ? 'selected' : '' }>${__html('2:00 AM')}</option>\n                        <option value=\"4\" ${ inventory.write_off.time == '4' ? 'selected' : '' }>${__html('4:00 AM')}</option>\n                        <option value=\"6\" ${ inventory.write_off.time == '6' ? 'selected' : '' }>${__html('6:00 AM')}</option>\n                        <option value=\"8\" ${ inventory.write_off.time == '8' ? 'selected' : '' }>${__html('8:00 AM')}</option>\n                        <option value=\"10\" ${ inventory.write_off.time == '10' ? 'selected' : '' }>${__html('10:00 AM')}</option>\n                        <option value=\"12\" ${ inventory.write_off.time == '12' ? 'selected' : '' }>${__html('12:00 PM')}</option>\n                        <option value=\"14\" ${ inventory.write_off.time == '14' ? 'selected' : '' }>${__html('14:00 PM')}</option>\n                        <option value=\"16\" ${ inventory.write_off.time == '16' ? 'selected' : '' }>${__html('16:00 PM')}</option>\n                        <option value=\"18\" ${ inventory.write_off.time == '18' ? 'selected' : '' }>${__html('18:00 PM')}</option>\n                        <option value=\"20\" ${ inventory.write_off.time == '20' ? 'selected' : '' }>${__html('20:00 PM')}</option>\n                        <option value=\"22\" ${ inventory.write_off.time == '22' ? 'selected' : '' }>${__html('22:00 PM')}</option>\n                    </select>\n                    <p class=\"form-text\">${ __html('Local time when deduction is called.') }</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class=\"card-title mb-lg-4 mt-sm-0 mt-3\">${__html('Tagging')}</h4>\n    <div class=\"row\">\n        <div class=\"col-lg-6\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Tags')}</label>\n            <div class=\"col-sm-9\">\n                <div class=\"form-group\">\n                    <div id=\"tags\" class=\"simple-tags\" data-simple-tags=\"\"></div>\n                </div>\n                <p class=\"form-text\">${__html('Use tagging for inventory grouping.')}</p>\n            </div>\n            </div>\n        </div>\n    </div>\n    `;\n\n    modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n    modal.querySelector(\".modal-body\").innerHTML\n\n    // init tags\n    let tags = modal.querySelector('#tags');\n    if (inventory.tags) tags.setAttribute('data-simple-tags', inventory.tags );\n    const sTags = new simpleTags(tags);\n\n    // restrict to numbers only\n    onlyNumbers('#price', [8, 46, 190]);\n    onlyNumbers('#stock_amount', [8, 46, 190, 189, 229]);\n    onlyNumbers('#stock_warning', [8, 46, 190]);\n\n    // stock unit changed\n    modal.querySelector(\"#stock_unit\").addEventListener('change', e => {\n\n        e.preventDefault();\n\n        modal.querySelector(\"#stock_warning_unit\").innerHTML = e.currentTarget.value;\n        modal.querySelector(\"#stock_amount_unit\").innerHTML = e.currentTarget.value;\n        modal.querySelector(\"#write_off_amount_unit\").innerHTML = e.currentTarget.value;\n        modal.querySelector(\"#price_stock_unit\").innerHTML = e.currentTarget.value;\n    });\n\n    // write_off changed\n    modal.querySelector(\"#write_off\").addEventListener('change', e => {\n\n        e.preventDefault();\n\n        // hide all by defaulf\n        [...modal.querySelectorAll(\".write_off_cont\")].forEach(el => {\n\n            el.classList.add('d-none');\n        });\n\n        switch(e.currentTarget.value){\n\n            case 'never':\n\n\n            break;\n            default:\n\n                [...modal.querySelectorAll(\".write_off_cont\")].forEach(el => {\n\n                    el.classList.remove('d-none');\n                });\n\n            break;\n        }\n    });\n\n    // add item btn\n    modal.querySelector(\".btn-add-item\").addEventListener('click', e => {\n\n        e.preventDefault();\n\n        // ui is blocked\n        if(modal.querySelector('.btn-add-item').dataset.loading) return false;\n\n        let data = { write_off: {} };\n        data.title = modal.querySelector(\"#title\").value.trim();\n        data.price_per_unit = parseFloat(modal.querySelector(\"#price_per_unit\").value.trim());\n        data.stock_unit = modal.querySelector(\"#stock_unit\").value.trim();\n        data.stock_amount = parseFloat(modal.querySelector(\"#stock_amount\").value.trim());\n        data.stock_warning = parseFloat(modal.querySelector(\"#stock_warning\").value.trim());\n        data.write_off.type = modal.querySelector(\"#write_off\").value.trim();\n        data.write_off.time = modal.querySelector(\"#write_off_time\").value.trim();\n        data.write_off.amount = parseFloat(modal.querySelector(\"#write_off_amount\").value.trim());\n        data.tags = []; [...modal.querySelectorAll('#tags ul li')].forEach(tag => { data.tags.push(tag.innerHTML.replace('<a>×</a>','').trim()) });\n        data.status = \"1\";\n        data.img = [];\n        data.cats = [];\n\n        if(data.title.length<2){ alert( __html('Please provide longer title') ); return; }\n        if(data.price_per_unit.length == 0){ data.price_per_unit = '0'; }\n        if(data.stock_amount == 0) data.stock_amount = '0';\n        // if(data.stock_unit.length<2){ alert( __html('Please provide longer title') ); return; }\n        if(data.stock_warning.length<2){ data.stock_warning = 0; }\n\n        data.price_per_unit_prev = data.price_per_unit;\n\n        // create query\n        let query = {\n            update: {\n                type:       'create',\n                key:        'ecommerce-inventory',   \n                data:       data\n            }\n        }\n\n        // update query\n        if(_this.state.action == 'edit' && _this.state.id){\n\n            query.update.type = 'update';\n            query.update.id = _this.state.id;\n        }\n                \n        // show loading\n        let btnHTML = modal.querySelector('.btn-add-item').innerHTML;\n        modal.querySelector('.btn-add-item').dataset.loading = true;\n        modal.querySelector('.btn-add-item').innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __html('Loading..');\n  \n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: query\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // restore loading button state\n            modal.querySelector('.btn-add-item').dataset.loading = \"\";\n            modal.querySelector('.btn-add-item').innerHTML = btnHTML;\n\n            if (response.success){\n\n                modalCont.hide();\n\n                _this.getData();\n\n                toast(_this.state.action == 'edit' ? __html('Item updated') : __html('Item created'));\n\n                // open product editing page\n                // window.location.href = link(`/product-edit/?id=${ response.product.id}`)\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    });\n\n    // add remove btn\n    modal.querySelector(\".btn-remove-item\").addEventListener('click', e => {\n\n        e.preventDefault();\n\n        // ui is blocked\n        if(modal.querySelector('.btn-add-item').dataset.loading) return false;\n\n        // confirm removal\n        if(!confirm( __html('Completely remove from inventory?') )) return;\n\n        // show loading\n        let btnHTML = modal.querySelector('.btn-remove-item').innerHTML;\n        modal.querySelector('.btn-add-item').dataset.loading = true;\n        modal.querySelector('.btn-remove-item').innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __html('Loading..');\n  \n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    product: {\n                        type:       'delete',\n                        key:        'ecommerce-inventory',   \n                        id:        _this.state.id,\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // restore loading button state\n            modal.querySelector('.btn-add-item').dataset.loading = \"\";\n            modal.querySelector('.btn-add-item').innerHTML = btnHTML;\n\n            if (response.success){\n\n                modalCont.hide();\n\n                _this.getData();\n\n                toast(__html('Item removed'));\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n\n    });\n\n    modalCont.show();\n\n    if(_this.state.action != 'edit'){ setTimeout( () => modal.querySelector(\"#title\").focus(), 100); }\n}","import { H, __html, __attr, html, attr, parseApiError, simulateClick, toast } from '@kenzap/k-cloud';\nimport { priceFormat, formatTime, stockBadge, getPageNumber, onlyNumbers, mt } from \"../_/_helpers.js\"\nimport { inventoryEdit } from \"../_/_mod_inventory_edit.js\"\n\n// html inventory list loader\nexport const inventoryView = (_this) => {\n\n    let inventory = { img: [], price: 0, price_per_unit: 0, price_per_unit_prev: 0, status: \"1\", tags: [], stock_amount: 0, stock_unit: \"kg\", stock_warning: \"\", title: \"\", updated: 0 };\n\n    inventory = (_this.state.response.inventory.filter((el) => { return el._id == _this.state.id; }))[0];\n\n    inventory.stock_amount = parseFloat(inventory.stock_amount);\n\n    if(!inventory.price) inventory.price = 0;\n\n    let modal = document.querySelector(\".modal\");\n    let modalCont = new bootstrap.Modal(modal);\n    modal.querySelector(\".modal-dialog\").classList.add('modal-fullscreen');\n    modal.querySelector(\".modal-title\").innerHTML = '<div class=\"d-flex align-items-center\">' + html(inventory.title) + '<div class=\"fs-6 ms-2\">' + stockBadge(_this, inventory) + '</div></div>';\n    modal.querySelector('.modal-footer').innerHTML = `\n        <button type=\"button\" class=\"btn btn-danger btn-modal btn-deduct btn-stock-update d-none\">${ __html('Deduct') }</button>\n        <button type=\"button\" class=\"btn btn-success btn-modal btn-top-up btn-stock-update d-none\">${ __html('Top up') }</button>\n        <button type=\"button\" class=\"btn btn-primary btn-modal btn-settings\">${ __html('Settings') }</button>\n        <button class=\"btn btn-outline-secondary remove-application btn-lg d-none\" type=\"button\" title=\"${ __html('Remove application.') }\"><span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\"><path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/><path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/></svg></span></button>\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${ __html('Close') }</button>\n    `;\n\n    let modalHTml = `\n\n    <h4 class=\"card-title mb-lg-4 mt-sm-3 mt-3 mb-0\">${__html('Live stock')}</h4>\n    <div class=\"form-text d-flex\">\n        <div class=\"d-flex align-items-center\">\n            <div>${ parseFloat(inventory.stock_amount).toFixed(2) } ${ inventory.stock_unit }</div>\n            <div id=\"stock_arrow\" class=\"triangle_down mx-2\"></div>\n        </div>\n        <div class=\"d-flex align-items-center ms-2\">\n            <div>${ priceFormat(_this, parseFloat(inventory.price_per_unit)) }</div>\n            <div id=\"price_arrow\" class=\"${ (parseFloat(inventory.price_per_unit_prev) - parseFloat(inventory.price_per_unit)) >= 0 ? 'triangle_down triangle_green' : 'triangle_up triangle_red' } mx-2\"></div>\n        </div>\n        <div class=\"d-flex align-items-center ms-2\">\n            <div>${__html('5 days')}</div>\n            <div class=\"mx-2 d-flex\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" fill=\"currentColor\" class=\"bi bi-clock-history\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z\"/>\n                    <path d=\"M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z\"/>\n                    <path d=\"M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z\"/>\n                </svg>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"row\">\n        <div class=\"col-lg-12\">\n            <div class=\"form-group row mb-lg-3 mt-1\"></div>\n            <div id=\"live_stock\" style=\"width: 100%; height: 320px;\"></div>\n        </div>\n    </div>\n\n    <h4 class=\"card-title mb-lg-4 mt-sm-0 mt-3\">${__html('History')}</h4>\n\n    <div class=\"row mb-4\">\n        <div class=\"col-sm-12\">\n            <div class=\"table-responsive-\">\n                <table class=\"table table-hover table-borderless align-middle table-striped table-history-list mb-0\" style=\"\">\n                    <thead>\n                        <tr>\n                            <th>\n                                ${ __html(\"Details\") }\n                            </th>\n                            <th>\n                                ${ __html('Amount') }\n                            </th>\n                            <th>\n                              \n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody id=\"inventory-history\">\n                        <tr>\n                            <td colspan=\"3\">\n                                ${ __html(\"Loading\") }\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"row mb-4\">\n        <div class=\"col-lg-5\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Details')}</label>\n            <div class=\"col-sm-9\">  \n                <input id=\"details\" type=\"text\" class=\"form-control inp mb-sm-2\" name=\"details\" aria-label=\"details\" aria-describedby=\"basic-addon-details\" value=\"\" autocomplete=\"off\">\n                <p class=\"form-text d-none\">${__html('Use tagging for inventory grouping.')}</p>\n            </div>\n            </div>\n        </div>\n        <div class=\"col-lg-5\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Amount')}</label>\n            <div class=\"col-sm-9\">\n                <div class=\"input-group mb-sm-2\">           \n                    <input id=\"stock_amount\" type=\"text\" class=\"form-control inp\" name=\"stock_amount\" aria-label=\"Current stock amount\" aria-describedby=\"basic-addon1\" value=\"\" autocomplete=\"off\">\n                    <span class=\"input-group-text\" id=\"stock_amount_unit\">${ inventory.stock_unit }</span>\n                </div>\n                <p class=\"form-text d-none\">${__html('Use tagging for inventory grouping.')}</p>\n            </div>\n            </div>\n        </div>\n        <div class=\"col-lg-5\">\n            <div class=\"form-group row mb-lg-3 mt-1\">\n            <label class=\"col-sm-3 col-form-label\">${__html('Total price')}</label>\n            <div class=\"col-sm-9\">\n                <div class=\"input-group mb-sm-2\">           \n                    <input id=\"stock_price\" type=\"text\" class=\"form-control inp\" name=\"stock_price\" aria-label=\"Price\" aria-describedby=\"basic-addon2\" value=\"0\" autocomplete=\"off\">\n                    <span class=\"input-group-text\" id=\"price_cur\">${ html(_this.state.settings.currency_symb ? _this.state.settings.currency_symb : '') }</span>\n                </div>\n                <p class=\"form-text d-none\">${__html('Use tagging for inventory grouping.')}</p>\n            </div>\n            </div>\n        </div>\n    </div>\n\n    `;\n\n    modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n    let liveStock = () => {\n        var data = google.visualization.arrayToDataTable([\n            [__html('Day'),         __html('Stock amount ('+inventory.stock_unit+')')],\n            [__html('-7 days'),      inventory.stock_amount+9.0],\n            [__html('-6 days'),      inventory.stock_amount+8.1],\n            [__html('-5 days'),      inventory.stock_amount+7.5],\n            [__html('-4 days'),      inventory.stock_amount+6.0],\n            [__html('-3 days'),      inventory.stock_amount+3.5],\n            [__html('-2 days'),      inventory.stock_amount+1.5],\n            [__html('Yesterday'),    inventory.stock_amount+0.3],\n            [__html('Today'),        inventory.stock_amount]\n            ]);\n        \n            var options = {\n                // title: 'The decline of \\'The 39 Steps\\'',\n                vAxis: {\n                    title: __html('Stock amount ('+inventory.stock_unit+')')\n                },\n                isStacked: true,\n                legend: { position: 'left' },\n            };\n        \n            var chart = new google.visualization.SteppedAreaChart(modal.querySelector('#live_stock'));\n        \n            chart.draw(data, options);        \n    }\n    google.charts.load('current', {'packages':['corechart']});\n    google.charts.setOnLoadCallback(liveStock);\n\n    // restrict to numbers only\n    onlyNumbers('#stock_price', [8, 46, 190, 189, 229]);\n    onlyNumbers('#stock_amount', [8, 46, 190, 189, 229]);\n\n    // btn settings\n    modal.querySelector(\".btn-settings\").addEventListener('click', e => {\n\n        _this.state.action = 'edit';\n\n        modalCont.hide();\n\n        inventoryEdit(_this);\n    });\n    \n    let topupBtns = (e) => {\n\n        let amount = parseFloat(e.currentTarget.value);\n\n        if(e.currentTarget.value.length == 0){\n\n            modal.querySelector(\".btn-top-up\").classList.add(\"d-none\");\n            modal.querySelector(\".btn-deduct\").classList.add(\"d-none\");    \n            return;\n        }\n   \n        if(amount < 0){\n\n            modal.querySelector(\".btn-top-up\").classList.add(\"d-none\");\n            modal.querySelector(\".btn-deduct\").classList.remove(\"d-none\");\n            modal.querySelector(\"#stock_price\").setAttribute('disabled', true);\n            modal.querySelector(\"#stock_price\").value = \"\";\n\n            return;\n        }\n\n        if(amount > 0){\n\n            modal.querySelector(\".btn-top-up\").classList.remove(\"d-none\");\n            modal.querySelector(\".btn-deduct\").classList.add(\"d-none\");\n            modal.querySelector(\"#stock_price\").removeAttribute('disabled');\n\n            return;\n        }\n    }\n\n    modal.querySelector(\"#stock_amount\").addEventListener('keyup', e => {\n\n        topupBtns(e);\n    });\n\n    modal.querySelector(\"#stock_amount\").addEventListener('click', e => {\n\n        topupBtns(e);\n    });\n\n    // create inventory history record\n    [...modal.querySelectorAll(\".btn-stock-update\")].forEach(btn => {\n\n        btn.addEventListener('click', e => {\n\n            e.preventDefault();\n\n            // ui is blocked\n            if(modal.querySelector('.btn-stock-update').dataset.loading) return false;\n\n            const d = new Date();\n\n            let data = {};\n            data.iid = _this.state.id;\n            data.details = modal.querySelector(\"#details\").value.trim();\n            data.price = modal.querySelector(\"#stock_price\").value.trim();\n            data.stock_unit = modal.querySelector(\"#stock_amount_unit\").innerHTML.trim();\n            data.amount = parseFloat(modal.querySelector(\"#stock_amount\").value.trim());\n            data.ym = d.getFullYear() + '' + mt(d.getMonth()+1);\n            data.ymd = d.getFullYear() + '' + mt(d.getMonth()+1) + mt(d.getDay());\n            data.time = Math.round(d.getTime()/1000);\n\n            if(data.details.length<2){ alert( __html('Please provide longer description') ); return; }\n            if(data.amount.length==0){ alert( __html('Please enter amount') ); return; }\n            if(data.amount > 0 && data.price.length==0){ alert( __html('Please enter price') ); return; }\n            if(data.price.length > 0) data.price = parseFloat(data.price);\n\n            // create query\n            let query = {\n                update: {\n                    type:       'create',\n                    key:        'ecommerce-inventory-history',   \n                    data:       data\n                }\n            }\n                    \n            // show loading\n            _this.state.btnHTML = modal.querySelector('.btn-stock-update').innerHTML;\n            modal.querySelector('.btn-stock-update').dataset.loading = true;\n            modal.querySelector('.btn-stock-update').innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __html('Loading..');\n    \n            // send data\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: H(),\n                body: JSON.stringify({\n                    query: query\n                }) \n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    updateStock(_this, inventory, data);\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        });\n    });\n\n    // update stock amounts\n    let updateStock = (_this, inventory, data) => {\n\n        // calculate new average price normalised by the amount\n        // 5kg / 6 EUR -  10kg / 13 EUR\n        // 3kg           10kg         = 13kg       \n        // 1.2 EUR ..... 1.3 EUR .... = 1.3EUR\n        // let ratio = parseFloat(data.amount) / parseFloat(inventory.stock_amount) * 100;\n        // let price_avg_new = parseFloat(data.price) / parseFloat(data.amount);\n\n        if(!inventory.price) inventory.price = 0;\n\n        let data_query = null;\n\n        console.log(inventory);\n        console.log(data);\n\n        // top up\n        if(data.amount > 0){\n\n            data_query = {\n                stock_amount: (parseFloat(inventory.stock_amount) + parseFloat(data.amount)),\n                price_per_unit: Math.round(parseFloat(data.price)/parseFloat(data.amount)*100)/100,\n                price_per_unit_prev: Math.round(parseFloat(inventory.price) / parseFloat(inventory.stock_amount)*100)/100,\n                price: Math.round(parseFloat(data.price)*100)/100,\n                price_prev: inventory.price\n            }\n\n        // deduction\n        }else{\n\n            data_query = {\n                stock_amount: (parseFloat(inventory.stock_amount) + parseFloat(data.amount)),\n            }\n        }\n\n        // structure stock update query\n        let query = {\n            update: {\n                type:       'update',\n                id:         _this.state.id,\n                key:        'ecommerce-inventory',   \n                data:       data_query\n            }\n        }\n\n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: query\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if (response.success){\n\n                // restore loading button state\n                modal.querySelector('.btn-stock-update').dataset.loading = \"\";\n                modal.querySelector('.btn-stock-update').innerHTML =  _this.state.btnHTML;\n\n                modalCont.hide();\n\n                _this.getData();\n\n                toast(__html('Stock updated'));\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    // copy row\n    let copyRow = (_this, id) => {\n\n        console.log(id);\n\n        let row = _this.state.history.filter((el) => { return el._id == id; })[0];\n\n        document.querySelector('#details').value = row.details;\n        document.querySelector('#stock_amount').value = row.amount;\n        document.querySelector('#stock_price').value = row.price;\n\n        simulateClick(document.querySelector(\"#stock_amount\"));\n\n        document.querySelector(\"#stock_amount\").focus();\n\n        toast(__html('Row copied'));\n    }\n\n    // remove record from history table\n    let removeHistoryRow = (_this, id) => {\n\n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    history: {\n                        type:       'delete',\n                        key:        'ecommerce-inventory-history',   \n                        id:         id,\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if (response.success){\n\n                getHistory(_this);\n\n                toast(__html('Record removed'));\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    // load inventory top up/deduct history table\n    let getHistory = (_this) => {\n\n        // send data\n        let limit = 10;\n        let s = \"\";\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    history: {\n                        type:       'find',\n                        key:        'ecommerce-inventory-history',\n                        fields:     ['_id', 'details', 'price', 'price_per_unit', 'stock_unit', 'amount', 'time', 'updated'],\n                        limit:      limit,\n                        term:[\n                            {\n                                \"field\": \"iid\",\n                                \"relation\": \"=\",\n                                \"type\": \"string\",\n                                \"value\":_this.state.id\n                            }\n                        ],\n                        offset:     s.length > 0 ? 0 : getPageNumber() * limit - limit, // automatically calculate the offset of table pagination\n                        search:     {                                                           // if s is empty search query is ignored\n                                        field: 'details',\n                                        s: s\n                                    },\n                        sortby:     {\n                                        field: 'created',\n                                        order: 'DESC'\n                                    },\n                    },\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if (response.success){\n\n                _this.state.history = response.history;\n\n                // table is empty\n                if(response.history.length == 0){\n                    \n                    document.querySelector(\"#inventory-history\").innerHTML = `<tr><td colspan=\"2\" class=\"form-text\">${ __html(\"No data to display.\") }</td></tr>`;\n                    return;\n                }\n\n                // load table data\n                if(response.history) document.querySelector(\"#inventory-history\").innerHTML = response.history.map((history, i) => {\n\n                    return `\n                        <tr>\n                            <td data-id=\"${ attr(history._id) }\">\n                                ${ history.details }\n                                <div class=\"form-text\">${ formatTime(_this, history.time) } / ${ priceFormat(_this, history.price) }</div>\n                            </td>\n                            <td data-id=\"${ attr(history._id) }\">\n                                <div class=\"fw-bold ${ (history.amount < 0 ? 'text-danger' : 'text-success' ) }\">${ (history.amount < 0 ? '' : '+' ) + history.amount + history.stock_unit }</div>\n                            </td>\n                            <td class=\"text-end d-none-\">\n                                <div class=\"dropdown inventoryHistoryActionsCont\">\n                                    <svg id=\"inventoryHistoryActions${i}\" data-bs-toggle=\"dropdown\" data-boundary=\"viewport\" aria-expanded=\"false\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-three-dots-vertical dropdown-toggle po\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/>\n                                    </svg>\n                                    <ul class=\"dropdown-menu\" aria-labelledby=\"inventoryHistoryActions${i}\">\n                                        <li><a class=\"dropdown-item po\" href=\"#\" data-action=\"copy\" data-id=\"${ attr(history._id) }\" data-index=\"${ i }\">${ __html('Copy') }</a></li>\n                                        <li><hr class=\"dropdown-divider\"></li>\n                                        <li><a class=\"dropdown-item po\" href=\"#\" data-action=\"remove\" data-id=\"${ attr(history._id) }\" data-index=\"${ i }\">${ __html('Remove') }</a></li>\n                                    </ul>\n                                </div>\n                            </td>\n                        </tr>`;\n\n                }).join('');\n\n                // remove from table\n                [...document.querySelectorAll(\".inventoryHistoryActionsCont .dropdown-item\")].forEach(row => {\n                \n                    row.addEventListener(\"click\", (e)=> {\n\n                        switch(e.currentTarget.dataset.action){\n\n                            case 'copy':\n\n                                copyRow(_this, e.currentTarget.dataset.id);\n                            break;\n                            case 'remove':\n\n                                if(!confirm(__html('Remove this record?'))) return;\n\n                                removeHistoryRow(_this, e.currentTarget.dataset.id);\n                            break;\n                        } \n                    });\n                });\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n    \n    getHistory(_this);\n\n    modalCont.show();\n}","import { H, __html, __attr, html, attr, parseApiError } from '@kenzap/k-cloud';\nimport { getPageNumber } from \"../_/_helpers.js\"\n\n// html inventory list loader\nexport const categoryTable = (_this) => {\n\n    let modal = document.querySelector(\".modal\");\n    _this.state.modalCont = new bootstrap.Modal(modal);\n    modal.querySelector(\".modal-dialog\").classList.add('modal-lg');\n    modal.querySelector(\".modal-title\").innerHTML = __html('Sort by Tag');\n    modal.querySelector('.modal-footer').innerHTML = `\n        <button type=\"button\" class=\"btn btn-success btn-modal btn-add btn-inventory-add d-none\">${ __html('Add') }</button>\n        <button class=\"btn btn-outline-secondary remove-application btn-lg d-none\" type=\"button\" title=\"${ __html('Remove application.') }\"><span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\"><path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/><path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/></svg></span></button>\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${ __html('Close') }</button>\n    `;\n\n    modal.querySelector(\".modal-body\").innerHTML = `\n        <div class=\"row mb-4\">\n            <div class=\"col-sm-12\">\n                <div class=\"table-responsive-\">\n                    <table class=\"table table-hover table-borderless align-middle table-striped table-inventory-list mb-0\" style=\"\">\n                        <tbody id=\"category-list\">\n                            <tr>\n                                <td >\n                                    ${ __html(\"Loading\") }\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    `;\n\n    let loadCategories = (_this) => {\n\n        let tags = [];\n\n        // send data\n        let limit = 250;\n        let s = \"\";\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    inventory: {\n                        type:       'find',\n                        key:        'ecommerce-inventory',\n                        fields:     ['_id', 'tags'],\n                        limit:      limit,\n                        offset:     s.length > 0 ? 0 : getPageNumber() * limit - limit,     // automatically calculate the offset of table pagination\n                        term:          [\n                            {\n                                type:       'string',\n                                field:      'tags',\n                                value:      '[]',\n                                relation:   '!='\n                            }\n                        ]\n                    },\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if (response.success){\n\n                _this.state.inventory = response.inventory;\n\n                // table is empty\n                if(response.inventory.length == 0){\n                    \n                    document.querySelector(\"#category-list\").innerHTML = `<tr><td colspan=\"2\" class=\"form-text\">${ __html(\"No data to display.\") }</td></tr>`;\n                    return;\n                }\n\n                // pre-process categories\n                console.log(response.inventory);\n                response.inventory.forEach((inventory, i) => {\n\n                    inventory.tags.forEach((tag, i) => {\n\n                        let exists = tags.filter(cat => { return tag == cat.title })\n                        if(exists.length == 0) tags.push({ title: tag })\n                    });\n\n                });\n                console.log(tags);\n                \n                // load table data\n                document.querySelector(\"#category-list\").innerHTML = tags.map((tag, i) => {\n\n                    return `\n                        <tr>\n                            <td class=\"add-inventory-item\" data-tag=\"${ attr(tag.title) }\">\n                                ${ html(tag.title) }\n                            </td>\n                            <td class=\"text-end d-none- add-inventory-item\" data-index=\"${i}\" data-tag=\"${ attr(tag.title) }\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-plus-circle text-success po\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                                    <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n                                </svg>\n                            </td>\n                        </tr>`;\n\n                }).join('');\n\n                // add inventory item\n                [...document.querySelectorAll(\".add-inventory-item\")].forEach(item => {\n\n                    item.addEventListener('click', el => {\n\n                        _this.state.tag = item.dataset.tag;\n\n                        // alert(_this.state.tag);\n\n                        _this.state.modalCont.hide();\n\n                        _this.getData();\n                    });\n                });\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    loadCategories(_this);\n\n    // btn-inventory-add\n\n    _this.state.modalCont.show();\n\n}","import { H, __html, __attr,  attr, showLoader, hideLoader, initHeader, initBreadcrumbs, parseApiError, getCookie, onClick, onKeyUp, getSiteId, toast, link } from '@kenzap/k-cloud';\nimport { getPageNumber, getPagination, priceFormat, formatTime, stockBadge, initFooter } from \"../_/_helpers.js\"\nimport { inventoryListContent } from \"../_/_cnt_inventory_list.js\"\nimport { inventoryEdit } from \"../_/_mod_inventory_edit.js\"\nimport { inventoryView } from \"../_/_mod_inventory_view.js\"\nimport { categoryTable } from \"../_/_mod_inventory_category_table.js\"\n\n/**\n * Inventory page of the dashboard.\n * Loads HTMLContent from _cnt_inventory_list.js file.\n * Renders inventory list in a dynamic table.\n * Supports global search, sorting and pagination\n * \n * @version 1.0\n */\nclass Inventory {\n    \n    // construct class\n    constructor(){\n        \n        this.state = {\n            firstLoad: true,\n            settings: {}, // cache settings object retrieved from the backend\n            limit: 50,  // number of records to load per table\n        };\n    \n        // connect to backend\n        this.getData();\n    }\n\n    /**\n     * Get data from the cloud and authenticate the user.\n     * Load settings, user, inventory and locale  data.\n     * \n     * @version 1.0\n     * @link https://developer.kenzap.cloud/\n     */\n    getData = () => {\n\n        // show loader during first load\n        if (this.state.firstLoad) showLoader();\n\n        // search content\n        let s = document.querySelector('.search-cont input') ? document.querySelector('.search-cont input').value : '';\n\n        // struct term\n        let term = [];\n\n        // in stock\n        if(document.querySelector('.select-stock-btn')) if(document.querySelector('.select-stock-btn').dataset.key == \"in\"){\n         \n            term.push(\n                {\n                    type:       'string',\n                    field:      'stock_amount',\n                    value:      0,\n                    relation:   '!='\n                }\n            )\n        }\n        \n        // out of stock\n        if(document.querySelector('.select-stock-btn')) if(document.querySelector('.select-stock-btn').dataset.key == \"out\"){\n         \n            term.push(\n                {\n                    type:       'string',\n                    field:      'stock_amount',\n                    value:      0,\n                    relation:   '='\n                }\n            )\n        }\n\n        // struct sort\n        let sort = [];\n\n        // sort by alphabetically\n        if(document.querySelector('.select-title-btn')) if(document.querySelector('.select-title-btn').dataset.key == \"title\"){\n         \n            sort.push(\n                {\n                    field:      'title',\n                    order:      'ASC'\n                }\n            )\n        }\n\n        // sort by updated\n        if(document.querySelector('.select-title-btn')) if(document.querySelector('.select-title-btn').dataset.key == \"updated\"){\n         \n            sort.push(\n                {\n                    field:      'updated',\n                    order:      'DESC'\n                }\n            )\n        }\n\n        // sort default\n        if(sort.length == 0){\n\n            sort.push(\n                {\n                    field:      'title',\n                    order:      'ASC'\n                }\n            )\n        }\n\n        let search = {};\n        \n        // filter by tag\n        if(this.state.tag){\n\n            console.log(\"tag: \" + this.state.tag);\n\n            document.querySelector('.select-title-btn').innerHTML = __html('Tag %1$', '<span class=\"fw-light\">' + this.state.tag + '</span>');\n\n            search =\n                {                                                           // if s is empty search query is ignored\n                    field: 'tags',\n                    s: this.state.tag\n                }\n        }\n\n        // search\n        if(s){\n\n            search =\n                {                                                           // if s is empty search query is ignored\n                    field: 'title',\n                    s: s\n                }\n        }\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: H(),\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        source:      ['extension'],\n                        key:         'ecommerce',\n                    },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_auto_rate', 'tax_rate', 'tax_display', 'fee_calc', 'fee_percent', 'fee_display'],\n                    },\n                    inventory: {\n                        type:       'find',\n                        key:        'ecommerce-inventory',\n                        fields:     ['_id', 'id', 'img', 'status', 'tags', 'price', 'price_prev', 'price_per_unit', 'price_per_unit_prev', 'write_off', 'title', 'stock_amount', 'stock_unit', 'stock_warning', 'updated'],\n                        limit:      this.state.limit,\n                        offset:     s.length > 0 ? 0 : getPageNumber() * this.state.limit - this.state.limit,    // automatically calculate the offset of table pagination\n                        search:     search,\n                        sortby:     sort,\n                        term:       term\n                    },\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if(response.success){\n\n                this.state.settings = response.settings;\n                this.state.response = response;\n\n                // init header\n                initHeader(response);\n\n                // get core html content \n                this.html();  \n\n                // render table\n                this.render(response);\n\n                // bind content listeners\n                this.initListeners();\n            \n                // init pagination\n                this.initPagination(response);\n\n                // initiate footer\n                initFooter(this);\n\n                // first load\n                this.state.firstLoad = false;\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    authUser = (response) => {\n\n        if(response.user){\n            \n            if(response.user.success == true){\n\n                \n            }\n        }\n    }\n\n    html = () => {\n  \n        if(!this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = inventoryListContent(__);\n    }\n\n    render = (response) => {\n\n        console.log(response)\n\n        let self = this;\n\n        if(this.state.firstLoad){\n\n            // initiate breadcrumbs\n            initBreadcrumbs(\n                [\n                    { link: link('https://dashboard.kenzap.cloud'), text: __html('Home') },\n                    { link: link('/'), text: __html('E-commerce') },\n                    { text: __html('Inventory') }\n                ]\n            );\n\n            // init table header\n            document.querySelector(\".table thead\").innerHTML = `\n                <tr>\n                    <th class=\"align-middle text-center\">\n                        <div class=\"d-block m-auto\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"19\" height=\"19\" fill=\"#212529\" class=\"bi justify-content-end bi-search\" viewBox=\"0 0 16 16\" >\n                                <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"></path>\n                            </svg>\n                        </div>\n                    </th>\n                    <th class=\"align-middle\">\n                        <div class=\"search-cont input-group input-group-sm mb-0 justify-content-start\">     \n                            <div class=\"input-group\">\n                                <input type=\"text\" placeholder=\"${ __html('Search inventory') }\" class=\"form-control border-top-0 border-start-0 border-end-0 rounded-0 pe-4\" aria-label=\"${ __html('Search inventory') }\" aria-describedby=\"inputGroup-sizing-sm\" style=\"max-width: 200px;\">\n                                <button type=\"button\" class=\"btn bg-transparent btn-search-clear\" style=\"margin-left: -32px; z-index: 100;\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-circle\" viewBox=\"0 0 16 16\">\n                                        <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                                        <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n                                    </svg>\n                                </button>\n                            </div>\n                        </div>\n                        <div class=\"st-opts st-table dropdown dropstart-\">\n                            <a class=\"text-black text-dark text-decoration-none fw-bolder border-0 dropdown-toggle select-title-btn\" data-key=\"key\" href=\"#\" role=\"button\" id=\"order-updated\" data-id=\"updated\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">${ __html('Title') }</a>\n                            <ul class=\"dropdown-menu select-title\" aria-labelledby=\"order-title\">\n                                <li><a class=\"dppi dropdown-item\" data-key=\"title\" href=\"#\" >${ __html('Title') }</a></li>\n                                <li><a class=\"dppi dropdown-item\" data-key=\"updated\" href=\"#\" >${ __html('Updated') }</a></li>\n                                <li><a class=\"dppi dropdown-item\" data-key=\"tag\" href=\"#\" >${ __html('Tag') }</a></li>\n                            </ul>\n                        </div>\n                    </th>\n                    <th class=\"align-middle\">\n                        <a class=\"text-black text-dark text-decoration-none fw-bolder border-0 dropdown-toggle select-stock-btn\" href=\"#\" data-key=\"\" role=\"button\" id=\"order-updated\" data-id=\"updated\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">${ __html('All') }</a>\n                        <ul class=\"dropdown-menu select-stock\" aria-labelledby=\"order-stock\">\n                            <li><a class=\"dppi dropdown-item\" data-key=\"\" href=\"#\" >${ __html('All') }</a></li>\n                            <li><a class=\"dppi dropdown-item\" data-key=\"in\" href=\"#\" >${ __html('In stock') }</a></li>\n                            <li><a class=\"dppi dropdown-item d-none\" data-key=\"low\" href=\"#\" >${ __html('Low stock') }</a></li>\n                            <li><a class=\"dppi dropdown-item\" data-key=\"out\" href=\"#\" >${ __html('Out of stock') }</a></li>\n                        </ul>\n                    </th>\n                    <th class=\"align-middle d-none d-sm-table-cell\">\n                        ${ __html(\"Price\") }\n                    </th>\n                    <th class=\"align-middle d-none d-sm-table-cell\">\n                        ${ __html('Updated') }\n                    </th>\n                    <th class=\"d-none\"></th>\n                </tr>`;\n\n        }\n\n        // no inventory in the list\n        if (response.inventory.length == 0) {\n\n            document.querySelector(\".table tbody\").innerHTML = `<tr><td colspan=\"6\" class=\"form-text\">${ __html(\"No items to display.\") }</td></tr>`;\n            return;\n        }\n\n        let sid = getSiteId();\n\n        // generate website table\n        let list = '';\n        for (let i in response.inventory) {\n\n            // normalise inventory values\n            if(!response.inventory[i].stock_warning) response.inventory[i].stock_warning = 0;\n            response.inventory[i].stock_warning = parseFloat(response.inventory[i].stock_warning);\n            response.inventory[i].stock_amount = parseFloat(response.inventory[i].stock_amount);\n\n            // set inventory image\n            let img = 'https://cdn.kenzap.com/loading.png';\n            if(typeof(response.inventory[i].img) === 'undefined') response.inventory[i].img = [];\n            if(response.inventory[i].img[0]) img = CDN + '/S'+sid+'/product-'+response.inventory[i]._id+'-1-100x100.jpeg?'+response.inventory[i].updated;\n      \n            list += `\n                <tr>\n                    <td>\n                        <div class=\"timgc view-item\" data-id=\"${ attr(response.inventory[i]._id) }\">\n                            <a href=\"#\"><img src=\"${ img }\" data-srcset=\"${ img }\" class=\"img-fluid rounded\" alt=\"${ __attr(\"Product placeholder\") }\" srcset=\"${ img }\" ></a>\n                        </div>\n                    </td>\n                    <td class=\"destt view-item\" data-id=\"${ attr(response.inventory[i]._id) }\" style=\"max-width:250px;min-width:120px;\">\n                        <div class=\"my-1\"> \n                            <a class=\"text-body\" href=\"#\" >${ response.inventory[i].title }</a>\n                            <div class=\"form-text form-text d-flex fst-italic my-0\">\n                                <div class=\"d-flex align-items-center\">\n                                    <div>${ parseFloat(response.inventory[i].stock_amount).toFixed(2) } ${ response.inventory[i].stock_unit }</div>\n                                    <div id=\"stock_arrow\" class=\"triangle_down mx-2\"></div>\n                                </div>\n                                <div class=\"d-flex align-items-center ms-1\">\n                                    <div>${ priceFormat(self, parseFloat(response.inventory[i].price_per_unit)) }</div>\n                                    <div id=\"price_arrow\" class=\"${ (parseFloat(response.inventory[i].price_per_unit_prev) - parseFloat(response.inventory[i].price_per_unit)) > 0 ? 'triangle_down triangle_green' : '' } ${ (parseFloat(response.inventory[i].price_per_unit_prev) - parseFloat(response.inventory[i].price_per_unit)) < 0 ? 'triangle_up triangle_red' : '' } mx-2\"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <span>${ stockBadge(self, response.inventory[i]) }</span>\n                    </td>\n                    <td class=\"d-none d-sm-table-cell\">\n                        <span>${ priceFormat(self, response.inventory[i].price) }</span>\n                    </td>\n                    <td class=\"d-none d-sm-table-cell\">\n                        <span>${ formatTime(__, response.inventory[i].updated) }</span>\n                    </td>\n                    <td class=\"text-end d-none\">\n\n                    </td>\n                </tr>`; \n        }\n\n        // provide result to the page\n        document.querySelector(\".table tbody\").innerHTML = list;\n\n        if(response.inventory.length < 2){ document.querySelector(\".table tbody\").style.height = \"150px\"; }else{ document.querySelector(\".table tbody\").style.height = \"auto\"; }\n    }\n\n    initListeners = () => {\n\n        // view item\n        onClick('.view-item', e => {\n\n            this.viewItem(e);\n        });\n\n        // search inventory activation\n        onClick('.table-p-list .bi-search', this.listeners.searchInventoryActivate);\n\n        // search inventory hide\n        onClick('.table-p-list .btn-search-clear', this.listeners.searchInventoryDeactivate);\n\n        // search inventory activation\n        onClick('.table-p-list .inventoryActionsCont .dropdown-item', this.listeners.tableAction);\n\n        // stock sort select\n        onClick('.select-stock a', this.listeners.stockSort)\n\n        // title sort select\n        onClick('.select-title a', this.listeners.titleSort)\n\n        // break here if initListeners is called more than once\n        if(!this.state.firstLoad) return;\n\n        // add product modal\n        onClick('.btn-add', this.addItem);\n    }\n\n    listeners = {\n\n        titleSort: (e) => {\n\n            e.preventDefault();\n\n            this.state.tag = \"\";\n\n            // pick category first\n            if(e.currentTarget.dataset.key == 'tag'){\n\n                categoryTable(this)\n            }else{\n\n                document.querySelector('.select-title-btn').innerHTML = e.currentTarget.innerHTML;\n                document.querySelector('.select-title-btn').dataset.key = e.currentTarget.dataset.key;\n\n                this.getData();\n            }\n        },\n\n        stockSort: (e) => {\n\n            e.preventDefault();\n\n            document.querySelector('.select-stock-btn').innerHTML = e.currentTarget.innerHTML;\n            document.querySelector('.select-stock-btn').dataset.key = e.currentTarget.dataset.key;\n\n            this.getData();\n        },\n \n        searchInventoryActivate: (e) => {\n\n            e.preventDefault();\n\n            document.querySelector('.table-p-list thead tr th:nth-child(2) .st-table').style.display = 'none';\n            document.querySelector('.table-p-list thead tr th:nth-child(2) .search-cont').style.display = 'flex';\n            document.querySelector('.table-p-list thead tr th:nth-child(2) .search-cont input').focus();\n\n            // search inventory\n            onKeyUp('.table-p-list thead tr th:nth-child(2) .search-cont input', this.listeners.searchInventory);\n        },\n\n        searchInventoryDeactivate: (e) => {\n\n            e.preventDefault();\n\n            document.querySelector('.table-p-list thead tr th:nth-child(2) .st-table').style.display = 'block';\n            document.querySelector('.table-p-list thead tr th:nth-child(2) .search-cont').style.display = 'none';\n            document.querySelector('.search-cont input').value = \"\";\n\n            setTimeout(()=>{ this.getData(); },500);\n        },\n\n        tableAction: (e) => {\n\n            e.preventDefault();\n\n            this.state.id = e.currentTarget.dataset.id;\n\n            switch(e.currentTarget.dataset.action){\n\n                case 'edit': this.editItem(e); break;\n            }\n        },\n \n        searchInventory: (e) => {\n\n            e.preventDefault();\n\n            this.getData();\n        },\n    }\n\n    viewItem = (e) => {\n\n        this.state.id = e.currentTarget.dataset.id;\n\n        inventoryView(this);\n    }\n\n    editItem = (e) => {\n\n        this.state.action = 'edit';\n\n        inventoryEdit(this);\n    }\n\n    addItem = (e) => {\n\n        this.state.action = 'add';\n\n        inventoryEdit(this);\n    }\n\n    initPagination = (response) => {\n\n        getPagination(__, response.meta, this.getData);\n    }\n\n    initFooter = () => {\n        \n        initFooter(__html('Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/ecommerce\" target=\"_blank\">', '</a>'), '');\n    }\n}\n\nnew Inventory();"],"names":["mt","val","length","replaceQueryParam","param","newval","search","regex","RegExp","query","replace","getPageNumber","urlParams","URLSearchParams","window","location","page","get","parseInt","getPagination","__","meta","cb","document","querySelector","innerHTML","offset","limit","total_records","pbc","Math","ceil","style","display","html","i","page_link","querySelectorAll","_iterator","_createForOfIteratorHelper","_step","_loop","l","value","addEventListener","e","p","ps","dataset","type","history","replaceState","str","title","pathname","preventDefault","s","n","done","err","f","stockBadge","_this","inventory","stock_amount","__html","stock_warning","priceFormat","price","makeNumber","round","parseFloat","toFixed","state","settings","currency_symb_loc","currency_symb","formatTime","timestamp","d","Date","toLocaleDateString","onlyNumbers","sel","chars","push","apply","_toConsumableArray","forEach","el","key","toLowerCase","console","log","isNumber","which","includes","simpleTags","element","Error","DOMParent","DOMList","DOMInput","dataAttribute","arrayOfList","DOMCreate","ul","createElement","input","setAttribute","appendChild","firstElementChild","lastElementChild","DOMRender","currentValue","index","li","concat","onDelete","onKeyUp","event","text","trim","keyCode","id","filter","getAttribute","split","map","toString","initFooter","left","right","link","inventoryListContent","inventoryEdit","img","price_per_unit","price_per_unit_prev","status","tags","stock_unit","write_off","dof","time","amount","updated","action","response","_id","modal","modalCont","bootstrap","Modal","classList","add","modalHTml","currentTarget","remove","loading","data","tag","cats","alert","update","btnHTML","fetch","method","headers","H","body","JSON","stringify","then","json","success","hide","getData","toast","parseApiError","error","confirm","product","show","setTimeout","focus","inventoryView","liveStock","google","visualization","arrayToDataTable","options","vAxis","isStacked","legend","position","chart","SteppedAreaChart","draw","charts","load","setOnLoadCallback","topupBtns","removeAttribute","btn","iid","details","ym","getFullYear","getMonth","ymd","getDay","getTime","updateStock","data_query","price_prev","copyRow","row","simulateClick","removeHistoryRow","getHistory","fields","term","field","sortby","order","attr","join","categoryTable","loadCategories","relation","exists","cat","item","Inventory","_createClass","_classCallCheck","_defineProperty","firstLoad","showLoader","sort","user","token","getCookie","locale","source","hideLoader","initHeader","render","initListeners","initPagination","self","initBreadcrumbs","sid","getSiteId","list","CDN","__attr","height","onClick","viewItem","listeners","searchInventoryActivate","searchInventoryDeactivate","tableAction","stockSort","titleSort","addItem","searchInventory","editItem"],"mappings":"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"}